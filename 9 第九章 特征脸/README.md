# 特征脸人脸识别考勤系统

基于主成分分析(PCA)的人脸识别与自动考勤系统

## 功能特性

- 🎯 **人脸数据采集**：通过摄像头实时采集人脸样本
- 🧠 **特征脸训练**：基于PCA算法提取人脸主要特征
- 👁️ **实时识别**：摄像头实时人脸识别
- 📊 **自动考勤**：识别成功后自动记录考勤信息
- 📈 **实验分析**：支持YaleB数据集的性能测试
- 🎨 **结果可视化**：特征脸和实验结果的图形化展示

## 环境要求

### Python版本
- Python 3.6 或更高版本

### 依赖库
```bash
pip install numpy matplotlib pillow opencv-python
```

## 快速开始

### 1. 运行系统
```bash
python eigenface_attendance_system.py
```

### 2. 系统菜单
运行后会显示交互式菜单：
```
==================================================
     特征脸人脸识别系统
     基于主成分分析(PCA)的人脸识别
==================================================

请选择功能:
1. 采集人脸数据
2. 运行基础实验（YaleB数据集）
3. 可视化特征脸
4. 启动考勤系统
5. 查看考勤记录
0. 退出程序
```

### 3. 使用流程

#### 首次使用（采集数据）
1. 选择 `1. 采集人脸数据`
2. 输入姓名（如：张三）
3. 设置采集样本数量（建议5-10张）
4. 按空格键拍照，按q键退出
5. 系统会在 `dataset/张三/` 文件夹中保存人脸图像

#### 启动考勤系统
1. 确保已采集至少一个人的人脸数据
2. 选择 `4. 启动考勤系统`
3. 系统自动加载数据并训练模型
4. 摄像头启动，开始实时识别
5. 识别成功且置信度>0.6时自动记录考勤
6. 按q键退出系统

#### 查看考勤记录
1. 选择 `5. 查看考勤记录`
2. 系统显示 `attendance.csv` 中的所有考勤记录

## 文件结构

```
特征脸/
├── eigenface_attendance_system.py    # 主程序文件
├── README.md                         # 使用说明
├── dataset/                          # 人脸数据集文件夹
│   ├── 张三/                        # 个人人脸图像文件夹
│   │   ├── 张三_00.png
│   │   ├── 张三_01.png
│   │   └── ...
│   └── 李四/
│       ├── 李四_00.png
│       └── ...
├── yaleBfaces/                       # YaleB标准数据集（可选）
│   ├── subset0/
│   ├── subset1/
│   └── ...
├── attendance.csv                    # 考勤记录文件
└── eigenfaces_visualization.png      # 特征脸可视化图片
```

## 实验功能

### YaleB数据集实验
如果有YaleB人脸数据集，可以：
1. 选择 `2. 运行基础实验（YaleB数据集）`
2. 系统会测试不同K值下的识别准确率
3. 显示最佳参数和性能结果

### 特征脸可视化
1. 选择 `3. 可视化特征脸`
2. 系统生成平均脸和前9个特征脸的可视化图片
3. 保存为 `eigenfaces_visualization.png`

## 技术原理

### 特征脸算法步骤
1. **数据预处理**：将人脸图像转换为灰度图并展平为向量
2. **计算平均脸**：所有训练样本的平均值
3. **差异矩阵**：每个样本减去平均脸
4. **PCA分析**：计算协方差矩阵的特征值和特征向量
5. **特征脸提取**：选择前K个最大特征值对应的特征向量
6. **投影识别**：将测试样本投影到特征脸空间进行匹配

### 关键参数
- **K值**：主成分数量，影响识别精度和计算复杂度
- **置信度阈值**：0.6，高于此值才记录考勤
- **图像尺寸**：50×50像素，平衡精度和速度

## 注意事项

1. **光照条件**：采集和识别时保持相似的光照条件
2. **人脸角度**：尽量保持正面人脸，避免大角度偏转
3. **样本质量**：采集时确保人脸清晰、完整
4. **摄像头权限**：确保程序有摄像头访问权限
5. **数据安全**：人脸数据仅存储在本地，注意隐私保护

## 常见问题

### Q: 无法打开摄像头
A: 检查摄像头是否被其他程序占用，或检查系统权限设置

### Q: 识别准确率低
A: 增加训练样本数量，改善光照条件，或调整K值参数

### Q: 程序运行缓慢
A: 减少K值或训练样本数量，关闭不必要的后台程序

### Q: 考勤重复记录
A: 系统会自动检查当日是否已考勤，避免重复记录

## 扩展功能

可以基于此系统进一步开发：
- Web界面版本
- 多摄像头支持
- 人脸活体检测
- 数据库存储
- 考勤统计分析
- 移动端应用

## 技术支持

如有问题，请检查：
1. Python环境和依赖库是否正确安装
2. 摄像头设备是否正常工作
3. 文件路径和权限是否正确
4. 控制台错误信息提示

---

**作者**：AI实验课程组  
**版本**：1.0  
**更新时间**：2024年