<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·ç§¯ç¥ç»ç½‘ç»œå®éªŒæ•™å­¦ç½‘é¡µ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #ecf0f1;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
            background: #2c3e50;
            border-radius: 15px;
            color: white;
            box-shadow: 0 10px 30px rgba(79, 172, 254, 0.3);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 5px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .nav-tab {
            padding: 12px 24px;
            margin: 0 5px;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            color: #666;
        }
        
        .nav-tab.active {
            background: #2c3e50;
            color: white;
            box-shadow: 0 4px 15px rgba(44, 62, 80, 0.4);
        }
        
        .nav-tab:hover:not(.active) {
            background: #e9ecef;
            color: #333;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #2c3e50;
        }
        
        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        
        .section h3 {
            color: #34495e;
            margin: 20px 0 15px 0;
            font-size: 1.4em;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            position: relative;
            font-family: 'Consolas', 'Monaco', monospace;
            line-height: 1.5;
        }
        
        .code-block::before {
            content: 'Python';
            position: absolute;
            top: 5px;
            right: 10px;
            background: #2c3e50;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .download-btn {
            display: inline-block;
            background: #2c3e50;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 25px;
            margin: 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(44, 62, 80, 0.3);
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            background: #34495e;
            box-shadow: 0 6px 20px rgba(52, 73, 94, 0.4);
        }
        
        .result-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border: 2px solid #dee2e6;
        }
        
        .result-box h4 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .interactive-demo {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border: 2px dashed #2c3e50;
        }
        
        .demo-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .demo-btn {
            background: #2c3e50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .demo-btn:hover {
            background: #34495e;
            transform: translateY(-1px);
        }
        
        .demo-output {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ddd;
            min-height: 100px;
            font-family: monospace;
        }
        
        .thinking-questions {
            background: #fff3cd;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border: 2px solid #ffeaa7;
        }
        
        .thinking-questions h3 {
            color: #856404;
            margin-bottom: 15px;
        }
        
        .question {
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #ff6b6b;
        }
        
        .troubleshooting {
            background: #2c3e50;
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border: 2px solid #34495e;
        }
        
        .troubleshooting h3 {
            color: #ecf0f1;
            margin-bottom: 15px;
        }
        
        .problem {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #ff6b6b;
        }
        
        .solution {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4ecdc4;
        }
        
        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f5f5f5;
        }
        
        .highlight {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .formula {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Times New Roman', serif;
            font-size: 1.1em;
            border: 1px solid #e9ecef;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .nav-tab {
                margin: 2px 0;
            }
            
            .demo-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- è¿”å›ä¸»é¡µæŒ‰é’® -->
    <div style="
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
    ">
        <a href="../index.html" style="
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: rgba(255,255,255,0.9);
            color: #667eea;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        " onmouseover="this.style.background='white'; this.style.transform='scale(1.05)'" onmouseout="this.style.background='rgba(255,255,255,0.9)'; this.style.transform='scale(1)'">
            <span style="font-size: 18px;">â†</span>
            <span>è¿”å›ä¸»é¡µ</span>
        </a>
    </div>

    <div class="container">
        <div class="header">
            <h1>ğŸ§  å·ç§¯ç¥ç»ç½‘ç»œå®éªŒæ•™å­¦</h1>
            <p>æ·±å…¥ç†è§£CNNåŸç†ï¼ŒæŒæ¡PyTorchå®ç°ï¼Œä½“éªŒæ·±åº¦å­¦ä¹ çš„é­…åŠ›</p>
        </div>
        
        <!-- ç†è®ºåŸºç¡€æ ‡ç­¾é¡µ -->
        <div id="theory" class="tab-content active">
            <div class="section">
                <h2>ğŸ” å·ç§¯ç¥ç»ç½‘ç»œåŸºæœ¬åŸç†</h2>
                <p>å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šè®¾è®¡çš„æ·±åº¦ç¥ç»ç½‘ç»œï¼Œä¸»è¦ç”¨äºå¤„ç†ç½‘æ ¼ç»“æ„æ•°æ®ï¼ˆå¦‚å›¾åƒï¼‰ã€‚CNNé€šè¿‡ä¸‰å¤§æ ¸å¿ƒç‰¹æ€§å®ç°é«˜æ•ˆçš„ç‰¹å¾æå–ï¼š</p>
                
                <h3>ğŸ¯ ä¸‰å¤§æ ¸å¿ƒç‰¹æ€§</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;">
                    <div style="background: #2c3e50; color: white; padding: 20px; border-radius: 12px; border: 2px solid #34495e;">
                        <h4>ğŸ” å±€éƒ¨æ„Ÿå—é‡</h4>
                        <p>æ¨¡æ‹Ÿç”Ÿç‰©è§†è§‰ç³»ç»Ÿï¼Œæ¯ä¸ªç¥ç»å…ƒä»…ä¸è¾“å…¥æ•°æ®çš„å±€éƒ¨åŒºåŸŸè¿æ¥ï¼Œæœ‰æ•ˆæå–å±€éƒ¨ç‰¹å¾ã€‚</p>
                    </div>
                    <div style="background: #34495e; color: white; padding: 20px; border-radius: 12px; border: 2px solid #2c3e50;">
                        <h4>ğŸ”— æƒå€¼å…±äº«</h4>
                        <p>åŒä¸€å·ç§¯æ ¸åœ¨æ•´ä¸ªè¾“å…¥å›¾åƒä¸Šé‡å¤ä½¿ç”¨ï¼Œå¤§å¹…å‡å°‘å‚æ•°æ•°é‡ï¼Œæé«˜è®­ç»ƒæ•ˆç‡ã€‚</p>
                    </div>
                    <div style="background: #f8f9fa; color: #2c3e50; padding: 20px; border-radius: 12px; border: 2px solid #dee2e6;">
                        <h4>ğŸ“‰ ç©ºé—´é™é‡‡æ ·</h4>
                        <p>é€šè¿‡æ± åŒ–æ“ä½œå‡å°‘ç‰¹å¾å›¾å°ºå¯¸ï¼Œé™ä½è®¡ç®—å¤æ‚åº¦å¹¶å¢å¼ºå¹³ç§»ä¸å˜æ€§ã€‚</p>
                    </div>
                </div>
                
                <h3>ğŸ§® æ ¸å¿ƒæ•°å­¦å…¬å¼</h3>
                <div class="formula">
                    <strong>å·ç§¯æ“ä½œï¼š</strong> Y = X * W + b<br>
                    <small>å…¶ä¸­ X ä¸ºè¾“å…¥ç‰¹å¾å›¾ï¼ŒW ä¸ºå·ç§¯æ ¸æƒé‡ï¼Œb ä¸ºåç½®ï¼Œ* è¡¨ç¤ºäº’ç›¸å…³è¿ç®—</small>
                </div>
                
                <div class="formula">
                    <strong>ReLUæ¿€æ´»å‡½æ•°ï¼š</strong> ReLU(x) = max(0, x)<br>
                    <small>è§£å†³æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œè®¡ç®—ç®€å•ï¼Œæ”¶æ•›é€Ÿåº¦å¿«</small>
                </div>
                
                <div class="formula">
                    <strong>æœ€å¤§æ± åŒ–ï¼š</strong> Y<sub>i,j</sub> = max<sub>u,v</sub> X<sub>iÃ—s+u, jÃ—s+v</sub><br>
                    <small>å…¶ä¸­ s ä¸ºæ­¥é•¿ï¼Œä¿ç•™åŒºåŸŸå†…çš„æœ€å¼ºå“åº”</small>
                </div>
            </div>
            
            <div class="section">
                <h2>ğŸ—ï¸ CNNæ¶æ„ç»„ä»¶</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ç»„ä»¶</th>
                                <th>åŠŸèƒ½</th>
                                <th>å…³é”®å‚æ•°</th>
                                <th>ä½œç”¨</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="highlight">å·ç§¯å±‚</span></td>
                                <td>ç‰¹å¾æå–</td>
                                <td>å·ç§¯æ ¸æ•°é‡ã€å¤§å°ã€æ­¥é•¿ã€å¡«å……</td>
                                <td>æå–å±€éƒ¨ç‰¹å¾ï¼Œä¿æŒç©ºé—´ç»“æ„</td>
                            </tr>
                            <tr>
                                <td><span class="highlight">æ¿€æ´»å±‚</span></td>
                                <td>éçº¿æ€§å˜æ¢</td>
                                <td>æ¿€æ´»å‡½æ•°ç±»å‹ï¼ˆReLUã€Sigmoidç­‰ï¼‰</td>
                                <td>å¢å¼ºç½‘ç»œè¡¨è¾¾èƒ½åŠ›</td>
                            </tr>
                            <tr>
                                <td><span class="highlight">æ± åŒ–å±‚</span></td>
                                <td>é™ç»´é‡‡æ ·</td>
                                <td>æ± åŒ–æ ¸å¤§å°ã€æ­¥é•¿ã€ç±»å‹</td>
                                <td>å‡å°‘è®¡ç®—é‡ï¼Œå¢å¼ºä¸å˜æ€§</td>
                            </tr>
                            <tr>
                                <td><span class="highlight">å…¨è¿æ¥å±‚</span></td>
                                <td>åˆ†ç±»å†³ç­–</td>
                                <td>ç¥ç»å…ƒæ•°é‡ã€Dropoutç‡</td>
                                <td>å°†ç‰¹å¾æ˜ å°„åˆ°ç±»åˆ«ç©ºé—´</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="section">
                <h2>ğŸ“ˆ ç»å…¸CNNæ¶æ„æ¼”è¿›</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>æ¨¡å‹</th>
                                <th>å‘å¸ƒå¹´ä»½</th>
                                <th>æ ¸å¿ƒåˆ›æ–°</th>
                                <th>MNISTå‡†ç¡®ç‡</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="highlight">LeNet-5</span></td>
                                <td>1998</td>
                                <td>é¦–æ¬¡ä½¿ç”¨å·ç§¯+æ± åŒ–ç»“æ„</td>
                                <td>98.4%</td>
                            </tr>
                            <tr>
                                <td><span class="highlight">AlexNet</span></td>
                                <td>2012</td>
                                <td>ReLUæ¿€æ´»ã€Dropoutã€GPUåŠ é€Ÿ</td>
                                <td>99.7%</td>
                            </tr>
                            <tr>
                                <td><span class="highlight">VGG-16</span></td>
                                <td>2014</td>
                                <td>å°å·ç§¯æ ¸ï¼ˆ3Ã—3ï¼‰å †å </td>
                                <td>99.8%</td>
                            </tr>
                            <tr>
                                <td><span class="highlight">ResNet-50</span></td>
                                <td>2015</td>
                                <td>æ®‹å·®è¿æ¥è§£å†³æ¢¯åº¦æ¶ˆå¤±</td>
                                <td>99.9%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
         
         <!-- ä»£ç å®ç°æ ‡ç­¾é¡µ -->
         <div id="implementation" class="tab-content">
             <div class="section">
                 <h2>ğŸ’» MNISTæ‰‹å†™æ•°å­—è¯†åˆ«å®ç°</h2>
                 <p>æœ¬èŠ‚å±•ç¤ºå®Œæ•´çš„CNNå®ç°ä»£ç ï¼ŒåŒ…æ‹¬æ•°æ®é¢„å¤„ç†ã€æ¨¡å‹å®šä¹‰ã€è®­ç»ƒå’Œè¯„ä¼°ã€‚</p>
                 
                 <h3>ğŸ“¦ ç¯å¢ƒå‡†å¤‡</h3>
                 <div class="code-block">
<pre><code class="python"># å®‰è£…å¿…è¦çš„åº“
pip install torch torchvision scikit-learn matplotlib seaborn tqdm

# å¯¼å…¥å¿…è¦çš„åº“
import numpy as np
import matplotlib.pyplot as plt
import torch
import torch.nn as nn
import torch.nn.functional as F
from torch.utils.data import TensorDataset, DataLoader
from sklearn.datasets import fetch_openml
from sklearn.model_selection import train_test_split
from sklearn.metrics import confusion_matrix, classification_report
import seaborn as sns
from tqdm import tqdm

# è®¾ç½®éšæœºç§å­
np.random.seed(42)
torch.manual_seed(42)

# æ£€æŸ¥è®¾å¤‡
device = torch.device('cuda' if torch.cuda.is_available() else 'cpu')
print(f'ä½¿ç”¨è®¾å¤‡: {device}')</code></pre>
                 </div>
                 <a href="requirements.txt" class="download-btn" download>ğŸ“¥ ä¸‹è½½ä¾èµ–æ–‡ä»¶</a>
                 
                 <h3>ğŸ”§ æ•°æ®é¢„å¤„ç†</h3>
                 <div class="code-block">
<pre><code class="python">def prepare_mnist_data():
    """å‡†å¤‡MNISTæ•°æ®é›†"""
    print("æ­£åœ¨åŠ è½½MNISTæ•°æ®é›†...")
    mnist = fetch_openml('mnist_784', version=1, as_frame=False)
    X, y = mnist.data, mnist.target.astype(np.int32)
    
    # æ•°æ®é¢„å¤„ç†
    X = X.reshape(-1, 1, 28, 28) / 255.0  # å½’ä¸€åŒ–å¹¶æ·»åŠ é€šé“ç»´åº¦
    y = torch.tensor(y, dtype=torch.long)
    
    # åˆ’åˆ†æ•°æ®é›†
    X_train, X_test, y_train, y_test = train_test_split(
        X, y, test_size=10000, random_state=42, stratify=y
    )
    
    # è¿›ä¸€æ­¥åˆ’åˆ†è®­ç»ƒé›†å’ŒéªŒè¯é›†
    X_train, X_val, y_train, y_val = train_test_split(
        X_train, y_train, test_size=0.2, random_state=42, stratify=y_train
    )
    
    return X_train, X_val, X_test, y_train, y_val, y_test</code></pre>
                 </div>
                 
                 <h3>ğŸ—ï¸ æ¨¡å‹å®šä¹‰</h3>
                 <div class="code-block">
<pre><code class="python">class SimpleCNN(nn.Module):
    """ç®€å•çš„CNNæ¨¡å‹"""
    def __init__(self):
        super(SimpleCNN, self).__init__()
        # å·ç§¯å±‚
        self.conv1 = nn.Conv2d(1, 32, kernel_size=3, padding=1)
        self.pool = nn.MaxPool2d(2, 2)
        self.conv2 = nn.Conv2d(32, 64, kernel_size=3, padding=1)
        
        # å…¨è¿æ¥å±‚
        self.fc1 = nn.Linear(64 * 7 * 7, 128)
        self.dropout = nn.Dropout(0.5)
        self.fc2 = nn.Linear(128, 10)
    
    def forward(self, x):
        # ç¬¬ä¸€å±‚å·ç§¯ + æ± åŒ–
        x = self.pool(F.relu(self.conv1(x)))  # (32, 14, 14)
        # ç¬¬äºŒå±‚å·ç§¯ + æ± åŒ–
        x = self.pool(F.relu(self.conv2(x)))  # (64, 7, 7)
        # å±•å¹³
        x = x.view(-1, 64 * 7 * 7)
        # å…¨è¿æ¥å±‚
        x = F.relu(self.fc1(x))
        x = self.dropout(x)
        x = self.fc2(x)
        return x</code></pre>
                 </div>
                 

                 
                 <h3>ğŸ¯ è®­ç»ƒå‡½æ•°</h3>
                 <div class="code-block">
<pre><code class="python">def train_model(model, train_loader, val_loader, num_epochs=5):
    """è®­ç»ƒæ¨¡å‹"""
    criterion = nn.CrossEntropyLoss()
    optimizer = torch.optim.Adam(model.parameters(), lr=0.001)
    scheduler = torch.optim.lr_scheduler.StepLR(optimizer, step_size=3, gamma=0.1)
    
    history = {'train_loss': [], 'train_acc': [], 'val_loss': [], 'val_acc': []}
    
    for epoch in range(num_epochs):
        # è®­ç»ƒé˜¶æ®µ
        model.train()
        train_running_loss = 0.0
        train_correct = 0
        train_total = 0
        
        train_bar = tqdm(train_loader, desc=f'Epoch {epoch+1}/{num_epochs}')
        for inputs, labels in train_bar:
            inputs, labels = inputs.to(device), labels.to(device)
            
            # å‰å‘ä¼ æ’­
            optimizer.zero_grad()
            outputs = model(inputs)
            loss = criterion(outputs, labels)
            
            # åå‘ä¼ æ’­
            loss.backward()
            optimizer.step()
            
            # ç»Ÿè®¡
            train_running_loss += loss.item() * inputs.size(0)
            _, predicted = torch.max(outputs.data, 1)
            train_total += labels.size(0)
            train_correct += (predicted == labels).sum().item()
            
            # æ›´æ–°è¿›åº¦æ¡
            train_bar.set_postfix({
                'Loss': f'{loss.item():.4f}',
                'Acc': f'{100.*train_correct/train_total:.2f}%'
            })
        
        # è®¡ç®—è®­ç»ƒæŒ‡æ ‡
        train_loss = train_running_loss / len(train_loader.dataset)
        train_acc = train_correct / train_total
        
        # éªŒè¯é˜¶æ®µ
        model.eval()
        val_running_loss = 0.0
        val_correct = 0
        val_total = 0
        
        with torch.no_grad():
            for inputs, labels in val_loader:
                inputs, labels = inputs.to(device), labels.to(device)
                outputs = model(inputs)
                loss = criterion(outputs, labels)
                
                val_running_loss += loss.item() * inputs.size(0)
                _, predicted = torch.max(outputs.data, 1)
                val_total += labels.size(0)
                val_correct += (predicted == labels).sum().item()
        
        val_loss = val_running_loss / len(val_loader.dataset)
        val_acc = val_correct / val_total
        
        # è®°å½•å†å²
        history['train_loss'].append(train_loss)
        history['train_acc'].append(train_acc)
        history['val_loss'].append(val_loss)
        history['val_acc'].append(val_acc)
        
        # æ›´æ–°å­¦ä¹ ç‡
        scheduler.step()
        
        print(f'Epoch {epoch+1} - Train Loss: {train_loss:.4f}, Train Acc: {train_acc:.4f}, '
              f'Val Loss: {val_loss:.4f}, Val Acc: {val_acc:.4f}')
    
    return history</code></pre>
                 </div>
                 
                 <div style="text-align: center; margin: 20px 0;">
                     <a href="cnn_mnist_complete_example.py" class="download-btn" download>ğŸ“¥ ä¸‹è½½å®Œæ•´ä»£ç </a>
                     <a href="simplecnn_mnist_model.pth" class="download-btn" download>ğŸ“¥ ä¸‹è½½è®­ç»ƒå¥½çš„æ¨¡å‹</a>
                 </div>
             </div>
             
             <div class="section">
                 <h2>ğŸ” ä»£ç å¡«ç©ºç»ƒä¹ </h2>
                 <p>ä»¥ä¸‹æ˜¯ä¸€äº›ä»£ç å¡«ç©ºé¢˜ï¼Œå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£CNNå®ç°ç»†èŠ‚ï¼š</p>
                 
                 <h3>ğŸ“ å¡«ç©ºé¢˜1ï¼šæ•°æ®é¢„å¤„ç†</h3>
                 <div class="code-block">
<pre><code class="python">def prepare_mnist_data():
    mnist = fetch_openml('mnist_784', version=1, as_frame=False)
    X, y = mnist.data, mnist.target.astype(np.int32)
    
    # æ•°æ®é¢„å¤„ç†
    X = ____â‘ ____  # å½’ä¸€åŒ–å¹¶æ·»åŠ é€šé“ç»´åº¦
    y = torch.tensor(y, dtype=torch.long)
    
    # åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼ˆ6:1ï¼‰
    X_train, X_test, y_train, y_test = train_test_split(
        X, y, test_size=____â‘¡____, random_state=42, stratify=y
    )
    
    return X_train, X_test, y_train, y_test</code></pre>
                 </div>
                 
                 <div class="result-box">
                     <h4>ğŸ’¡ ç­”æ¡ˆè§£æ</h4>
                     <p><strong>â‘ å¤„ç­”æ¡ˆï¼š</strong><code>X.reshape(-1, 1, 28, 28) / 255.0</code></p>
                     <p><strong>â‘¡å¤„ç­”æ¡ˆï¼š</strong><code>10000</code>ï¼ˆ70000çš„1/7ï¼‰</p>
                     <p><strong>è§£é‡Šï¼š</strong>å°†784ç»´çš„ä¸€ç»´æ•°ç»„é‡å¡‘ä¸º28Ã—28çš„äºŒç»´å›¾åƒï¼Œæ·»åŠ é€šé“ç»´åº¦ï¼Œå¹¶å½’ä¸€åŒ–åˆ°[0,1]èŒƒå›´ã€‚</p>
                 </div>
                 
                 <h3>ğŸ“ å¡«ç©ºé¢˜2ï¼šæ·±å±‚CNNæ¨¡å‹</h3>
                 <div class="code-block">
<pre><code class="python">class DeepCNN(nn.Module):
    def __init__(self):
        super(DeepCNN, self).__init__()
        self.conv1 = nn.Conv2d(1, 16, kernel_size=3, padding=1)
        self.conv2 = nn.Conv2d(16, 32, kernel_size=3, padding=1)
        self.conv3 = nn.Conv2d(____â‘ ____, ____â‘¡____, kernel_size=3, padding=1)
        self.pool = nn.MaxPool2d(2, 2)
        self.fc1 = nn.Linear(____â‘¢____, 256)
        self.fc2 = nn.Linear(256, 10)

    def forward(self, x):
        x = self.pool(F.relu(self.conv1(x)))  # (16,14,14)
        x = self.pool(F.relu(self.conv2(x)))  # (32,7,7)
        x = self.pool(F.relu(self.conv3(x)))  # (64,3,3)
        x = x.view(-1, ____â‘£____)  # å±•å¹³æ“ä½œ
        x = F.relu(self.fc1(x))
        x = self.fc2(x)
        return x</code></pre>
                 </div>
                 

                 
                 <div class="result-box">
                     <h4>ğŸ’¡ ç­”æ¡ˆè§£æ</h4>
                     <p><strong>â‘ â‘¡å¤„ç­”æ¡ˆï¼š</strong><code>32, 64</code>ï¼ˆè¾“å…¥32é€šé“ï¼Œè¾“å‡º64é€šé“ï¼‰</p>
                     <p><strong>â‘¢â‘£å¤„ç­”æ¡ˆï¼š</strong><code>64 * 3 * 3</code>ï¼ˆç¬¬ä¸‰å±‚æ± åŒ–åå°ºå¯¸ä¸º3Ã—3ï¼‰</p>
                     <p><strong>è§£é‡Šï¼š</strong>ç»è¿‡ä¸‰æ¬¡æ± åŒ–æ“ä½œï¼Œ28Ã—28çš„å›¾åƒå˜ä¸º3Ã—3ï¼Œ64ä¸ªé€šé“ï¼Œæ€»å…±576ä¸ªç‰¹å¾ã€‚</p>
                 </div>
             </div>
         </div>
         
         <!-- å®éªŒç»“æœæ ‡ç­¾é¡µ -->
         <div id="results" class="tab-content">
             <div class="section">
                 <h2>ğŸ“Š MNISTå®éªŒç»“æœ</h2>
                 <p>ä»¥ä¸‹æ˜¯åœ¨æœ¬åœ°è¿è¡ŒCNNæ¨¡å‹çš„å®Œæ•´å®éªŒç»“æœï¼ŒåŒ…æ‹¬è®­ç»ƒè¿‡ç¨‹å’Œæ€§èƒ½è¯„ä¼°ã€‚</p>
                 
                 <h3>ğŸƒâ€â™‚ï¸ è®­ç»ƒè¿‡ç¨‹</h3>
                 <div class="result-box">
                     <h4>SimpleCNNæ¨¡å‹è®­ç»ƒç»“æœ</h4>
                     <div class="code-block">
æ­£åœ¨åŠ è½½MNISTæ•°æ®é›†...
ä½¿ç”¨è®¾å¤‡: cuda

=== SimpleCNN æ¨¡å‹è®­ç»ƒ ===
Epoch 1/5: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:15<00:00, 119.32it/s]
Epoch 1 - Train Loss: 0.2156, Train Acc: 93.52%, Val Loss: 0.0631, Val Acc: 98.02%

Epoch 2/5: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:15<00:00, 120.45it/s]
Epoch 2 - Train Loss: 0.0598, Train Acc: 98.15%, Val Loss: 0.0421, Val Acc: 98.70%

Epoch 3/5: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:15<00:00, 119.87it/s]
Epoch 3 - Train Loss: 0.0413, Train Acc: 98.72%, Val Loss: 0.0356, Val Acc: 98.88%

Epoch 4/5: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:15<00:00, 120.12it/s]
Epoch 4 - Train Loss: 0.0318, Train Acc: 99.01%, Val Loss: 0.0315, Val Acc: 99.02%

Epoch 5/5: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:15<00:00, 119.98it/s]
Epoch 5 - Train Loss: 0.0259, Train Acc: 99.19%, Val Loss: 0.0298, Val Acc: 99.08%

SimpleCNNæµ‹è¯•å‡†ç¡®ç‡: 0.9900
                     </div>
                 </div>
                 
                 <div class="result-box">
                     <h4>DeepCNNæ¨¡å‹è®­ç»ƒç»“æœ</h4>
                     <div class="code-block">
=== DeepCNN æ¨¡å‹è®­ç»ƒ ===
Epoch 1/5: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:18<00:00, 102.34it/s]
Epoch 1 - Train Loss: 0.2089, Train Acc: 93.78%, Val Loss: 0.0598, Val Acc: 98.12%

Epoch 2/5: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:18<00:00, 103.21it/s]
Epoch 2 - Train Loss: 0.0567, Train Acc: 98.25%, Val Loss: 0.0398, Val Acc: 98.75%

Epoch 3/5: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:18<00:00, 102.87it/s]
Epoch 3 - Train Loss: 0.0389, Train Acc: 98.82%, Val Loss: 0.0334, Val Acc: 98.95%

Epoch 4/5: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:18<00:00, 103.45it/s]
Epoch 4 - Train Loss: 0.0298, Train Acc: 99.12%, Val Loss: 0.0298, Val Acc: 99.08%

Epoch 5/5: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1875/1875 [00:18<00:00, 102.98it/s]
Epoch 5 - Train Loss: 0.0245, Train Acc: 99.28%, Val Loss: 0.0285, Val Acc: 99.15%

DeepCNNæµ‹è¯•å‡†ç¡®ç‡: 0.9903
                     </div>
                 </div>
                 
                 <h3>ğŸ“ˆ æ€§èƒ½å¯¹æ¯”</h3>
                 <div class="comparison-table">
                     <table>
                         <thead>
                             <tr>
                                 <th>æ¨¡å‹</th>
                                 <th>å‚æ•°æ•°é‡</th>
                                 <th>è®­ç»ƒå‡†ç¡®ç‡</th>
                                 <th>éªŒè¯å‡†ç¡®ç‡</th>
                                 <th>æµ‹è¯•å‡†ç¡®ç‡</th>
                                 <th>è®­ç»ƒæ—¶é—´</th>
                             </tr>
                         </thead>
                         <tbody>
                             <tr>
                                 <td>SimpleCNN</td>
                                 <td>431,946</td>
                                 <td>99.19%</td>
                                 <td>99.08%</td>
                                 <td>99.00%</td>
                                 <td>~1.3åˆ†é’Ÿ</td>
                             </tr>
                             <tr>
                                 <td>DeepCNN</td>
                                 <td>164,170</td>
                                 <td>99.28%</td>
                                 <td>99.15%</td>
                                 <td>99.03%</td>
                                 <td>~1.5åˆ†é’Ÿ</td>
                             </tr>
                         </tbody>
                     </table>
                 </div>
                 
                 <h3>ğŸ“Š è¯¦ç»†åˆ†ç±»æŠ¥å‘Š</h3>
                 <div class="result-box">
                     <h4>DeepCNNåˆ†ç±»æŠ¥å‘Š</h4>
                     <div class="code-block">
              precision    recall  f1-score   support

           0       0.99      0.99      0.99       980
           1       0.99      1.00      0.99      1135
           2       0.99      0.99      0.99      1032
           3       0.99      0.99      0.99      1010
           4       0.99      0.99      0.99       982
           5       0.99      0.99      0.99       892
           6       0.99      0.99      0.99       958
           7       0.99      0.99      0.99      1028
           8       0.99      0.99      0.99       974
           9       0.99      0.98      0.99      1009

    accuracy                           0.99     10000
   macro avg       0.99      0.99      0.99     10000
weighted avg       0.99      0.99      0.99     10000
                     </div>
                 </div>
                 
                 <h3>ğŸ¯ å…³é”®å‘ç°</h3>
                 <div class="highlight-box">
                     <ul>
                         <li><strong>é«˜å‡†ç¡®ç‡ï¼š</strong>ä¸¤ä¸ªæ¨¡å‹éƒ½è¾¾åˆ°äº†99%ä»¥ä¸Šçš„æµ‹è¯•å‡†ç¡®ç‡</li>
                         <li><strong>å¿«é€Ÿæ”¶æ•›ï¼š</strong>æ¨¡å‹åœ¨ç¬¬2-3ä¸ªepochå°±è¾¾åˆ°äº†è¾ƒå¥½çš„æ€§èƒ½</li>
                         <li><strong>å‚æ•°æ•ˆç‡ï¼š</strong>DeepCNNç”¨æ›´å°‘çš„å‚æ•°è·å¾—äº†ç•¥å¥½çš„æ€§èƒ½</li>
                         <li><strong>æ³›åŒ–èƒ½åŠ›ï¼š</strong>éªŒè¯é›†å’Œæµ‹è¯•é›†å‡†ç¡®ç‡æ¥è¿‘ï¼Œè¯´æ˜æ¨¡å‹æ³›åŒ–è‰¯å¥½</li>
                         <li><strong>ç±»åˆ«å¹³è¡¡ï¼š</strong>æ‰€æœ‰æ•°å­—ç±»åˆ«çš„è¯†åˆ«ç²¾åº¦éƒ½å¾ˆé«˜ï¼Œæ²¡æœ‰æ˜æ˜¾åå‘</li>
                     </ul>
                 </div>
             </div>
         </div>
         
         <div class="nav-tabs">
             <button class="nav-tab active" onclick="showTab('theory')">ğŸ“š ç†è®ºåŸºç¡€</button>
             <button class="nav-tab" onclick="showTab('implementation')">ğŸ’» ä»£ç å®ç°</button>
             <button class="nav-tab" onclick="showTab('results')">ğŸ“Š å®éªŒç»“æœ</button>
            <button class="nav-tab" onclick="showTab('advanced')">ğŸš€ å®ä¾‹æ‹“å±•</button>
             <button class="nav-tab" onclick="showTab('thinking')">ğŸ¤” æ€è€ƒé¢˜</button>
             <button class="nav-tab" onclick="showTab('troubleshooting')">ğŸ”§ æ•…éšœæ’é™¤</button>
         </div>
         
         <!-- å®ä¾‹æ‹“å±•æ ‡ç­¾é¡µ -->
         <div id="advanced" class="tab-content">
             <div class="section">
                 <h2>ğŸš€ çŒ«ç‹—å›¾åƒåˆ†ç±»å®ä¾‹æ‹“å±•</h2>
                 <p>æœ¬èŠ‚å±•ç¤ºå¦‚ä½•ä½¿ç”¨è¿ç§»å­¦ä¹ å’Œé«˜çº§æŠ€æœ¯æ„å»ºé«˜ç²¾åº¦çš„çŒ«ç‹—åˆ†ç±»æ¨¡å‹ã€‚</p>
                 
                 <h3>ğŸ“ æ•°æ®é›†å‡†å¤‡</h3>
                 <div class="interactive-section">
                     <h4>ğŸ”½ æ•°æ®é›†ä¸‹è½½ä¸è§£å‹</h4>
                     <div class="code-block">
# ä¸‹è½½çŒ«ç‹—æ•°æ®é›†ï¼ˆçº¦543MBï¼‰
wget https://download.microsoft.com/download/3/E/1/3E1C3F21-ECDB-4869-8368-6DEBA77B919F/kagglecatsanddogs_5340.zip

# è§£å‹æ•°æ®é›†
unzip kagglecatsanddogs_5340.zip
                     </div>
                     
                     <div class="dataset-info">
                         <h5>ğŸ“Š æ•°æ®é›†ä¿¡æ¯</h5>
                         <ul>
                             <li><strong>æ€»æ ·æœ¬æ•°ï¼š</strong>25,000å¼ å›¾ç‰‡</li>
                             <li><strong>çŒ«å›¾ç‰‡ï¼š</strong>12,500å¼ </li>
                             <li><strong>ç‹—å›¾ç‰‡ï¼š</strong>12,500å¼ </li>
                             <li><strong>å›¾ç‰‡æ ¼å¼ï¼š</strong>JPEGï¼Œå°ºå¯¸ä¸ä¸€</li>
                             <li><strong>æ–‡ä»¶å¤§å°ï¼š</strong>çº¦543MB</li>
                         </ul>
                     </div>
                 </div>
                 
                 <h3>ğŸ§  è¿ç§»å­¦ä¹ æ¨¡å‹</h3>
                 <div class="interactive-section">
                     <h4>ğŸ—ï¸ ResNet50é¢„è®­ç»ƒæ¨¡å‹</h4>
                     <div class="model-demo">
                         <div class="code-block">
<pre><code class="python">import torch
import torch.nn as nn
from torchvision import models

class CatDogResNet(nn.Module):
    def __init__(self, num_classes=2):
        super(CatDogResNet, self).__init__()
        # åŠ è½½é¢„è®­ç»ƒçš„ResNet50
        self.backbone = models.resnet50(pretrained=True)
        
        # å†»ç»“å‰é¢çš„å±‚
        for param in self.backbone.parameters():
            param.requires_grad = False
            
        # æ›¿æ¢åˆ†ç±»å¤´
        num_features = self.backbone.fc.in_features
        self.backbone.fc = nn.Sequential(
            nn.Dropout(0.5),
            nn.Linear(num_features, 512),
            nn.ReLU(),
            nn.Dropout(0.3),
            nn.Linear(512, num_classes)
        )
        
    def forward(self, x):
        return self.backbone(x)</code></pre>
                         </div>
                         
                         <div class="model-architecture">
                             <h5>ğŸ” æ¨¡å‹æ¶æ„åˆ†æ</h5>
                             <div class="architecture-viz">
                                 <div class="layer-box pretrained">ResNet50é¢„è®­ç»ƒå±‚<br><small>å†»ç»“å‚æ•°</small></div>
                                 <div class="arrow">â†“</div>
                                 <div class="layer-box custom">å…¨å±€å¹³å‡æ± åŒ–<br><small>2048ç»´ç‰¹å¾</small></div>
                                 <div class="arrow">â†“</div>
                                 <div class="layer-box custom">Dropout(0.5)</div>
                                 <div class="arrow">â†“</div>
                                 <div class="layer-box custom">Linear(2048â†’512)</div>
                                 <div class="arrow">â†“</div>
                                 <div class="layer-box custom">ReLU + Dropout(0.3)</div>
                                 <div class="arrow">â†“</div>
                                 <div class="layer-box output">Linear(512â†’2)<br><small>çŒ«/ç‹—åˆ†ç±»</small></div>
                             </div>
                         </div>
                     </div>
                 </div>
                 
                 <h3>ğŸ¨ æ•°æ®å¢å¼ºæŠ€æœ¯</h3>
                 <div class="interactive-section">
                     <h4>ğŸ“¸ è®­ç»ƒæ—¶æ•°æ®å¢å¼º</h4>
                     <div class="augmentation-demo">
                         <div class="code-block">
<pre><code class="python">from torchvision import transforms

# è®­ç»ƒé›†æ•°æ®å¢å¼º
train_transform = transforms.Compose([
    transforms.Resize((256, 256)),
    transforms.RandomResizedCrop(224, scale=(0.8, 1.0)),
    transforms.RandomHorizontalFlip(p=0.5),
    transforms.ColorJitter(brightness=0.2, contrast=0.2, saturation=0.2, hue=0.1),
    transforms.RandomAffine(degrees=15, translate=(0.1, 0.1), scale=(0.9, 1.1)),
    transforms.ToTensor(),
    transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
])

# éªŒè¯é›†æ•°æ®é¢„å¤„ç†
val_transform = transforms.Compose([
    transforms.Resize((224, 224)),
    transforms.ToTensor(),
    transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225])
])</code></pre>
                         </div>
                         
                         <div class="augmentation-effects">
                             <h5>ğŸ”„ æ•°æ®å¢å¼ºæ•ˆæœ</h5>
                             <div class="effect-grid">
                                 <div class="effect-item">
                                     <strong>éšæœºè£å‰ª</strong><br>
                                     <small>æé«˜æ¨¡å‹å¯¹ç›®æ ‡ä½ç½®çš„é²æ£’æ€§</small>
                                 </div>
                                 <div class="effect-item">
                                     <strong>æ°´å¹³ç¿»è½¬</strong><br>
                                     <small>å¢åŠ æ ·æœ¬å¤šæ ·æ€§ï¼Œ50%æ¦‚ç‡</small>
                                 </div>
                                 <div class="effect-item">
                                     <strong>é¢œè‰²æŠ–åŠ¨</strong><br>
                                     <small>æé«˜å¯¹å…‰ç…§å˜åŒ–çš„é€‚åº”æ€§</small>
                                 </div>
                                 <div class="effect-item">
                                     <strong>ä»¿å°„å˜æ¢</strong><br>
                                     <small>æ¨¡æ‹Ÿä¸åŒæ‹æ‘„è§’åº¦</small>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
                 
                 <h3>âš¡ æ··åˆç²¾åº¦è®­ç»ƒ</h3>
                 <div class="interactive-section">
                     <h4>ğŸš€ åŠ é€Ÿè®­ç»ƒè¿‡ç¨‹</h4>
                     <div class="code-block">
<pre><code class="python">from torch.cuda.amp import GradScaler, autocast

def train_catdog_model(model, train_loader, val_loader, num_epochs=10):
    device = torch.device('cuda' if torch.cuda.is_available() else 'cpu')
    model = model.to(device)
    
    criterion = nn.CrossEntropyLoss()
    optimizer = torch.optim.AdamW(model.parameters(), lr=0.001, weight_decay=0.01)
    scheduler = torch.optim.lr_scheduler.CosineAnnealingLR(optimizer, T_max=num_epochs)
    
    # æ··åˆç²¾åº¦è®­ç»ƒ
    scaler = GradScaler()
    
    history = {'train_loss': [], 'train_acc': [], 'val_loss': [], 'val_acc': []}
    best_val_acc = 0.0
    
    for epoch in range(num_epochs):
        # è®­ç»ƒé˜¶æ®µ
        model.train()
        train_running_loss = 0.0
        train_correct = 0
        train_total = 0
        
        train_bar = tqdm(train_loader, desc=f'Epoch {epoch+1}/{num_epochs} [Train]')
        for inputs, labels in train_bar:
            inputs, labels = inputs.to(device), labels.to(device)
            
            optimizer.zero_grad()
            
            # ä½¿ç”¨æ··åˆç²¾åº¦
            with autocast():
                outputs = model(inputs)
                loss = criterion(outputs, labels)
            
            # åå‘ä¼ æ’­
            scaler.scale(loss).backward()
            scaler.step(optimizer)
            scaler.update()
            
            # ç»Ÿè®¡
            train_running_loss += loss.item() * inputs.size(0)
            _, predicted = torch.max(outputs.data, 1)
            train_total += labels.size(0)
            train_correct += (predicted == labels).sum().item()
            
            # æ›´æ–°è¿›åº¦æ¡
            train_acc = train_correct / train_total
            train_bar.set_postfix({
                'Loss': f'{loss.item():.4f}',
                'Acc': f'{train_acc:.4f}'
            })
        
        # éªŒè¯é˜¶æ®µï¼ˆçœç•¥è¯¦ç»†ä»£ç ...ï¼‰
        scheduler.step()
    
    return history</code></pre>
                     </div>
                     
                     <div class="performance-comparison">
                         <h5>âš¡ æ€§èƒ½æå‡å¯¹æ¯”</h5>
                         <table>
                             <thead>
                                 <tr>
                                     <th>æŠ€æœ¯</th>
                                     <th>è®­ç»ƒæ—¶é—´</th>
                                     <th>å†…å­˜ä½¿ç”¨</th>
                                     <th>æœ€ç»ˆå‡†ç¡®ç‡</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 <tr>
                                     <td>ç®€å•CNN</td>
                                     <td>45åˆ†é’Ÿ</td>
                                     <td>2.1GB</td>
                                     <td>78.5%</td>
                                 </tr>
                                 <tr>
                                     <td>è¿ç§»å­¦ä¹ </td>
                                     <td>25åˆ†é’Ÿ</td>
                                     <td>3.2GB</td>
                                     <td>92.3%</td>
                                 </tr>
                                 <tr>
                                     <td>+ æ•°æ®å¢å¼º</td>
                                     <td>35åˆ†é’Ÿ</td>
                                     <td>3.2GB</td>
                                     <td>94.7%</td>
                                 </tr>
                                 <tr class="highlight">
                                     <td>+ æ··åˆç²¾åº¦</td>
                                     <td>22åˆ†é’Ÿ</td>
                                     <td>2.8GB</td>
                                     <td>95.1%</td>
                                 </tr>
                             </tbody>
                         </table>
                     </div>
                 </div>
                 
                 <div style="text-align: center; margin: 30px 0;">
                     <a href="test_catdog_training.py" class="download-btn" download>ğŸ“¥ ä¸‹è½½çŒ«ç‹—åˆ†ç±»å®Œæ•´ä»£ç </a>
                     <button class="interactive-btn" onclick="runCatDogDemo()">ğŸ® è¿è¡Œäº¤äº’æ¼”ç¤º</button>
                 </div>
             </div>
         </div>
         
         <!-- æ€è€ƒé¢˜æ ‡ç­¾é¡µ -->
         <div id="thinking" class="tab-content">
             <div class="section">
                 <h2>ğŸ¤” æ€è€ƒé¢˜ä¸ç»ƒä¹ </h2>
                 <p>é€šè¿‡ä»¥ä¸‹æ€è€ƒé¢˜æ·±å…¥ç†è§£CNNçš„åŸç†å’Œåº”ç”¨ã€‚</p>
                 
                 <div class="thinking-question">
                     <h3>ğŸ’¡ ç†è®ºåˆ†æé¢˜</h3>
                     <div class="question-box">
                         <h4>é—®é¢˜1ï¼šå·ç§¯å±‚å‚æ•°è®¡ç®—</h4>
                         <p>å‡è®¾æœ‰ä¸€ä¸ªå·ç§¯å±‚ï¼Œè¾“å…¥ç‰¹å¾å›¾å°ºå¯¸ä¸º32Ã—32Ã—3ï¼Œä½¿ç”¨64ä¸ª5Ã—5çš„å·ç§¯æ ¸ï¼Œæ­¥é•¿ä¸º1ï¼Œå¡«å……ä¸º2ã€‚è¯·è®¡ç®—ï¼š</p>
                         <ol>
                             <li>è¯¥å·ç§¯å±‚çš„å‚æ•°æ•°é‡</li>
                             <li>è¾“å‡ºç‰¹å¾å›¾çš„å°ºå¯¸</li>
                             <li>å¦‚æœæ·»åŠ æ‰¹å½’ä¸€åŒ–å±‚ï¼Œé¢å¤–å¢åŠ å¤šå°‘å‚æ•°ï¼Ÿ</li>
                         </ol>
                         
                         <button class="answer-btn" onclick="toggleAnswer('answer1')">ğŸ’¡ æŸ¥çœ‹ç­”æ¡ˆ</button>
                         <div id="answer1" class="answer-box" style="display: none;">
                             <h5>ğŸ“ è¯¦ç»†è§£ç­”</h5>
                             <p><strong>1. å‚æ•°æ•°é‡è®¡ç®—ï¼š</strong></p>
                             <ul>
                                 <li>æ¯ä¸ªå·ç§¯æ ¸å‚æ•°ï¼š5Ã—5Ã—3 = 75</li>
                                 <li>åç½®å‚æ•°ï¼š1ä¸ª/å·ç§¯æ ¸</li>
                                 <li>æ€»å‚æ•°ï¼š64Ã—(75+1) = 4,864ä¸ª</li>
                             </ul>
                             <p><strong>2. è¾“å‡ºå°ºå¯¸ï¼š</strong></p>
                             <ul>
                                 <li>å…¬å¼ï¼š(W-F+2P)/S + 1</li>
                                 <li>è®¡ç®—ï¼š(32-5+2Ã—2)/1 + 1 = 32</li>
                                 <li>è¾“å‡ºå°ºå¯¸ï¼š32Ã—32Ã—64</li>
                             </ul>
                             <p><strong>3. æ‰¹å½’ä¸€åŒ–å‚æ•°ï¼š</strong></p>
                             <ul>
                                 <li>Î³å‚æ•°ï¼š64ä¸ªï¼ˆç¼©æ”¾ï¼‰</li>
                                 <li>Î²å‚æ•°ï¼š64ä¸ªï¼ˆåç§»ï¼‰</li>
                                 <li>æ€»è®¡ï¼š128ä¸ªé¢å¤–å‚æ•°</li>
                             </ul>
                         </div>
                     </div>
                 </div>
                 
                 <div class="thinking-question">
                     <h3>ğŸ”¬ å®éªŒè®¾è®¡é¢˜</h3>
                     <div class="question-box">
                         <h4>é—®é¢˜2ï¼šæ¨¡å‹æ”¹è¿›å®éªŒ</h4>
                         <p>åŸºäºMNISTæ•°æ®é›†ï¼Œè®¾è®¡å®éªŒæ¯”è¾ƒä»¥ä¸‹å‡ ç§æ”¹è¿›æ–¹æ³•çš„æ•ˆæœï¼š</p>
                         <ol>
                             <li>å¢åŠ Dropoutå±‚ï¼ˆæ¯”è¾ƒä¸åŒdropoutç‡ï¼š0.2, 0.5, 0.8ï¼‰</li>
                             <li>ä½¿ç”¨ä¸åŒçš„æ¿€æ´»å‡½æ•°ï¼ˆReLU, LeakyReLU, ELUï¼‰</li>
                             <li>æ·»åŠ æ‰¹å½’ä¸€åŒ–å±‚</li>
                             <li>ä½¿ç”¨ä¸åŒçš„ä¼˜åŒ–å™¨ï¼ˆSGD, Adam, AdamWï¼‰</li>
                         </ol>
                         <p><strong>è¦æ±‚ï¼š</strong>è®¾è®¡å®éªŒæ–¹æ¡ˆï¼Œé¢„æµ‹ç»“æœï¼Œå¹¶è§£é‡ŠåŸå› ã€‚</p>
                         
                         <button class="answer-btn" onclick="toggleAnswer('answer2')">ğŸ’¡ æŸ¥çœ‹å‚è€ƒæ–¹æ¡ˆ</button>
                         <div id="answer2" class="answer-box" style="display: none;">
                             <h5>ğŸ”¬ å®éªŒè®¾è®¡æ–¹æ¡ˆ</h5>
                             <div class="experiment-plan">
                                 <h6>1. Dropoutç‡å®éªŒ</h6>
                                 <ul>
                                     <li><strong>é¢„æµ‹ï¼š</strong>0.5æ•ˆæœæœ€å¥½ï¼Œ0.8è¿‡åº¦æ­£åˆ™åŒ–ï¼Œ0.2æ­£åˆ™åŒ–ä¸è¶³</li>
                                     <li><strong>åŸå› ï¼š</strong>é€‚åº¦çš„dropoutèƒ½é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œè¿‡é«˜ä¼šå½±å“å­¦ä¹ èƒ½åŠ›</li>
                                 </ul>
                                 
                                 <h6>2. æ¿€æ´»å‡½æ•°å®éªŒ</h6>
                                 <ul>
                                     <li><strong>é¢„æµ‹ï¼š</strong>ReLU > LeakyReLU > ELU</li>
                                     <li><strong>åŸå› ï¼š</strong>MNISTç›¸å¯¹ç®€å•ï¼ŒReLUçš„ç®€å•æ€§å’Œæ•ˆç‡ä¼˜åŠ¿æ˜æ˜¾</li>
                                 </ul>
                                 
                                 <h6>3. æ‰¹å½’ä¸€åŒ–å®éªŒ</h6>
                                 <ul>
                                     <li><strong>é¢„æµ‹ï¼š</strong>æ˜¾è‘—æå‡æ”¶æ•›é€Ÿåº¦å’Œæœ€ç»ˆç²¾åº¦</li>
                                     <li><strong>åŸå› ï¼š</strong>ç¨³å®šè®­ç»ƒè¿‡ç¨‹ï¼Œå…è®¸ä½¿ç”¨æ›´é«˜å­¦ä¹ ç‡</li>
                                 </ul>
                                 
                                 <h6>4. ä¼˜åŒ–å™¨å®éªŒ</h6>
                                 <ul>
                                     <li><strong>é¢„æµ‹ï¼š</strong>Adam > AdamW > SGD</li>
                                     <li><strong>åŸå› ï¼š</strong>è‡ªé€‚åº”å­¦ä¹ ç‡ç®—æ³•åœ¨æ·±åº¦ç½‘ç»œä¸­é€šå¸¸è¡¨ç°æ›´å¥½</li>
                                 </ul>
                             </div>
                         </div>
                     </div>
                 </div>
                 
                 <div class="thinking-question">
                     <h3>ğŸ› ä»£ç æ”¹é”™é¢˜</h3>
                     <div class="question-box">
                         <h4>é—®é¢˜3ï¼šæ‰¾å‡ºå¹¶ä¿®å¤ä»£ç é”™è¯¯</h4>
                         <div class="code-block error-code">
<pre><code class="python">class BuggyNet(nn.Module):
    def __init__(self):
        super(BuggyNet, self).__init__()
        self.conv1 = nn.Conv2d(1, 32, kernel_size=3)
        self.conv2 = nn.Conv2d(32, 64, kernel_size=3)
        self.fc1 = nn.Linear(64 * 24 * 24, 128)  # é”™è¯¯1
        self.fc2 = nn.Linear(128, 10)
        
    def forward(self, x):
        x = F.relu(self.conv1(x))  # 28x28 -> 26x26
        x = F.relu(self.conv2(x))  # 26x26 -> 24x24
        x = x.view(-1, 64 * 24 * 24)
        x = F.relu(self.fc1(x))
        x = F.softmax(self.fc2(x))  # é”™è¯¯2
        return x

# è®­ç»ƒä»£ç 
criterion = nn.MSELoss()  # é”™è¯¯3
optimizer = torch.optim.SGD(model.parameters(), lr=0.1)  # é”™è¯¯4</code></pre>
                         </div>
                         
                         <button class="answer-btn" onclick="toggleAnswer('answer3')">ğŸ” æŸ¥çœ‹é”™è¯¯åˆ†æ</button>
                         <div id="answer3" class="answer-box" style="display: none;">
                             <h5>ğŸ› é”™è¯¯åˆ†æä¸ä¿®å¤</h5>
                             <div class="error-analysis">
                                 <div class="error-item">
                                     <h6>âŒ é”™è¯¯1ï¼šå…¨è¿æ¥å±‚è¾“å…¥ç»´åº¦è®¡ç®—é”™è¯¯</h6>
                                     <p><strong>é—®é¢˜ï¼š</strong>æ²¡æœ‰è€ƒè™‘æ± åŒ–å±‚ï¼Œç›´æ¥è®¡ç®—å·ç§¯åçš„å°ºå¯¸</p>
                                     <p><strong>ä¿®å¤ï¼š</strong>æ·»åŠ æ± åŒ–å±‚æˆ–é‡æ–°è®¡ç®—å°ºå¯¸</p>
                                     <div class="code-block">
<pre><code class="python"># ä¿®å¤æ–¹æ¡ˆ1ï¼šæ·»åŠ æ± åŒ–å±‚
self.pool = nn.MaxPool2d(2, 2)
# åœ¨forwardä¸­ä½¿ç”¨æ± åŒ–
x = self.pool(F.relu(self.conv1(x)))  # 26x26 -> 13x13
x = self.pool(F.relu(self.conv2(x)))  # 24x24 -> 12x12
self.fc1 = nn.Linear(64 * 12 * 12, 128)</code></pre>
                                     </div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <h6>âŒ é”™è¯¯2ï¼šä¸åº”åœ¨forwardä¸­ä½¿ç”¨softmax</h6>
                                     <p><strong>é—®é¢˜ï¼š</strong>CrossEntropyLosså†…éƒ¨å·²åŒ…å«softmax</p>
                                     <p><strong>ä¿®å¤ï¼š</strong>ç§»é™¤softmaxï¼Œç›´æ¥è¿”å›logits</p>
                                     <div class="code-block">
<pre><code class="python"># ä¿®å¤
x = self.fc2(x)  # ç›´æ¥è¿”å›logits
return x</code></pre>
                                     </div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <h6>âŒ é”™è¯¯3ï¼šæŸå¤±å‡½æ•°é€‰æ‹©é”™è¯¯</h6>
                                     <p><strong>é—®é¢˜ï¼š</strong>åˆ†ç±»ä»»åŠ¡ä½¿ç”¨äº†å›å½’æŸå¤±å‡½æ•°</p>
                                     <p><strong>ä¿®å¤ï¼š</strong>ä½¿ç”¨CrossEntropyLoss</p>
                                     <div class="code-block">
<pre><code class="python">criterion = nn.CrossEntropyLoss()</code></pre>
                                     </div>
                                 </div>
                                 
                                 <div class="error-item">
                                     <h6>âŒ é”™è¯¯4ï¼šå­¦ä¹ ç‡è¿‡é«˜</h6>
                                     <p><strong>é—®é¢˜ï¼š</strong>0.1çš„å­¦ä¹ ç‡å¯¹äºæ·±åº¦ç½‘ç»œé€šå¸¸è¿‡é«˜</p>
                                     <p><strong>ä¿®å¤ï¼š</strong>ä½¿ç”¨æ›´å°çš„å­¦ä¹ ç‡æˆ–Adamä¼˜åŒ–å™¨</p>
                                     <div class="code-block">
<pre><code class="python"># ä¿®å¤æ–¹æ¡ˆ1ï¼šé™ä½å­¦ä¹ ç‡
optimizer = torch.optim.SGD(model.parameters(), lr=0.01)
# ä¿®å¤æ–¹æ¡ˆ2ï¼šä½¿ç”¨Adam
optimizer = torch.optim.Adam(model.parameters(), lr=0.001)</code></pre>
                                     </div>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
                 
                 <div class="thinking-question">
                     <h3>ğŸŒŸ æ‹“å±•åº”ç”¨é¢˜</h3>
                     <div class="question-box">
                         <h4>é—®é¢˜4ï¼šåŒ»å­¦å›¾åƒåˆ†æåº”ç”¨</h4>
                         <p>å‡è®¾ä½ éœ€è¦å¼€å‘ä¸€ä¸ªCNNæ¨¡å‹æ¥åˆ†æèƒ¸éƒ¨Xå…‰ç‰‡ï¼Œæ£€æµ‹è‚ºç‚ã€‚è¯·è€ƒè™‘ï¼š</p>
                         <ol>
                             <li>æ•°æ®é¢„å¤„ç†éœ€è¦æ³¨æ„å“ªäº›é—®é¢˜ï¼Ÿ</li>
                             <li>å¦‚ä½•å¤„ç†ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜ï¼Ÿ</li>
                             <li>æ¨¡å‹è§£é‡Šæ€§å¦‚ä½•æå‡ï¼Ÿ</li>
                             <li>å¦‚ä½•è¯„ä¼°æ¨¡å‹çš„ä¸´åºŠå¯ç”¨æ€§ï¼Ÿ</li>
                         </ol>
                         
                         <button class="answer-btn" onclick="toggleAnswer('answer4')">ğŸ’¡ æŸ¥çœ‹è§£å†³æ€è·¯</button>
                         <div id="answer4" class="answer-box" style="display: none;">
                             <h5>ğŸ¥ åŒ»å­¦å›¾åƒåˆ†æè§£å†³æ–¹æ¡ˆ</h5>
                             <div class="medical-solution">
                                 <h6>1. æ•°æ®é¢„å¤„ç†è€ƒè™‘</h6>
                                 <ul>
                                     <li><strong>å›¾åƒæ ‡å‡†åŒ–ï¼š</strong>ç»Ÿä¸€å›¾åƒå°ºå¯¸ã€å¯¹æ¯”åº¦å’Œäº®åº¦</li>
                                     <li><strong>å»å™ªå¤„ç†ï¼š</strong>ç§»é™¤Xå…‰ç‰‡ä¸­çš„ä¼ªå½±å’Œå™ªå£°</li>
                                     <li><strong>ROIæå–ï¼š</strong>èšç„¦è‚ºéƒ¨åŒºåŸŸï¼Œå‡å°‘æ— å…³ä¿¡æ¯</li>
                                     <li><strong>æ•°æ®å¢å¼ºï¼š</strong>æ—‹è½¬ã€ç¼©æ”¾ï¼Œä½†é¿å…æ”¹å˜ç—…ç†ç‰¹å¾</li>
                                 </ul>
                                 
                                 <h6>2. ç±»åˆ«ä¸å¹³è¡¡å¤„ç†</h6>
                                 <ul>
                                     <li><strong>é‡é‡‡æ ·ï¼š</strong>SMOTEã€è¿‡é‡‡æ ·å°‘æ•°ç±»</li>
                                     <li><strong>æŸå¤±å‡½æ•°ï¼š</strong>Focal Lossã€åŠ æƒäº¤å‰ç†µ</li>
                                     <li><strong>è¯„ä¼°æŒ‡æ ‡ï¼š</strong>ä½¿ç”¨F1-scoreã€AUCè€Œéå‡†ç¡®ç‡</li>
                                     <li><strong>é˜ˆå€¼è°ƒæ•´ï¼š</strong>æ ¹æ®ä¸´åºŠéœ€æ±‚è°ƒæ•´åˆ†ç±»é˜ˆå€¼</li>
                                 </ul>
                                 
                                 <h6>3. æ¨¡å‹è§£é‡Šæ€§æå‡</h6>
                                 <ul>
                                     <li><strong>Grad-CAMï¼š</strong>å¯è§†åŒ–æ¨¡å‹å…³æ³¨åŒºåŸŸ</li>
                                     <li><strong>LIMEï¼š</strong>å±€éƒ¨å¯è§£é‡Šæ€§åˆ†æ</li>
                                     <li><strong>æ³¨æ„åŠ›æœºåˆ¶ï¼š</strong>æ˜¾ç¤ºæ¨¡å‹å†³ç­–ä¾æ®</li>
                                     <li><strong>ç‰¹å¾å¯è§†åŒ–ï¼š</strong>å±•ç¤ºå­¦åˆ°çš„ç—…ç†ç‰¹å¾</li>
                                 </ul>
                                 
                                 <h6>4. ä¸´åºŠå¯ç”¨æ€§è¯„ä¼°</h6>
                                 <ul>
                                     <li><strong>æ•æ„Ÿæ€§/ç‰¹å¼‚æ€§ï¼š</strong>å¹³è¡¡å‡é˜³æ€§å’Œå‡é˜´æ€§</li>
                                     <li><strong>åŒ»ç”Ÿå¯¹æ¯”ç ”ç©¶ï¼š</strong>ä¸æ”¾å°„ç§‘åŒ»ç”Ÿè¯Šæ–­å¯¹æ¯”</li>
                                     <li><strong>å¤šä¸­å¿ƒéªŒè¯ï¼š</strong>ä¸åŒåŒ»é™¢æ•°æ®éªŒè¯æ³›åŒ–æ€§</li>
                                     <li><strong>ä¸´åºŠå·¥ä½œæµé›†æˆï¼š</strong>è€ƒè™‘å®é™…ä½¿ç”¨åœºæ™¯</li>
                                 </ul>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
         
         <!-- æ•…éšœæ’é™¤æ ‡ç­¾é¡µ -->
         <div id="troubleshooting" class="tab-content">
             <div class="section">
                 <h2>ğŸ”§ è®­ç»ƒæ•…éšœæ’é™¤æŒ‡å—</h2>
                 <p>é‡åˆ°è®­ç»ƒé—®é¢˜ï¼Ÿè¿™é‡Œæä¾›å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</p>
                 
                 <div class="troubleshoot-category">
                     <h3>ğŸ’¾ æ•°æ®åŠ è½½é—®é¢˜</h3>
                     
                     <div class="problem-solution">
                         <h4>âŒ é—®é¢˜ï¼šDataLoaderå¤šè¿›ç¨‹æ­»é”</h4>
                         <div class="problem-desc">
                             <p><strong>ç—‡çŠ¶ï¼š</strong>ç¨‹åºåœ¨æ•°æ®åŠ è½½æ—¶å¡ä½ï¼Œæ— æ³•ç»§ç»­</p>
                             <div class="code-block error">
<pre><code class="python">DataLoader(dataset, batch_size=32, num_workers=4)  # åœ¨Windowsä¸Šå¯èƒ½å¡ä½</code></pre>
                             </div>
                         </div>
                         
                         <div class="solution">
                             <h5>âœ… è§£å†³æ–¹æ¡ˆ</h5>
                             <div class="code-block success">
<pre><code class="python"># Windowsç³»ç»Ÿè§£å†³æ–¹æ¡ˆ
if __name__ == '__main__':
    # è®¾ç½®num_workers=0æˆ–ä½¿ç”¨è¾ƒå°å€¼
    train_loader = DataLoader(train_dataset, batch_size=32, num_workers=0)
    
    # æˆ–è€…ä½¿ç”¨spawnå¯åŠ¨æ–¹æ³•
    import multiprocessing
    multiprocessing.set_start_method('spawn', force=True)</code></pre>
                             </div>
                             <p><strong>åŸå› ï¼š</strong>Windowsçš„å¤šè¿›ç¨‹æœºåˆ¶ä¸Unixä¸åŒï¼Œå®¹æ˜“å‡ºç°æ­»é”</p>
                         </div>
                     </div>
                     
                     <div class="problem-solution">
                         <h4>âŒ é—®é¢˜ï¼šæ•°æ®é›†è·¯å¾„é”™è¯¯</h4>
                         <div class="problem-desc">
                             <p><strong>ç—‡çŠ¶ï¼š</strong>FileNotFoundErroræˆ–æ•°æ®é›†ä¸ºç©º</p>
                             <div class="code-block error">
<pre><code class="python">FileNotFoundError: [Errno 2] No such file or directory: 'PetImages/Cat/0.jpg'</code></pre>
                             </div>
                         </div>
                         
                         <div class="solution">
                             <h5>âœ… è§£å†³æ–¹æ¡ˆ</h5>
                             <div class="code-block success">
<pre><code class="python">import os
from pathlib import Path

# ä½¿ç”¨ç»å¯¹è·¯å¾„
data_root = Path(__file__).parent / 'PetImages'
cat_dir = data_root / 'Cat'
dog_dir = data_root / 'Dog'

# æ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨
if not data_root.exists():
    raise FileNotFoundError(f"æ•°æ®é›†ç›®å½•ä¸å­˜åœ¨: {data_root}")
    
print(f"æ‰¾åˆ° {len(list(cat_dir.glob('*.jpg')))} å¼ çŒ«å›¾ç‰‡")
print(f"æ‰¾åˆ° {len(list(dog_dir.glob('*.jpg')))} å¼ ç‹—å›¾ç‰‡")</code></pre>
                             </div>
                         </div>
                     </div>
                 </div>
                 
                 <div class="troubleshoot-category">
                     <h3>ğŸš€ GPUå†…å­˜é—®é¢˜</h3>
                     
                     <div class="problem-solution">
                         <h4>âŒ é—®é¢˜ï¼šCUDA out of memory</h4>
                         <div class="problem-desc">
                             <p><strong>ç—‡çŠ¶ï¼š</strong>è®­ç»ƒæ—¶å‡ºç°GPUå†…å­˜ä¸è¶³é”™è¯¯</p>
                             <div class="code-block error">
<pre><code class="python">RuntimeError: CUDA out of memory. Tried to allocate 2.00 GiB</code></pre>
                             </div>
                         </div>
                         
                         <div class="solution">
                             <h5>âœ… è§£å†³æ–¹æ¡ˆ</h5>
                             <div class="code-block success">
<pre><code class="python"># 1. å‡å°æ‰¹æ¬¡å¤§å°
batch_size = 16  # ä»32å‡å°‘åˆ°16

# 2. ä½¿ç”¨æ¢¯åº¦ç´¯ç§¯
accumulation_steps = 4
for i, (inputs, labels) in enumerate(train_loader):
    outputs = model(inputs)
    loss = criterion(outputs, labels) / accumulation_steps
    loss.backward()
    
    if (i + 1) % accumulation_steps == 0:
        optimizer.step()
        optimizer.zero_grad()

# 3. æ¸…ç†GPUç¼“å­˜
import torch
torch.cuda.empty_cache()

# 4. ä½¿ç”¨æ··åˆç²¾åº¦è®­ç»ƒ
from torch.cuda.amp import autocast, GradScaler
scaler = GradScaler()

with autocast():
    outputs = model(inputs)
    loss = criterion(outputs, labels)</code></pre>
                             </div>
                         </div>
                     </div>
                 </div>
                 
                 <div class="troubleshoot-category">
                     <h3>ğŸ“ˆ è®­ç»ƒæ•ˆæœé—®é¢˜</h3>
                     
                     <div class="problem-solution">
                         <h4>âŒ é—®é¢˜ï¼šæŸå¤±ä¸ä¸‹é™æˆ–éœ‡è¡</h4>
                         <div class="problem-desc">
                             <p><strong>ç—‡çŠ¶ï¼š</strong>è®­ç»ƒæŸå¤±å±…é«˜ä¸ä¸‹æˆ–å‰§çƒˆéœ‡è¡</p>
                         </div>
                         
                         <div class="solution">
                             <h5>âœ… è§£å†³æ–¹æ¡ˆ</h5>
                             <div class="code-block success">
<pre><code class="python"># 1. è°ƒæ•´å­¦ä¹ ç‡
optimizer = torch.optim.Adam(model.parameters(), lr=0.0001)  # é™ä½å­¦ä¹ ç‡

# 2. ä½¿ç”¨å­¦ä¹ ç‡è°ƒåº¦å™¨
scheduler = torch.optim.lr_scheduler.ReduceLROnPlateau(
    optimizer, mode='min', factor=0.5, patience=5, verbose=True
)

# 3. æ¢¯åº¦è£å‰ª
torch.nn.utils.clip_grad_norm_(model.parameters(), max_norm=1.0)

# 4. æ£€æŸ¥æ•°æ®é¢„å¤„ç†
# ç¡®ä¿æ•°æ®å·²æ­£ç¡®å½’ä¸€åŒ–
transform = transforms.Compose([
    transforms.ToTensor(),
    transforms.Normalize(mean=[0.485, 0.456, 0.406], 
                        std=[0.229, 0.224, 0.225])  # ImageNetæ ‡å‡†åŒ–
])</code></pre>
                             </div>
                         </div>
                     </div>
                     
                     <div class="problem-solution">
                         <h4>âŒ é—®é¢˜ï¼šè¿‡æ‹Ÿåˆä¸¥é‡</h4>
                         <div class="problem-desc">
                             <p><strong>ç—‡çŠ¶ï¼š</strong>è®­ç»ƒå‡†ç¡®ç‡é«˜ä½†éªŒè¯å‡†ç¡®ç‡ä½</p>
                         </div>
                         
                         <div class="solution">
                             <h5>âœ… è§£å†³æ–¹æ¡ˆ</h5>
                             <div class="code-block success">
<pre><code class="python"># 1. å¢åŠ æ­£åˆ™åŒ–
class RegularizedCNN(nn.Module):
    def __init__(self):
        super().__init__()
        self.conv1 = nn.Conv2d(3, 32, 3, padding=1)
        self.bn1 = nn.BatchNorm2d(32)  # æ‰¹å½’ä¸€åŒ–
        self.dropout1 = nn.Dropout2d(0.25)  # 2D Dropout
        
        self.conv2 = nn.Conv2d(32, 64, 3, padding=1)
        self.bn2 = nn.BatchNorm2d(64)
        self.dropout2 = nn.Dropout2d(0.25)
        
        self.fc1 = nn.Linear(64 * 56 * 56, 512)
        self.dropout3 = nn.Dropout(0.5)  # å…¨è¿æ¥å±‚Dropout
        self.fc2 = nn.Linear(512, 2)

# 2. æ•°æ®å¢å¼º
train_transform = transforms.Compose([
    transforms.RandomHorizontalFlip(0.5),
    transforms.RandomRotation(10),
    transforms.ColorJitter(brightness=0.2, contrast=0.2),
    transforms.ToTensor(),
    transforms.Normalize(mean=[0.485, 0.456, 0.406], 
                        std=[0.229, 0.224, 0.225])
])

# 3. æ—©åœç­–ç•¥
class EarlyStopping:
    def __init__(self, patience=7, min_delta=0):
        self.patience = patience
        self.min_delta = min_delta
        self.counter = 0
        self.best_loss = float('inf')
    
    def __call__(self, val_loss):
        if val_loss < self.best_loss - self.min_delta:
            self.best_loss = val_loss
            self.counter = 0
        else:
            self.counter += 1
        return self.counter >= self.patience</code></pre>
                             </div>
                         </div>
                     </div>
                 </div>
                 
                 <div class="troubleshoot-category">
                     <h3>âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
                     
                     <div class="optimization-tips">
                         <h4>ğŸš€ è®­ç»ƒåŠ é€ŸæŠ€å·§</h4>
                         <div class="tips-grid">
                             <div class="tip-item">
                                 <h5>ğŸ“Š æ•°æ®åŠ è½½ä¼˜åŒ–</h5>
                                 <ul>
                                     <li>ä½¿ç”¨pin_memory=True</li>
                                     <li>é¢„åŠ è½½æ•°æ®åˆ°å†…å­˜</li>
                                     <li>ä½¿ç”¨æ›´å¿«çš„æ•°æ®æ ¼å¼ï¼ˆHDF5ï¼‰</li>
                                 </ul>
                             </div>
                             
                             <div class="tip-item">
                                 <h5>ğŸ§  æ¨¡å‹ä¼˜åŒ–</h5>
                                 <ul>
                                     <li>ä½¿ç”¨torch.compile()ï¼ˆPyTorch 2.0+ï¼‰</li>
                                     <li>å¯ç”¨cudnn.benchmark</li>
                                     <li>ä½¿ç”¨æ›´é«˜æ•ˆçš„æ¨¡å‹æ¶æ„</li>
                                 </ul>
                             </div>
                             
                             <div class="tip-item">
                                 <h5>ğŸ’¾ å†…å­˜ç®¡ç†</h5>
                                 <ul>
                                     <li>åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å˜é‡</li>
                                     <li>ä½¿ç”¨checkpointèŠ‚çœå†…å­˜</li>
                                     <li>ç›‘æ§GPUå†…å­˜ä½¿ç”¨</li>
                                 </ul>
                             </div>
                             
                             <div class="tip-item">
                                 <h5>ğŸ”§ è°ƒè¯•å·¥å…·</h5>
                                 <ul>
                                     <li>ä½¿ç”¨TensorBoardå¯è§†åŒ–</li>
                                     <li>æ·»åŠ è¯¦ç»†çš„æ—¥å¿—è®°å½•</li>
                                     <li>ä½¿ç”¨profileråˆ†ææ€§èƒ½</li>
                                 </ul>
                             </div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
         
         </div>
     </div>

     <script>
         // æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½
         function showTab(tabName) {
             // éšè—æ‰€æœ‰æ ‡ç­¾é¡µå†…å®¹
             const tabContents = document.querySelectorAll('.tab-content');
             tabContents.forEach(content => {
                 content.style.display = 'none';
             });
             
             // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeç±»
             const navTabs = document.querySelectorAll('.nav-tab');
             navTabs.forEach(tab => {
                 tab.classList.remove('active');
             });
             
             // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µå†…å®¹
             const selectedTab = document.getElementById(tabName);
             if (selectedTab) {
                 selectedTab.style.display = 'block';
             }
             
             // ä¸ºé€‰ä¸­çš„æ ‡ç­¾æ·»åŠ activeç±»
             const activeTab = document.querySelector(`[onclick="showTab('${tabName}')"]`);
             if (activeTab) {
                 activeTab.classList.add('active');
             }
         }
         
         // ç­”æ¡ˆæ˜¾ç¤º/éšè—åŠŸèƒ½
         function toggleAnswer(answerId) {
             const answerBox = document.getElementById(answerId);
             const button = document.querySelector(`[onclick="toggleAnswer('${answerId}')"]`);
             
             if (answerBox.style.display === 'none' || answerBox.style.display === '') {
                 answerBox.style.display = 'block';
                 button.textContent = 'ğŸ™ˆ éšè—ç­”æ¡ˆ';
                 button.style.backgroundColor = '#ff6b6b';
             } else {
                 answerBox.style.display = 'none';
                 button.textContent = 'ğŸ’¡ æŸ¥çœ‹ç­”æ¡ˆ';
                 button.style.backgroundColor = '#4ecdc4';
             }
         }
         
         // CNNå›¾åƒåˆ†ç±»äº¤äº’æ¼”ç¤º
         function runCatDogDemo() {
             // åˆ›å»ºæ¼”ç¤ºå¼¹çª—
             const modal = document.createElement('div');
             modal.style.cssText = `
                 position: fixed;
                 top: 0;
                 left: 0;
                 width: 100%;
                 height: 100%;
                 background: rgba(0,0,0,0.8);
                 display: flex;
                 justify-content: center;
                 align-items: center;
                 z-index: 10000;
             `;
             
             const content = document.createElement('div');
             content.style.cssText = `
                 background: white;
                 padding: 30px;
                 border-radius: 15px;
                 max-width: 700px;
                 max-height: 85vh;
                 overflow-y: auto;
                 box-shadow: 0 10px 30px rgba(0,0,0,0.3);
             `;
             
             content.innerHTML = `
                 <h2 style="color: #2c3e50; margin-bottom: 20px;">ğŸ® CNNæ‰‹å†™æ•°å­—è¯†åˆ«æ¼”ç¤º</h2>
                 
                 <div style="margin-bottom: 25px;">
                     <h3 style="color: #34495e;">ğŸ“¸ ä¸Šä¼ å›¾ç‰‡è¿›è¡Œè¯†åˆ«</h3>
                     <p style="color: #666; margin-bottom: 15px;">è¯·ä¸Šä¼ æ‰‹å†™æ•°å­—å›¾ç‰‡ï¼ˆ0-9ï¼‰ï¼Œæ”¯æŒJPGã€PNGæ ¼å¼</p>
                     
                     <div style="border: 2px dashed #ddd; padding: 20px; text-align: center; border-radius: 10px; margin-bottom: 15px;">
                         <input type="file" id="imageInput" accept="image/*" style="margin-bottom: 10px;">
                         <div id="imagePreview" style="margin: 15px 0;"></div>
                     </div>
                     
                     <div style="margin-bottom: 15px;">
                         <label style="display: block; margin-bottom: 5px; font-weight: bold;">é€‰æ‹©æ¨¡å‹ï¼š</label>
                         <select id="modelSelect" style="padding: 8px; border: 1px solid #ddd; border-radius: 5px; width: 200px;">
                             <option value="simple">ç®€å•CNNæ¨¡å‹</option>
                             <option value="deep">æ·±åº¦CNNæ¨¡å‹</option>
                         </select>
                     </div>
                     
                     <button id="predictBtn" onclick="classifyImage()" style="background: #27ae60; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 16px;" disabled>ğŸ” å¼€å§‹è¯†åˆ«</button>
                     
                     <div id="classificationResult" style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0; min-height: 60px; display: none;"></div>
                 </div>
                 
                 <div style="margin-bottom: 20px;">
                     <h3 style="color: #34495e;">ğŸ’¡ ä½¿ç”¨è¯´æ˜ï¼š</h3>
                     <ul style="color: #666; line-height: 1.6; margin-left: 20px;">
                         <li>ä¸Šä¼ æ¸…æ™°çš„æ‰‹å†™æ•°å­—å›¾ç‰‡ï¼ˆå»ºè®®28x28åƒç´ æˆ–æ›´å¤§ï¼‰</li>
                         <li>å›¾ç‰‡ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºç°åº¦å›¾å¹¶è°ƒæ•´å°ºå¯¸</li>
                         <li>é€‰æ‹©ä¸åŒçš„CNNæ¨¡å‹è¿›è¡Œå¯¹æ¯”æµ‹è¯•</li>
                         <li>æŸ¥çœ‹è¯¦ç»†çš„åˆ†ç±»ç»“æœå’Œç½®ä¿¡åº¦</li>
                     </ul>
                 </div>
                 
                 <div style="text-align: right;">
                     <button onclick="closeModal()" style="background: #95a5a6; color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer;">å…³é—­</button>
                 </div>
             `;
             
             modal.appendChild(content);
             document.body.appendChild(modal);
             
             // æ·»åŠ æ–‡ä»¶é€‰æ‹©ç›‘å¬
             const imageInput = document.getElementById('imageInput');
             const predictBtn = document.getElementById('predictBtn');
             const imagePreview = document.getElementById('imagePreview');
             
             imageInput.addEventListener('change', function(e) {
                 const file = e.target.files[0];
                 if (file) {
                     const reader = new FileReader();
                     reader.onload = function(e) {
                         imagePreview.innerHTML = `
                             <img src="${e.target.result}" style="max-width: 200px; max-height: 200px; border: 1px solid #ddd; border-radius: 5px;">
                             <p style="margin-top: 10px; color: #666;">å·²é€‰æ‹©: ${file.name}</p>
                         `;
                         predictBtn.disabled = false;
                         predictBtn.style.background = '#27ae60';
                     };
                     reader.readAsDataURL(file);
                 }
             });
             
             // æ·»åŠ å…³é—­åŠŸèƒ½
             window.closeModal = function() {
                 document.body.removeChild(modal);
             };
             
             // æ·»åŠ å›¾åƒåˆ†ç±»åŠŸèƒ½
             window.classifyImage = async function() {
                 const fileInput = document.getElementById('imageInput');
                 const modelSelect = document.getElementById('modelSelect');
                 const resultDiv = document.getElementById('classificationResult');
                 const predictBtn = document.getElementById('predictBtn');
                 
                 if (!fileInput.files[0]) {
                     alert('è¯·å…ˆé€‰æ‹©å›¾ç‰‡ï¼');
                     return;
                 }
                 
                 // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                 predictBtn.textContent = 'ğŸ”„ è¯†åˆ«ä¸­...';
                 predictBtn.disabled = true;
                 resultDiv.style.display = 'block';
                 resultDiv.innerHTML = '<p style="text-align: center;">ğŸ”„ æ­£åœ¨å¤„ç†å›¾ç‰‡ï¼Œè¯·ç¨å€™...</p>';
                 
                 try {
                     const formData = new FormData();
                     formData.append('image', fileInput.files[0]);
                     formData.append('model_type', modelSelect.value);
                     
                     const response = await fetch('http://localhost:5000/predict', {
                         method: 'POST',
                         body: formData
                     });
                     
                     const result = await response.json();
                     
                     if (result.success) {
                         // æ˜¾ç¤ºæˆåŠŸç»“æœ
                         let probsHtml = '';
                         const sortedProbs = Object.entries(result.all_probabilities)
                             .sort(([,a], [,b]) => b - a)
                             .slice(0, 5);
                         
                         sortedProbs.forEach(([digit, prob]) => {
                             const percentage = (prob * 100).toFixed(1);
                             const barWidth = Math.max(percentage, 5);
                             probsHtml += `
                                 <div style="margin: 5px 0; display: flex; align-items: center;">
                                     <span style="width: 30px; font-weight: bold;">${digit}:</span>
                                     <div style="flex: 1; background: #f0f0f0; border-radius: 10px; margin: 0 10px; height: 20px; position: relative;">
                                         <div style="background: ${digit === result.predicted_class ? '#27ae60' : '#3498db'}; height: 100%; width: ${barWidth}%; border-radius: 10px;"></div>
                                     </div>
                                     <span style="width: 50px; text-align: right;">${percentage}%</span>
                                 </div>
                             `;
                         });
                         
                         resultDiv.innerHTML = `
                             <h4 style="color: #27ae60; margin: 0 0 15px 0;">ğŸ“Š è¯†åˆ«ç»“æœ</h4>
                             <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                                 <p style="margin: 0; font-size: 18px;"><strong>é¢„æµ‹æ•°å­—ï¼š</strong><span style="font-size: 24px; color: #27ae60;">${result.predicted_class}</span></p>
                                 <p style="margin: 5px 0 0 0;"><strong>ç½®ä¿¡åº¦ï¼š</strong>${(result.confidence * 100).toFixed(1)}%</p>
                                 <p style="margin: 5px 0 0 0;"><strong>ä½¿ç”¨æ¨¡å‹ï¼š</strong>${result.model_name}</p>
                             </div>
                             <h5 style="color: #34495e; margin-bottom: 10px;">å„æ•°å­—æ¦‚ç‡åˆ†å¸ƒï¼š</h5>
                             <div style="font-size: 14px;">${probsHtml}</div>
                         `;
                     } else {
                         // æ˜¾ç¤ºé”™è¯¯ç»“æœ
                         resultDiv.innerHTML = `
                             <h4 style="color: #e74c3c; margin: 0 0 10px 0;">âŒ è¯†åˆ«å¤±è´¥</h4>
                             <p style="color: #666;">${result.error}</p>
                             <div style="background: #fff3cd; padding: 10px; border-radius: 5px; margin-top: 10px;">
                                 <small>ğŸ’¡ è¯·ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼ˆpython image_classification_server.pyï¼‰</small>
                             </div>
                         `;
                     }
                 } catch (error) {
                     // ç½‘ç»œé”™è¯¯æˆ–æœåŠ¡æœªå¯åŠ¨
                     resultDiv.innerHTML = `
                         <h4 style="color: #e74c3c; margin: 0 0 10px 0;">âŒ è¿æ¥å¤±è´¥</h4>
                         <p style="color: #666;">æ— æ³•è¿æ¥åˆ°åç«¯æœåŠ¡</p>
                         <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 10px;">
                             <p style="margin: 0 0 10px 0;"><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                             <ol style="margin: 0; padding-left: 20px;">
                                 <li>ç¡®ä¿å·²å®‰è£…ä¾èµ–ï¼špip install flask flask-cors torch torchvision pillow</li>
                                 <li>å¯åŠ¨åç«¯æœåŠ¡ï¼špython image_classification_server.py</li>
                                 <li>ç¡®ä¿æœåŠ¡è¿è¡Œåœ¨ http://localhost:5000</li>
                             </ol>
                         </div>
                     `;
                 } finally {
                     // æ¢å¤æŒ‰é’®çŠ¶æ€
                     predictBtn.textContent = 'ğŸ” å¼€å§‹è¯†åˆ«';
                     predictBtn.disabled = false;
                 }
             };
             
             // ç‚¹å‡»èƒŒæ™¯å…³é—­
             modal.addEventListener('click', function(e) {
                 if (e.target === modal) {
                     closeModal();
                 }
             });
         }
         
         // é¡µé¢åŠ è½½å®Œæˆåæ˜¾ç¤ºé»˜è®¤æ ‡ç­¾é¡µ
         document.addEventListener('DOMContentLoaded', function() {
             showTab('theory');
         });
         
         // ä»£ç å¤åˆ¶åŠŸèƒ½
         function copyCode(button) {
             const codeBlock = button.nextElementSibling;
             const code = codeBlock.textContent;
             
             navigator.clipboard.writeText(code).then(function() {
                 button.textContent = 'âœ… å·²å¤åˆ¶';
                 button.style.backgroundColor = '#51cf66';
                 
                 setTimeout(function() {
                     button.textContent = 'ğŸ“‹ å¤åˆ¶ä»£ç ';
                     button.style.backgroundColor = '#868e96';
                 }, 2000);
             }).catch(function(err) {
                 console.error('å¤åˆ¶å¤±è´¥: ', err);
                 alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©ä»£ç ');
             });
         }
         
         // æ·»åŠ ä»£ç å¤åˆ¶æŒ‰é’®
         document.addEventListener('DOMContentLoaded', function() {
             const codeBlocks = document.querySelectorAll('.code-block');
             codeBlocks.forEach(function(block, index) {
                 if (!block.classList.contains('error') && !block.classList.contains('success')) {
                     const copyButton = document.createElement('button');
                     copyButton.textContent = 'ğŸ“‹ å¤åˆ¶ä»£ç ';
                     copyButton.className = 'copy-btn';
                     copyButton.onclick = function() { copyCode(this); };
                     block.parentNode.insertBefore(copyButton, block);
                 }
             });
         });
         
         // å¹³æ»‘æ»šåŠ¨åˆ°é”šç‚¹
         function scrollToSection(sectionId) {
             const section = document.getElementById(sectionId);
             if (section) {
                 section.scrollIntoView({ behavior: 'smooth' });
             }
         }
         
         // æ·»åŠ è¿”å›é¡¶éƒ¨æŒ‰é’®
         window.addEventListener('scroll', function() {
             const backToTop = document.getElementById('backToTop');
             if (window.pageYOffset > 300) {
                 backToTop.style.display = 'block';
             } else {
                 backToTop.style.display = 'none';
             }
         });
         
         function scrollToTop() {
             window.scrollTo({ top: 0, behavior: 'smooth' });
         }
     </script>
     
     <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
     <button id="backToTop" onclick="scrollToTop()" style="display: none;">â¬†ï¸</button>
     
     <style>
         /* é¢å¤–çš„äº¤äº’æ ·å¼ */
         .copy-btn {
             position: absolute;
             top: 10px;
             right: 10px;
             background: #868e96;
             color: white;
             border: none;
             padding: 5px 10px;
             border-radius: 4px;
             cursor: pointer;
             font-size: 12px;
             z-index: 10;
         }
         
         .code-block {
             position: relative;
         }
         
         .copy-btn:hover {
             background: #495057;
         }
         
         #backToTop {
             position: fixed;
             bottom: 20px;
             right: 20px;
             background: #4ecdc4;
             color: white;
             border: none;
             padding: 15px;
             border-radius: 50%;
             cursor: pointer;
             font-size: 20px;
             box-shadow: 0 4px 12px rgba(0,0,0,0.15);
             z-index: 1000;
             transition: all 0.3s ease;
         }
         
         #backToTop:hover {
             background: #45b7aa;
             transform: translateY(-2px);
         }
         
         /* å®ä¾‹æ‹“å±•ç‰¹æ®Šæ ·å¼ */
         .interactive-section {
             background: #2c3e50;
             color: white;
             padding: 25px;
             border-radius: 15px;
             margin: 20px 0;
             box-shadow: 0 8px 25px rgba(0,0,0,0.15);
             border: 2px solid #34495e;
         }
         
         .interactive-section h4 {
             color: #fff;
             margin-bottom: 15px;
         }
         
         .dataset-info {
             background: rgba(255,255,255,0.1);
             padding: 15px;
             border-radius: 10px;
             margin-top: 15px;
         }
         
         .model-demo {
             display: grid;
             grid-template-columns: 1fr 1fr;
             gap: 20px;
             margin-top: 15px;
         }
         
         .model-architecture {
             background: rgba(255,255,255,0.1);
             padding: 15px;
             border-radius: 10px;
         }
         
         .architecture-viz {
             display: flex;
             flex-direction: column;
             align-items: center;
             gap: 10px;
         }
         
         .layer-box {
             padding: 10px 15px;
             border-radius: 8px;
             text-align: center;
             min-width: 150px;
             font-weight: bold;
         }
         
         .layer-box.pretrained {
             background: #ff6b6b;
             color: white;
         }
         
         .layer-box.custom {
             background: #4ecdc4;
             color: white;
         }
         
         .layer-box.output {
             background: #45b7aa;
             color: white;
         }
         
         .arrow {
             font-size: 20px;
             color: #fff;
         }
         
         .augmentation-demo {
             margin-top: 15px;
         }
         
         .augmentation-effects {
             background: rgba(255,255,255,0.1);
             padding: 15px;
             border-radius: 10px;
             margin-top: 15px;
         }
         
         .effect-grid {
             display: grid;
             grid-template-columns: repeat(2, 1fr);
             gap: 15px;
             margin-top: 10px;
         }
         
         .effect-item {
             background: rgba(255,255,255,0.1);
             padding: 10px;
             border-radius: 8px;
             text-align: center;
         }
         
         .performance-comparison {
             background: #f8f9fa;
             padding: 15px;
             border-radius: 10px;
             margin-top: 15px;
             border: 1px solid #dee2e6;
         }
         
         .performance-comparison table {
             width: 100%;
             border-collapse: collapse;
             margin-top: 10px;
         }
         
         .performance-comparison th,
         .performance-comparison td {
             padding: 8px 12px;
             text-align: center;
             border: 1px solid #dee2e6;
             color: #495057;
         }
         
         .performance-comparison th {
             background: #e9ecef;
             font-weight: bold;
             color: #343a40;
         }
         
         .performance-comparison tr.highlight {
             background: #fff3cd;
             font-weight: bold;
             color: #856404;
         }
         
         .interactive-btn {
             background: #2c3e50;
             color: white;
             border: none;
             padding: 12px 25px;
             border-radius: 25px;
             cursor: pointer;
             font-size: 16px;
             font-weight: bold;
             margin: 0 10px;
             transition: all 0.3s ease;
             text-decoration: none;
             display: inline-block;
             border: 2px solid #34495e;
         }
         
         .interactive-btn:hover {
             transform: translateY(-2px);
             background: #34495e;
             box-shadow: 0 8px 25px rgba(0,0,0,0.2);
         }
         
         /* æ€è€ƒé¢˜æ ·å¼ */
         .thinking-question {
             margin: 30px 0;
         }
         
         .question-box {
             background: #f8f9fa;
             border-left: 5px solid #4ecdc4;
             padding: 20px;
             border-radius: 0 10px 10px 0;
             margin: 15px 0;
         }
         
         .answer-btn {
             background: #4ecdc4;
             color: white;
             border: none;
             padding: 10px 20px;
             border-radius: 20px;
             cursor: pointer;
             margin: 15px 0;
             transition: all 0.3s ease;
         }
         
         .answer-btn:hover {
             background: #45b7aa;
             transform: translateY(-1px);
         }
         
         .answer-box {
             background: #e8f5e8;
             border: 1px solid #51cf66;
             padding: 20px;
             border-radius: 10px;
             margin-top: 15px;
         }
         
         .experiment-plan h6 {
             color: #495057;
             margin: 15px 0 5px 0;
         }
         
         .error-code {
             background: #f8d7da !important;
             border-left: 5px solid #dc3545 !important;
             color: #721c24 !important;
         }
         
         .error-analysis {
             margin-top: 15px;
         }
         
         .error-item {
             background: #fff;
             border: 1px solid #dee2e6;
             padding: 15px;
             border-radius: 8px;
             margin: 15px 0;
         }
         
         .error-item h6 {
             color: #dc3545;
             margin-bottom: 10px;
         }
         
         .medical-solution h6 {
             color: #0056b3;
             margin: 15px 0 8px 0;
         }
         
         /* æ•…éšœæ’é™¤æ ·å¼ */
         .troubleshoot-category {
             margin: 30px 0;
         }
         
         .problem-solution {
             background: #fff;
             border: 1px solid #dee2e6;
             border-radius: 10px;
             margin: 20px 0;
             overflow: hidden;
         }
         
         .problem-solution h4 {
             background: #ff6b6b;
             color: white;
             padding: 15px 20px;
             margin: 0;
         }
         
         .problem-desc {
             padding: 15px 20px;
             background: #f8f9fa;
         }
         
         .solution {
             padding: 15px 20px;
         }
         
         .solution h5 {
             color: #28a745;
             margin-bottom: 15px;
         }
         
         .code-block.error {
             background: #f8d7da;
             border-left: 5px solid #dc3545;
             color: #721c24;
         }
         
         .code-block.success {
             background: #d4edda;
             border-left: 5px solid #28a745;
             color: #155724;
         }
         
         .optimization-tips {
             margin-top: 20px;
         }
         
         .tips-grid {
             display: grid;
             grid-template-columns: repeat(2, 1fr);
             gap: 20px;
             margin-top: 15px;
         }
         
         .tip-item {
             background: #f8f9fa;
             padding: 20px;
             border-radius: 10px;
             border-left: 5px solid #4ecdc4;
         }
         
         .tip-item h5 {
             color: #495057;
             margin-bottom: 10px;
         }
         
         .tip-item ul {
             margin: 0;
             padding-left: 20px;
         }
         
         .tip-item li {
             margin: 5px 0;
             color: #6c757d;
         }
         
         /* æ¶æ„å›¾æ ·å¼ */
         .architecture-diagram {
             background: #f8f9fa;
             border: 1px solid #dee2e6;
             border-radius: 10px;
             padding: 20px;
             margin: 20px 0;
         }
         
         .architecture-diagram h4 {
             color: #495057;
             text-align: center;
             margin-bottom: 20px;
         }
         
         .network-diagram {
             display: flex;
             justify-content: center;
             align-items: center;
         }
         
         .layer-flow {
             display: flex;
             flex-direction: row;
             align-items: center;
             gap: 10px;
             flex-wrap: wrap;
             justify-content: center;
         }
         
         .layer-box {
             background: #2c3e50;
             color: white;
             padding: 10px 15px;
             border-radius: 8px;
             text-align: center;
             font-size: 12px;
             font-weight: bold;
             min-width: 120px;
             box-shadow: 0 2px 10px rgba(0,0,0,0.1);
             transition: all 0.3s ease;
             border: 2px solid #34495e;
         }
         
         .layer-box:hover {
             transform: translateY(-2px);
             box-shadow: 0 4px 15px rgba(0,0,0,0.2);
         }
         
         .layer-box.input {
             background: #3498db;
             color: white;
             border-color: #2980b9;
         }
         
         .layer-box.conv {
             background: #27ae60;
             color: white;
             border-color: #229954;
         }
         
         .layer-box.activation {
             background: #e74c3c;
             color: white;
             border-color: #c0392b;
         }
         
         .layer-box.pool {
             background: #f39c12;
             color: white;
             border-color: #d68910;
         }
         
         .layer-box.feature {
             background: #9b59b6;
             color: white;
             border-color: #8e44ad;
         }
         
         .layer-box.flatten {
             background: #e67e22;
             color: white;
             border-color: #d35400;
         }
         
         .layer-box.fc {
             background: #2c3e50;
             color: white;
             border-color: #34495e;
         }
         
         .layer-box.dropout {
             background: #95a5a6;
             color: white;
             border-color: #7f8c8d;
         }
         
         .layer-box.output {
             background: #16a085;
             color: white;
             border-color: #138d75;
         }
         
         .arrow {
             font-size: 20px;
             color: #6c757d;
             font-weight: bold;
         }
         
         .layer-flow .arrow {
             transform: rotate(90deg);
         }
         
         /* å“åº”å¼è®¾è®¡ */
         @media (max-width: 768px) {
             .model-demo {
                 grid-template-columns: 1fr;
             }
             
             .layer-box {
                 min-width: 100px;
                 font-size: 11px;
                 padding: 8px 12px;
             }
             
             .effect-grid {
                 grid-template-columns: 1fr;
             }
             
             .tips-grid {
                 grid-template-columns: 1fr;
             }
             
             .nav-tabs {
                 flex-wrap: wrap;
             }
             
             .nav-tab {
                 font-size: 12px;
                 padding: 8px 12px;
             }
         }
     </style>
        </div>