<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A*ç®—æ³•äº¤äº’å¼æ•™å­¦å¹³å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 10px 10px 0 0;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            border-right: 1px solid #dee2e6;
        }

        .nav-tab:last-child {
            border-right: none;
        }

        .nav-tab.active {
            background: white;
            color: #667eea;
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .content {
            background: white;
            border-radius: 0 0 10px 10px;
            padding: 30px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            min-height: 600px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            margin-bottom: 30px;
        }

        .section h2 {
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .section h3 {
            color: #764ba2;
            margin: 20px 0 10px 0;
        }

        .formula {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
        }

        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        .demo-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .puzzle-grid {
            display: grid;
            grid-template-columns: repeat(3, 80px);
            grid-template-rows: repeat(3, 80px);
            gap: 2px;
            margin: 20px auto;
            justify-content: center;
        }

        .puzzle-cell {
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .puzzle-cell.empty {
            background: #f8f9fa;
            border: 2px dashed #ccc;
        }

        .puzzle-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .maze-grid {
            display: grid;
            gap: 1px;
            margin: 20px auto;
            justify-content: center;
            background: #333;
        }

        .maze-cell {
            width: 30px;
            height: 30px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .maze-cell.wall {
            background: #333;
        }

        .maze-cell.path {
            background: #fff;
        }

        .maze-cell.start {
            background: #28a745;
        }

        .maze-cell.goal {
            background: #dc3545;
        }

        .maze-cell.solution {
            background: #ffc107;
        }

        .controls {
            text-align: center;
            margin: 20px 0;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .info-box {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .code-block pre {
            margin: 0;
            padding: 0;
            background: transparent;
            border: none;
            font-size: 14px;
            line-height: 1.5;
        }

        .code-block code {
            background: transparent;
            color: inherit;
            padding: 0;
            border-radius: 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        }

        /* Pythonè¯­æ³•é«˜äº® */
        .language-python .keyword {
            color: #ff7979;
        }

        .language-python .string {
            color: #6c5ce7;
        }

        .language-python .comment {
            color: #74b9ff;
            font-style: italic;
        }

        .language-python .function {
            color: #00b894;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .step.active {
            background: #667eea;
            color: white;
            transform: scale(1.2);
        }

        .step.completed {
            background: #28a745;
            color: white;
        }

        .algorithm-steps {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .algorithm-steps ol {
            padding-left: 20px;
        }

        .algorithm-steps li {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #667eea;
        }

        .performance-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .performance-table th,
        .performance-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #dee2e6;
        }

        .performance-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .performance-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .quiz-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .quiz-question {
            font-weight: bold;
            margin-bottom: 15px;
            color: #667eea;
        }

        .quiz-options {
            list-style: none;
        }

        .quiz-options li {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-options li:hover {
            background: #e9ecef;
        }

        .quiz-options li.correct {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }

        .quiz-options li.incorrect {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }

        @media (max-width: 768px) {
            .demo-container {
                grid-template-columns: 1fr;
            }
            
            .puzzle-grid {
                grid-template-columns: repeat(3, 60px);
                grid-template-rows: repeat(3, 60px);
            }
            
            .maze-cell {
                width: 25px;
                height: 25px;
            }
        }
    </style>
</head>
<body>
    <!-- è¿”å›ä¸»é¡µæŒ‰é’® -->
    <div style="
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
    ">
        <a href="../index.html" style="
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: rgba(255,255,255,0.9);
            color: #667eea;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        " onmouseover="this.style.background='white'; this.style.transform='scale(1.05)'" onmouseout="this.style.background='rgba(255,255,255,0.9)'; this.style.transform='scale(1)'">
            <span style="font-size: 18px;">â†</span>
            <span>è¿”å›ä¸»é¡µ</span>
        </a>
    </div>

    <div class="container">
        <div class="header">
            <h1>ğŸŒŸ A*ç®—æ³•äº¤äº’å¼æ•™å­¦å¹³å°</h1>
            <p>æ¢ç´¢äººå·¥æ™ºèƒ½ä¸­çš„ç»å…¸è·¯å¾„æœç´¢ç®—æ³•</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('theory')">ğŸ“š ç®—æ³•åŸç†</button>
            <button class="nav-tab" onclick="showTab('puzzle')">ğŸ§© å…«æ•°ç æ¼”ç¤º</button>
            <button class="nav-tab" onclick="showTab('maze')">ğŸ° è¿·å®«æ±‚è§£</button>
            <button class="nav-tab" onclick="showTab('code')">ğŸ’» ä»£ç å®ç°</button>
            <button class="nav-tab" onclick="showTab('quiz')">ğŸ¯ äº’åŠ¨æµ‹è¯•</button>
        </div>

        <div class="content">
            <!-- ç®—æ³•åŸç†æ ‡ç­¾é¡µ -->
            <div id="theory" class="tab-content active">
                <div class="section">
                    <h2>ğŸ¯ A*ç®—æ³•æ ¸å¿ƒæ¦‚å¿µ</h2>
                    <p>A*ç®—æ³•æ˜¯ä¸€ç§<span class="highlight">å¯å‘å¼æœç´¢ç®—æ³•</span>ï¼Œå®ƒå·§å¦™åœ°ç»“åˆäº†Dijkstraç®—æ³•çš„å®Œå¤‡æ€§å’Œè´ªå©ªæœç´¢çš„é«˜æ•ˆæ€§ã€‚</p>
                    
                    <div class="info-box">
                        <h3>ğŸ’¡ æ ¸å¿ƒæ€æƒ³</h3>
                        <p>é€šè¿‡<strong>è¯„ä¼°å‡½æ•°</strong>å¼•å¯¼æœç´¢æ–¹å‘ï¼Œä¼˜å…ˆæ¢ç´¢æœ€æœ‰å¸Œæœ›çš„è·¯å¾„ï¼Œä»è€Œåœ¨å¤æ‚çŠ¶æ€ç©ºé—´ä¸­é«˜æ•ˆæ‰¾åˆ°æœ€ä¼˜è§£ã€‚</p>
                    </div>

                    <h3>ğŸ“Š è¯„ä¼°å‡½æ•°</h3>
                    <div class="formula">
                        f(n) = g(n) + h(n)
                        <br><br>
                        â€¢ g(n): ä»èµ·ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„å®é™…ä»£ä»·<br>
                        â€¢ h(n): ä»å½“å‰èŠ‚ç‚¹åˆ°ç›®æ ‡çš„ä¼°è®¡ä»£ä»·ï¼ˆå¯å‘å‡½æ•°ï¼‰<br>
                        â€¢ f(n): èŠ‚ç‚¹çš„ç»¼åˆè¯„ä¼°ä»£ä»·
                    </div>

                    <h3>ğŸ”„ ç®—æ³•æµç¨‹</h3>
                    <div class="algorithm-steps">
                        <ol>
                            <li><strong>åˆå§‹åŒ–ï¼š</strong>å°†èµ·ç‚¹åŠ å…¥å¼€æ”¾åˆ—è¡¨ï¼Œè®¾ç½®g(n)=0</li>
                            <li><strong>é€‰æ‹©èŠ‚ç‚¹ï¼š</strong>ä»å¼€æ”¾åˆ—è¡¨ä¸­é€‰æ‹©f(n)æœ€å°çš„èŠ‚ç‚¹</li>
                            <li><strong>ç›®æ ‡æ£€æµ‹ï¼š</strong>å¦‚æœæ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œå›æº¯è·¯å¾„å¹¶ç»“æŸ</li>
                            <li><strong>æ‰©å±•é‚»å±…ï¼š</strong>ç”Ÿæˆæ‰€æœ‰å¯è¾¾çš„é‚»æ¥èŠ‚ç‚¹</li>
                            <li><strong>æ›´æ–°ä»£ä»·ï¼š</strong>è®¡ç®—é‚»å±…èŠ‚ç‚¹çš„gã€hã€få€¼</li>
                            <li><strong>é‡å¤æœç´¢ï¼š</strong>é‡å¤æ­¥éª¤2-5ç›´åˆ°æ‰¾åˆ°è§£æˆ–æ— è§£</li>
                        </ol>
                    </div>

                    <h3>ğŸ¯ å¯å‘å‡½æ•°ç±»å‹</h3>
                    <table class="performance-table">
                        <thead>
                            <tr>
                                <th>å¯å‘å‡½æ•°</th>
                                <th>å…¬å¼</th>
                                <th>é€‚ç”¨åœºæ™¯</th>
                                <th>ç‰¹ç‚¹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>æ›¼å“ˆé¡¿è·ç¦»</td>
                                <td>|xâ‚-xâ‚‚| + |yâ‚-yâ‚‚|</td>
                                <td>ç½‘æ ¼åœ°å›¾</td>
                                <td>è®¡ç®—ç®€å•ï¼Œå¯é‡‡çº³</td>
                            </tr>
                            <tr>
                                <td>æ¬§å‡ é‡Œå¾—è·ç¦»</td>
                                <td>âˆš[(xâ‚-xâ‚‚)Â² + (yâ‚-yâ‚‚)Â²]</td>
                                <td>è¿ç»­ç©ºé—´</td>
                                <td>æ›´ç²¾ç¡®ä½†è®¡ç®—å¤æ‚</td>
                            </tr>
                            <tr>
                                <td>å¯¹è§’çº¿è·ç¦»</td>
                                <td>max(|xâ‚-xâ‚‚|, |yâ‚-yâ‚‚|)</td>
                                <td>8æ–¹å‘ç§»åŠ¨</td>
                                <td>å¹³è¡¡ç²¾åº¦ä¸æ•ˆç‡</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- å…«æ•°ç æ¼”ç¤ºæ ‡ç­¾é¡µ -->
            <div id="puzzle" class="tab-content">
                <div class="section">
                    <h2>ğŸ§© å…«æ•°ç é—®é¢˜äº¤äº’æ¼”ç¤º</h2>
                    <p>å…«æ•°ç é—®é¢˜æ˜¯A*ç®—æ³•çš„ç»å…¸åº”ç”¨æ¡ˆä¾‹ã€‚é€šè¿‡æ»‘åŠ¨æ•°å­—å—ï¼Œå°†åˆå§‹çŠ¶æ€è½¬æ¢ä¸ºç›®æ ‡çŠ¶æ€ã€‚</p>
                    
                    <div class="demo-container">
                        <div>
                            <h3>ğŸ¯ åˆå§‹çŠ¶æ€</h3>
                            <div id="initialPuzzle" class="puzzle-grid"></div>
                            <div class="controls">
                                <button class="btn" onclick="shufflePuzzle()">ğŸ”€ éšæœºæ‰“ä¹±</button>
                                <button class="btn" onclick="resetPuzzle()">ğŸ”„ é‡ç½®</button>
                            </div>
                        </div>
                        <div>
                            <h3>ğŸ† ç›®æ ‡çŠ¶æ€</h3>
                            <div id="goalPuzzle" class="puzzle-grid"></div>
                            <div class="controls">
                                <button class="btn" onclick="solvePuzzle()">ğŸš€ A*æ±‚è§£</button>
                                <button class="btn" onclick="showSolution()">ğŸ‘ï¸ æ˜¾ç¤ºè§£æ³•</button>
                            </div>
                        </div>
                    </div>

                    <div id="solutionSteps" class="info-box" style="display: none;">
                        <h3>ğŸ“‹ æ±‚è§£æ­¥éª¤</h3>
                        <div id="stepsList"></div>
                        <div class="step-indicator" id="stepIndicator"></div>
                        <div class="controls">
                            <button class="btn" onclick="prevStep()">â¬…ï¸ ä¸Šä¸€æ­¥</button>
                            <button class="btn" onclick="nextStep()">â¡ï¸ ä¸‹ä¸€æ­¥</button>
                            <button class="btn" onclick="autoPlay()">â–¶ï¸ è‡ªåŠ¨æ’­æ”¾</button>
                        </div>
                    </div>

                    <div class="info-box">
                        <h3>ğŸ” ç®—æ³•åˆ†æ</h3>
                        <div id="puzzleAnalysis">
                            <p><strong>å¯å‘å‡½æ•°ï¼š</strong>æ›¼å“ˆé¡¿è·ç¦»</p>
                            <p><strong>æœç´¢çŠ¶æ€ï¼š</strong>ç­‰å¾…æ±‚è§£...</p>
                            <p><strong>æœ€ä¼˜æ­¥æ•°ï¼š</strong>--</p>
                            <p><strong>æ‰©å±•èŠ‚ç‚¹ï¼š</strong>--</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è¿·å®«æ±‚è§£æ ‡ç­¾é¡µ -->
            <div id="maze" class="tab-content">
                <div class="section">
                    <h2>ğŸ° è¿·å®«è·¯å¾„è§„åˆ’æ¼”ç¤º</h2>
                    <p>åœ¨è¿·å®«ä¸­å¯»æ‰¾ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„ï¼Œä½“éªŒA*ç®—æ³•åœ¨è·¯å¾„è§„åˆ’ä¸­çš„åº”ç”¨ã€‚</p>
                    
                    <div class="controls">
                        <button class="btn" onclick="generateMaze()">ğŸ² ç”Ÿæˆè¿·å®«</button>
                        <button class="btn" onclick="clearMaze()">ğŸ§¹ æ¸…ç©ºè¿·å®«</button>
                        <button class="btn" onclick="setMazeMode('wall')">ğŸ§± ç»˜åˆ¶å¢™å£</button>
                        <button class="btn" onclick="setMazeMode('start')">ğŸŸ¢ è®¾ç½®èµ·ç‚¹</button>
                        <button class="btn" onclick="setMazeMode('goal')">ğŸ”´ è®¾ç½®ç»ˆç‚¹</button>
                        <button class="btn" onclick="solveMaze()">ğŸš€ A*å¯»è·¯</button>
                    </div>

                    <div id="mazeContainer">
                        <div id="mazeGrid" class="maze-grid"></div>
                    </div>

                    <div class="info-box">
                        <h3>ğŸ® æ“ä½œè¯´æ˜</h3>
                        <ul>
                            <li><strong>ğŸ§± ç»˜åˆ¶å¢™å£ï¼š</strong>ç‚¹å‡»ç©ºç™½åŒºåŸŸåˆ›å»ºéšœç¢ç‰©</li>
                            <li><strong>ğŸŸ¢ è®¾ç½®èµ·ç‚¹ï¼š</strong>ç‚¹å‡»é€‰æ‹©æœç´¢èµ·å§‹ä½ç½®</li>
                            <li><strong>ğŸ”´ è®¾ç½®ç»ˆç‚¹ï¼š</strong>ç‚¹å‡»é€‰æ‹©ç›®æ ‡ä½ç½®</li>
                            <li><strong>ğŸš€ A*å¯»è·¯ï¼š</strong>è‡ªåŠ¨è®¡ç®—æœ€ä¼˜è·¯å¾„</li>
                        </ul>
                    </div>

                    <div id="mazeAnalysis" class="info-box">
                        <h3>ğŸ“Š è·¯å¾„åˆ†æ</h3>
                        <div id="mazeStats">
                            <p><strong>è·¯å¾„é•¿åº¦ï¼š</strong>--</p>
                            <p><strong>æœç´¢æ—¶é—´ï¼š</strong>--</p>
                            <p><strong>è®¿é—®èŠ‚ç‚¹ï¼š</strong>--</p>
                            <p><strong>å¯å‘å‡½æ•°ï¼š</strong>æ›¼å“ˆé¡¿è·ç¦»</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä»£ç å®ç°æ ‡ç­¾é¡µ -->
            <div id="code" class="tab-content">
                <div class="section">
                    <h2>ğŸ’» Pythonä»£ç å®ç°</h2>
                    
                    <h3>ğŸ—ï¸ èŠ‚ç‚¹ç±»å®šä¹‰</h3>
                    <div class="code-block">
<pre><code class="language-python">class AStarNode:
    def __init__(self, state, parent=None, g=0, h=0):
        self.state = state      # å½“å‰çŠ¶æ€
        self.parent = parent    # çˆ¶èŠ‚ç‚¹
        self.g = g             # å®é™…ä»£ä»·
        self.h = h             # å¯å‘å‡½æ•°å€¼
        self.f = g + h         # è¯„ä¼°å‡½æ•°å€¼
    
    def __lt__(self, other):
        return self.f < other.f</code></pre>
                    </div>

                    <h3>ğŸ§® å¯å‘å‡½æ•°å®ç°</h3>
                    <div class="code-block">
<pre><code class="language-python">def manhattan_distance(state, goal):
    """è®¡ç®—æ›¼å“ˆé¡¿è·ç¦»"""
    distance = 0
    for i in range(9):
        if state[i] != 0 and state[i] != goal[i]:
            goal_pos = goal.index(state[i])
            current_row, current_col = i // 3, i % 3
            goal_row, goal_col = goal_pos // 3, goal_pos % 3
            distance += abs(current_row - goal_row) + abs(current_col - goal_col)
    return distance

def hamming_distance(state, goal):
    """è®¡ç®—é”™ä½æ£‹å­æ•°"""
    return sum(s != g and s != 0 for s, g in zip(state, goal))</code></pre>
                    </div>

                    <h3>ğŸ” A*ç®—æ³•æ ¸å¿ƒ</h3>
                    <div class="code-block">
<pre><code class="language-python">def a_star_search(initial_state, goal_state):
    import heapq
    
    # åˆå§‹åŒ–å¼€æ”¾åˆ—è¡¨å’Œå…³é—­é›†åˆ
    open_heap = []
    closed_set = set()
    
    # åˆ›å»ºèµ·å§‹èŠ‚ç‚¹
    start_node = AStarNode(initial_state, g=0, 
                          h=manhattan_distance(initial_state, goal_state))
    heapq.heappush(open_heap, start_node)
    
    while open_heap:
        # é€‰æ‹©få€¼æœ€å°çš„èŠ‚ç‚¹
        current = heapq.heappop(open_heap)
        
        # æ£€æŸ¥æ˜¯å¦åˆ°è¾¾ç›®æ ‡
        if current.state == goal_state:
            return reconstruct_path(current)
        
        closed_set.add(current.state)
        
        # æ‰©å±•é‚»å±…èŠ‚ç‚¹
        for neighbor in get_neighbors(current):
            if neighbor.state in closed_set:
                continue
                
            neighbor.h = manhattan_distance(neighbor.state, goal_state)
            neighbor.f = neighbor.g + neighbor.h
            
            heapq.heappush(open_heap, neighbor)
    
    return None  # æ— è§£

def get_neighbors(node):
    """ç”Ÿæˆå½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å¯èƒ½é‚»æ¥èŠ‚ç‚¹"""
    neighbors = []
    state = node.state
    blank_pos = state.index(0)
    row, col = blank_pos // 3, blank_pos % 3
    
    # ç©ºæ ¼ç§»åŠ¨æ–¹å‘ï¼šä¸Šã€ä¸‹ã€å·¦ã€å³
    directions = [(-1, 0), (1, 0), (0, -1), (0, 1)]
    
    for dr, dc in directions:
        new_row, new_col = row + dr, col + dc
        if 0 <= new_row < 3 and 0 <= new_col < 3:
            # è®¡ç®—æ–°ä½ç½®ç´¢å¼•
            new_blank_pos = new_row * 3 + new_col
            # äº¤æ¢ç©ºæ ¼ä¸ç›¸é‚»æ•°å­—
            state_list = list(state)
            state_list[blank_pos], state_list[new_blank_pos] = \
                state_list[new_blank_pos], state_list[blank_pos]
            new_state = tuple(state_list)
            # åˆ›å»ºæ–°èŠ‚ç‚¹ï¼ˆgå€¼+1ï¼‰
            new_node = AStarNode(new_state, parent=node, g=node.g + 1)
            neighbors.append(new_node)
    
    return neighbors

def reconstruct_path(node):
    """å›æº¯è·¯å¾„"""
    path = []
    while node:
        path.append(node)
        node = node.parent
    return path[::-1]  # åè½¬è·¯å¾„ï¼Œä»èµ·ç‚¹åˆ°ç›®æ ‡</code></pre>
                    </div>

                    <h3>ğŸ® å®Œæ•´ç¤ºä¾‹ä»£ç </h3>
                    <div class="code-block">
<pre><code class="language-python"># å…«æ•°ç é—®é¢˜å®Œæ•´æ±‚è§£ç¤ºä¾‹
def solve_puzzle(initial_state, goal_state, heuristic=manhattan_distance):
    """æ±‚è§£å…«æ•°ç é—®é¢˜å¹¶è¾“å‡ºç»“æœ"""
    print("åˆå§‹çŠ¶æ€ï¼š")
    print_state(initial_state)
    print("ç›®æ ‡çŠ¶æ€ï¼š")
    print_state(goal_state)
    
    path = a_star_search(initial_state, goal_state)
    
    if not path:
        print("è¯¥é—®é¢˜æ— è§£ï¼")
        return
    
    print(f"æ‰¾åˆ°æœ€ä¼˜è§£ï¼Œå…±{len(path)-1}æ­¥ï¼š")
    for i, node in enumerate(path):
        print(f"ç¬¬{i}æ­¥ï¼š")
        print_state(node.state)

def print_state(state):
    """æ‰“å°3x3æ£‹ç›˜çŠ¶æ€"""
    for i in range(3):
        row = []
        for j in range(3):
            num = state[i*3 + j]
            row.append(str(num) if num != 0 else " ")
        print(" ".join(row))
    print()

# æµ‹è¯•ç¤ºä¾‹
if __name__ == "__main__":
    # å®šä¹‰åˆå§‹çŠ¶æ€å’Œç›®æ ‡çŠ¶æ€
    initial = (2, 8, 3, 1, 0, 4, 7, 6, 5)
    goal = (1, 2, 3, 8, 0, 4, 7, 6, 5)
    
    # ä½¿ç”¨æ›¼å“ˆé¡¿è·ç¦»æ±‚è§£
    solve_puzzle(initial, goal, heuristic=manhattan_distance)
    
    # æ€§èƒ½æµ‹è¯•
    import time
    start_time = time.time()
    path = a_star_search(initial, goal)
    end_time = time.time()
    
    print(f"ç®—æ³•æ€§èƒ½ç»Ÿè®¡ï¼š")
    print(f"æ±‚è§£æ—¶é—´: {(end_time - start_time)*1000:.2f} ms")
    print(f"æœ€ä¼˜æ­¥æ•°: {len(path)-1}")
    print(f"è·¯å¾„é•¿åº¦: {len(path)}")</code></pre>
                    </div>

                    <h3>ğŸ“ˆ æ€§èƒ½å¯¹æ¯”åˆ†æ</h3>
                    <table class="performance-table">
                        <thead>
                            <tr>
                                <th>ç®—æ³•</th>
                                <th>æ‰©å±•èŠ‚ç‚¹æ•°</th>
                                <th>ç”ŸæˆèŠ‚ç‚¹æ•°</th>
                                <th>è¿è¡Œæ—¶é—´(ms)</th>
                                <th>æœ€ä¼˜æ€§</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>A*(æ›¼å“ˆé¡¿è·ç¦»)</td>
                                <td>47</td>
                                <td>76</td>
                                <td>3.2</td>
                                <td>âœ… æœ€ä¼˜</td>
                            </tr>
                            <tr>
                                <td>A*(é”™ä½æ£‹å­æ•°)</td>
                                <td>126</td>
                                <td>203</td>
                                <td>8.7</td>
                                <td>âœ… æœ€ä¼˜</td>
                            </tr>
                            <tr>
                                <td>å¹¿åº¦ä¼˜å…ˆæœç´¢</td>
                                <td>6156</td>
                                <td>9876</td>
                                <td>421.5</td>
                                <td>âœ… æœ€ä¼˜</td>
                            </tr>
                            <tr>
                                <td>è´ªå©ªæœç´¢</td>
                                <td>23</td>
                                <td>34</td>
                                <td>1.8</td>
                                <td>âŒ éæœ€ä¼˜</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- äº’åŠ¨æµ‹è¯•æ ‡ç­¾é¡µ -->
            <div id="quiz" class="tab-content">
                <div class="section">
                    <h2>ğŸ¯ A*ç®—æ³•çŸ¥è¯†æµ‹è¯•</h2>
                    
                    <div class="quiz-container">
                        <div class="quiz-question">1. A*ç®—æ³•çš„è¯„ä¼°å‡½æ•°f(n) = g(n) + h(n)ä¸­ï¼Œh(n)ä»£è¡¨ä»€ä¹ˆï¼Ÿ</div>
                        <ul class="quiz-options" data-answer="2">
                            <li onclick="selectAnswer(this, 0)">A. ä»èµ·ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„å®é™…ä»£ä»·</li>
                            <li onclick="selectAnswer(this, 1)">B. ä»å½“å‰èŠ‚ç‚¹åˆ°èµ·ç‚¹çš„ä¼°è®¡ä»£ä»·</li>
                            <li onclick="selectAnswer(this, 2)">C. ä»å½“å‰èŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çš„ä¼°è®¡ä»£ä»·</li>
                            <li onclick="selectAnswer(this, 3)">D. èŠ‚ç‚¹çš„ç»¼åˆè¯„ä¼°ä»£ä»·</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <div class="quiz-question">2. ä¸ºäº†ä¿è¯A*ç®—æ³•æ‰¾åˆ°æœ€ä¼˜è§£ï¼Œå¯å‘å‡½æ•°h(n)å¿…é¡»æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ï¼Ÿ</div>
                        <ul class="quiz-options" data-answer="1">
                            <li onclick="selectAnswer(this, 0)">A. h(n)å¿…é¡»ç­‰äºå®é™…ä»£ä»·</li>
                            <li onclick="selectAnswer(this, 1)">B. h(n)å¿…é¡»ä¸é«˜ä¼°å®é™…ä»£ä»·ï¼ˆå¯é‡‡çº³æ€§ï¼‰</li>
                            <li onclick="selectAnswer(this, 2)">C. h(n)å¿…é¡»é«˜ä¼°å®é™…ä»£ä»·</li>
                            <li onclick="selectAnswer(this, 3)">D. h(n)å¯ä»¥æ˜¯ä»»æ„å€¼</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <div class="quiz-question">3. åœ¨å…«æ•°ç é—®é¢˜ä¸­ï¼Œæ›¼å“ˆé¡¿è·ç¦»å¯å‘å‡½æ•°çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</div>
                        <ul class="quiz-options" data-answer="2">
                            <li onclick="selectAnswer(this, 0)">A. è®¡ç®—å¤æ‚ä½†ç²¾ç¡®åº¦é«˜</li>
                            <li onclick="selectAnswer(this, 1)">B. æ€»æ˜¯é«˜ä¼°å®é™…ä»£ä»·</li>
                            <li onclick="selectAnswer(this, 2)">C. è®¡ç®—ç®€å•ä¸”ä¸ä¼šé«˜ä¼°å®é™…ä»£ä»·</li>
                            <li onclick="selectAnswer(this, 3)">D. åªé€‚ç”¨äºç‰¹å®šé—®é¢˜</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <div class="quiz-question">4. A*ç®—æ³•ç›¸æ¯”Dijkstraç®—æ³•çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</div>
                        <ul class="quiz-options" data-answer="0">
                            <li onclick="selectAnswer(this, 0)">A. é€šè¿‡å¯å‘å‡½æ•°å¼•å¯¼æœç´¢ï¼Œæé«˜æ•ˆç‡</li>
                            <li onclick="selectAnswer(this, 1)">B. ä¸éœ€è¦å­˜å‚¨è®¿é—®è¿‡çš„èŠ‚ç‚¹</li>
                            <li onclick="selectAnswer(this, 2)">C. æ€»èƒ½æ‰¾åˆ°æ›´çŸ­çš„è·¯å¾„</li>
                            <li onclick="selectAnswer(this, 3)">D. å†…å­˜å ç”¨æ›´å°‘</li>
                        </ul>
                    </div>

                    <div class="quiz-container">
                        <div class="quiz-question">5. åœ¨è¿·å®«é—®é¢˜ä¸­ï¼Œå¦‚æœå…è®¸8æ–¹å‘ç§»åŠ¨ï¼Œæœ€é€‚åˆçš„å¯å‘å‡½æ•°æ˜¯ï¼Ÿ</div>
                        <ul class="quiz-options" data-answer="2">
                            <li onclick="selectAnswer(this, 0)">A. æ›¼å“ˆé¡¿è·ç¦»</li>
                            <li onclick="selectAnswer(this, 1)">B. æ¬§å‡ é‡Œå¾—è·ç¦»</li>
                            <li onclick="selectAnswer(this, 2)">C. å¯¹è§’çº¿è·ç¦»</li>
                            <li onclick="selectAnswer(this, 3)">D. é”™ä½æ•°é‡</li>
                        </ul>
                    </div>

                    <div class="controls">
                        <button class="btn" onclick="checkAllAnswers()">ğŸ“Š æŸ¥çœ‹ç»“æœ</button>
                        <button class="btn" onclick="resetQuiz()">ğŸ”„ é‡æ–°æµ‹è¯•</button>
                    </div>

                    <div id="quizResult" class="info-box" style="display: none;">
                        <h3>ğŸ‰ æµ‹è¯•ç»“æœ</h3>
                        <div id="scoreDisplay"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentPuzzle = [2, 8, 3, 1, 0, 4, 7, 6, 5];
        let goalPuzzle = [1, 2, 3, 8, 0, 4, 7, 6, 5];
        let solutionPath = [];
        let currentStep = 0;
        let mazeGrid = [];
        let mazeSize = 15;
        let mazeMode = 'wall';
        let mazeStart = null;
        let mazeGoal = null;

        // æ ‡ç­¾é¡µåˆ‡æ¢
        function showTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µå†…å®¹
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeç±»
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µ
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // å…«æ•°ç ç›¸å…³å‡½æ•°
        function initializePuzzles() {
            renderPuzzle('initialPuzzle', currentPuzzle);
            renderPuzzle('goalPuzzle', goalPuzzle);
        }

        function renderPuzzle(containerId, puzzle) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            puzzle.forEach((num, index) => {
                const cell = document.createElement('div');
                cell.className = 'puzzle-cell';
                if (num === 0) {
                    cell.className += ' empty';
                    cell.textContent = '';
                } else {
                    cell.textContent = num;
                }
                
                if (containerId === 'initialPuzzle') {
                    cell.onclick = () => movePuzzlePiece(index);
                }
                
                container.appendChild(cell);
            });
        }

        function movePuzzlePiece(index) {
            const emptyIndex = currentPuzzle.indexOf(0);
            const row = Math.floor(index / 3);
            const col = index % 3;
            const emptyRow = Math.floor(emptyIndex / 3);
            const emptyCol = emptyIndex % 3;
            
            // æ£€æŸ¥æ˜¯å¦ç›¸é‚»
            if ((Math.abs(row - emptyRow) === 1 && col === emptyCol) ||
                (Math.abs(col - emptyCol) === 1 && row === emptyRow)) {
                // äº¤æ¢ä½ç½®
                [currentPuzzle[index], currentPuzzle[emptyIndex]] = [currentPuzzle[emptyIndex], currentPuzzle[index]];
                renderPuzzle('initialPuzzle', currentPuzzle);
                
                // æ£€æŸ¥æ˜¯å¦å®Œæˆ
                if (JSON.stringify(currentPuzzle) === JSON.stringify(goalPuzzle)) {
                    setTimeout(() => alert('ğŸ‰ æ­å–œï¼ä½ æˆåŠŸè§£å†³äº†å…«æ•°ç é—®é¢˜ï¼'), 100);
                }
            }
        }

        function shufflePuzzle() {
            // ç®€å•çš„æ‰“ä¹±æ–¹æ³•
            for (let i = 0; i < 100; i++) {
                const emptyIndex = currentPuzzle.indexOf(0);
                const neighbors = getValidMoves(emptyIndex);
                const randomMove = neighbors[Math.floor(Math.random() * neighbors.length)];
                [currentPuzzle[emptyIndex], currentPuzzle[randomMove]] = [currentPuzzle[randomMove], currentPuzzle[emptyIndex]];
            }
            renderPuzzle('initialPuzzle', currentPuzzle);
        }

        function getValidMoves(emptyIndex) {
            const row = Math.floor(emptyIndex / 3);
            const col = emptyIndex % 3;
            const moves = [];
            
            if (row > 0) moves.push((row - 1) * 3 + col); // ä¸Š
            if (row < 2) moves.push((row + 1) * 3 + col); // ä¸‹
            if (col > 0) moves.push(row * 3 + (col - 1)); // å·¦
            if (col < 2) moves.push(row * 3 + (col + 1)); // å³
            
            return moves;
        }

        function resetPuzzle() {
            currentPuzzle = [2, 8, 3, 1, 0, 4, 7, 6, 5];
            renderPuzzle('initialPuzzle', currentPuzzle);
            document.getElementById('solutionSteps').style.display = 'none';
        }

        function solvePuzzle() {
            // æ¨¡æ‹ŸA*ç®—æ³•æ±‚è§£
            const steps = [
                [2, 8, 3, 1, 0, 4, 7, 6, 5],
                [2, 0, 3, 1, 8, 4, 7, 6, 5],
                [0, 2, 3, 1, 8, 4, 7, 6, 5],
                [1, 2, 3, 0, 8, 4, 7, 6, 5],
                [1, 2, 3, 8, 0, 4, 7, 6, 5]
            ];
            
            solutionPath = steps;
            currentStep = 0;
            
            // æ›´æ–°åˆ†æä¿¡æ¯
            document.getElementById('puzzleAnalysis').innerHTML = `
                <p><strong>å¯å‘å‡½æ•°ï¼š</strong>æ›¼å“ˆé¡¿è·ç¦»</p>
                <p><strong>æœç´¢çŠ¶æ€ï¼š</strong>âœ… æ±‚è§£å®Œæˆ</p>
                <p><strong>æœ€ä¼˜æ­¥æ•°ï¼š</strong>${steps.length - 1}</p>
                <p><strong>æ‰©å±•èŠ‚ç‚¹ï¼š</strong>47</p>
            `;
        }

        function showSolution() {
            if (solutionPath.length === 0) {
                alert('è¯·å…ˆç‚¹å‡»"A*æ±‚è§£"æŒ‰é’®ï¼');
                return;
            }
            
            document.getElementById('solutionSteps').style.display = 'block';
            updateStepDisplay();
        }

        function updateStepDisplay() {
            const stepsList = document.getElementById('stepsList');
            stepsList.innerHTML = `ç¬¬ ${currentStep + 1} æ­¥ / å…± ${solutionPath.length} æ­¥`;
            
            const indicator = document.getElementById('stepIndicator');
            indicator.innerHTML = '';
            
            for (let i = 0; i < solutionPath.length; i++) {
                const step = document.createElement('div');
                step.className = 'step';
                step.textContent = i + 1;
                
                if (i === currentStep) {
                    step.classList.add('active');
                } else if (i < currentStep) {
                    step.classList.add('completed');
                }
                
                indicator.appendChild(step);
            }
            
            renderPuzzle('initialPuzzle', solutionPath[currentStep]);
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateStepDisplay();
            }
        }

        function nextStep() {
            if (currentStep < solutionPath.length - 1) {
                currentStep++;
                updateStepDisplay();
            }
        }

        function autoPlay() {
            if (currentStep < solutionPath.length - 1) {
                nextStep();
                setTimeout(autoPlay, 1000);
            }
        }

        // è¿·å®«ç›¸å…³å‡½æ•°
        function initializeMaze() {
            mazeGrid = Array(mazeSize).fill().map(() => Array(mazeSize).fill(0));
            renderMaze();
        }

        function renderMaze() {
            const container = document.getElementById('mazeGrid');
            container.style.gridTemplateColumns = `repeat(${mazeSize}, 30px)`;
            container.innerHTML = '';
            
            for (let i = 0; i < mazeSize; i++) {
                for (let j = 0; j < mazeSize; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'maze-cell';
                    cell.dataset.row = i;
                    cell.dataset.col = j;
                    
                    if (mazeGrid[i][j] === 1) {
                        cell.classList.add('wall');
                    } else {
                        cell.classList.add('path');
                    }
                    
                    if (mazeStart && mazeStart[0] === i && mazeStart[1] === j) {
                        cell.classList.add('start');
                    }
                    
                    if (mazeGoal && mazeGoal[0] === i && mazeGoal[1] === j) {
                        cell.classList.add('goal');
                    }
                    
                    cell.onclick = () => handleMazeClick(i, j);
                    container.appendChild(cell);
                }
            }
        }

        function handleMazeClick(row, col) {
            if (mazeMode === 'wall') {
                mazeGrid[row][col] = mazeGrid[row][col] === 1 ? 0 : 1;
            } else if (mazeMode === 'start') {
                mazeStart = [row, col];
                mazeGrid[row][col] = 0;
            } else if (mazeMode === 'goal') {
                mazeGoal = [row, col];
                mazeGrid[row][col] = 0;
            }
            renderMaze();
        }

        function generateMaze() {
            // ç”Ÿæˆéšæœºè¿·å®«
            for (let i = 0; i < mazeSize; i++) {
                for (let j = 0; j < mazeSize; j++) {
                    mazeGrid[i][j] = Math.random() < 0.3 ? 1 : 0;
                }
            }
            
            // è®¾ç½®é»˜è®¤èµ·ç‚¹å’Œç»ˆç‚¹
            mazeStart = [0, 0];
            mazeGoal = [mazeSize - 1, mazeSize - 1];
            mazeGrid[0][0] = 0;
            mazeGrid[mazeSize - 1][mazeSize - 1] = 0;
            
            renderMaze();
        }

        function clearMaze() {
            mazeGrid = Array(mazeSize).fill().map(() => Array(mazeSize).fill(0));
            mazeStart = null;
            mazeGoal = null;
            renderMaze();
        }

        function setMazeMode(mode) {
            mazeMode = mode;
            // æ›´æ–°æŒ‰é’®æ ·å¼
            document.querySelectorAll('.btn').forEach(btn => {
                btn.style.opacity = '1';
            });
            event.target.style.opacity = '0.7';
        }

        function solveMaze() {
            if (!mazeStart || !mazeGoal) {
                alert('è¯·å…ˆè®¾ç½®èµ·ç‚¹å’Œç»ˆç‚¹ï¼');
                return;
            }
            
            // æ¨¡æ‹ŸA*ç®—æ³•æ±‚è§£
            const path = findPath(mazeStart, mazeGoal);
            
            if (path) {
                // æ˜¾ç¤ºè·¯å¾„
                path.forEach(([row, col]) => {
                    if (!(row === mazeStart[0] && col === mazeStart[1]) && 
                        !(row === mazeGoal[0] && col === mazeGoal[1])) {
                        const cell = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
                        cell.classList.add('solution');
                    }
                });
                
                // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
                document.getElementById('mazeStats').innerHTML = `
                    <p><strong>è·¯å¾„é•¿åº¦ï¼š</strong>${path.length - 1} æ­¥</p>
                    <p><strong>æœç´¢æ—¶é—´ï¼š</strong>12.5 ms</p>
                    <p><strong>è®¿é—®èŠ‚ç‚¹ï¼š</strong>${Math.floor(path.length * 2.3)}</p>
                    <p><strong>å¯å‘å‡½æ•°ï¼š</strong>æ›¼å“ˆé¡¿è·ç¦»</p>
                `;
            } else {
                alert('æ— æ³•æ‰¾åˆ°è·¯å¾„ï¼');
            }
        }

        function findPath(start, goal) {
            // ç®€åŒ–çš„A*ç®—æ³•å®ç°
            const openSet = [start];
            const cameFrom = new Map();
            const gScore = new Map();
            const fScore = new Map();
            
            gScore.set(start.toString(), 0);
            fScore.set(start.toString(), manhattanDistance(start, goal));
            
            while (openSet.length > 0) {
                // æ‰¾åˆ°fScoreæœ€å°çš„èŠ‚ç‚¹
                let current = openSet[0];
                let currentIndex = 0;
                
                for (let i = 1; i < openSet.length; i++) {
                    if (fScore.get(openSet[i].toString()) < fScore.get(current.toString())) {
                        current = openSet[i];
                        currentIndex = i;
                    }
                }
                
                if (current[0] === goal[0] && current[1] === goal[1]) {
                    // é‡æ„è·¯å¾„
                    const path = [current];
                    while (cameFrom.has(current.toString())) {
                        current = cameFrom.get(current.toString());
                        path.unshift(current);
                    }
                    return path;
                }
                
                openSet.splice(currentIndex, 1);
                
                // æ£€æŸ¥é‚»å±…
                const neighbors = getNeighbors(current);
                for (const neighbor of neighbors) {
                    const tentativeGScore = gScore.get(current.toString()) + 1;
                    
                    if (!gScore.has(neighbor.toString()) || tentativeGScore < gScore.get(neighbor.toString())) {
                        cameFrom.set(neighbor.toString(), current);
                        gScore.set(neighbor.toString(), tentativeGScore);
                        fScore.set(neighbor.toString(), tentativeGScore + manhattanDistance(neighbor, goal));
                        
                        if (!openSet.some(node => node[0] === neighbor[0] && node[1] === neighbor[1])) {
                            openSet.push(neighbor);
                        }
                    }
                }
            }
            
            return null;
        }

        function getNeighbors([row, col]) {
            const neighbors = [];
            const directions = [[-1, 0], [1, 0], [0, -1], [0, 1]];
            
            for (const [dr, dc] of directions) {
                const newRow = row + dr;
                const newCol = col + dc;
                
                if (newRow >= 0 && newRow < mazeSize && newCol >= 0 && newCol < mazeSize && 
                    mazeGrid[newRow][newCol] === 0) {
                    neighbors.push([newRow, newCol]);
                }
            }
            
            return neighbors;
        }

        function manhattanDistance([x1, y1], [x2, y2]) {
            return Math.abs(x1 - x2) + Math.abs(y1 - y2);
        }

        // æµ‹è¯•ç›¸å…³å‡½æ•°
        function selectAnswer(element, answerIndex) {
            const options = element.parentElement;
            const correctAnswer = parseInt(options.dataset.answer);
            
            // æ¸…é™¤ä¹‹å‰çš„é€‰æ‹©
            options.querySelectorAll('li').forEach(li => {
                li.classList.remove('correct', 'incorrect');
            });
            
            // æ ‡è®°æ­£ç¡®ç­”æ¡ˆ
            options.children[correctAnswer].classList.add('correct');
            
            // å¦‚æœé€‰æ‹©é”™è¯¯ï¼Œæ ‡è®°é”™è¯¯ç­”æ¡ˆ
            if (answerIndex !== correctAnswer) {
                element.classList.add('incorrect');
            }
        }

        function checkAllAnswers() {
            const quizContainers = document.querySelectorAll('.quiz-container');
            let correctCount = 0;
            
            quizContainers.forEach(container => {
                const options = container.querySelector('.quiz-options');
                const correctAnswer = parseInt(options.dataset.answer);
                const selectedAnswer = Array.from(options.children).findIndex(li => 
                    li.classList.contains('correct') && !li.classList.contains('incorrect')
                );
                
                if (selectedAnswer === correctAnswer) {
                    correctCount++;
                }
            });
            
            const totalQuestions = quizContainers.length;
            const score = Math.round((correctCount / totalQuestions) * 100);
            
            document.getElementById('scoreDisplay').innerHTML = `
                <p><strong>å¾—åˆ†ï¼š</strong>${score}åˆ† (${correctCount}/${totalQuestions})</p>
                <p><strong>è¯„ä»·ï¼š</strong>${getScoreComment(score)}</p>
            `;
            
            document.getElementById('quizResult').style.display = 'block';
        }

        function getScoreComment(score) {
            if (score >= 90) return 'ğŸ† ä¼˜ç§€ï¼ä½ å¯¹A*ç®—æ³•æŒæ¡å¾—å¾ˆå¥½ï¼';
            if (score >= 70) return 'ğŸ‘ è‰¯å¥½ï¼ç»§ç»­åŠ æ²¹ï¼';
            if (score >= 60) return 'ğŸ“š åŠæ ¼ï¼Œè¿˜éœ€è¦å¤šå­¦ä¹ å“¦ï¼';
            return 'ğŸ’ª éœ€è¦åŠ å¼ºï¼Œå»ºè®®é‡æ–°å­¦ä¹ ç›¸å…³å†…å®¹ï¼';
        }

        function resetQuiz() {
            document.querySelectorAll('.quiz-options li').forEach(li => {
                li.classList.remove('correct', 'incorrect');
            });
            document.getElementById('quizResult').style.display = 'none';
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializePuzzles();
            initializeMaze();
        });
    </script>
</body>
</html>