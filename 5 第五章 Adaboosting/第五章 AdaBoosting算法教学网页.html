<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdaBoostingç®—æ³•äº¤äº’å¼æ•™å­¦å¹³å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            border-right: 1px solid #dee2e6;
        }

        .nav-tab:last-child {
            border-right: none;
        }

        .nav-tab.active {
            background: #007bff;
            color: white;
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .nav-tab.active:hover {
            background: #0056b3;
        }

        .content-panel {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            display: none;
        }

        .content-panel.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            margin-bottom: 30px;
        }

        .section h2 {
            color: #007bff;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .section h3 {
            color: #495057;
            margin: 20px 0 15px 0;
            font-size: 1.4em;
        }

        .formula-box {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .code-container {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow-x: auto;
        }

        .code-container pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .run-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
            transition: background 0.3s ease;
        }

        .run-button:hover {
            background: #218838;
        }

        .output-area {
            background: #1a202c;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }

        .interactive-demo {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #007bff;
        }

        .demo-controls {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .control-group label {
            font-weight: bold;
            color: #495057;
        }

        .control-group input, .control-group select {
            padding: 8px 12px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 14px;
        }

        .control-group input:focus, .control-group select:focus {
            outline: none;
            border-color: #007bff;
        }

        .demo-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .demo-button:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .visualization {
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quiz-container {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .quiz-question {
            font-weight: bold;
            margin-bottom: 15px;
            color: #856404;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            padding: 10px;
            background: white;
            border: 2px solid #ffc107;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background: #ffc107;
            color: white;
        }

        .quiz-option.selected {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        .quiz-result {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        .quiz-result.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .quiz-result.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .comparison-table th {
            background: #007bff;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }

        .comparison-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #dee2e6;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .comparison-table tr:hover {
            background: #e3f2fd;
        }

        .highlight-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            position: relative;
        }

        .step {
            flex: 1;
            text-align: center;
            position: relative;
            padding: 20px 10px;
        }

        .step::before {
            content: attr(data-step);
            display: block;
            width: 40px;
            height: 40px;
            background: #dee2e6;
            border-radius: 50%;
            margin: 0 auto 10px;
            line-height: 40px;
            font-weight: bold;
            color: #6c757d;
        }

        .step.active::before {
            background: #007bff;
            color: white;
        }

        .step.completed::before {
            background: #28a745;
            color: white;
        }

        .step::after {
            content: '';
            position: absolute;
            top: 30px;
            right: -50%;
            width: 100%;
            height: 2px;
            background: #dee2e6;
            z-index: -1;
        }

        .step:last-child::after {
            display: none;
        }

        .step.completed::after {
            background: #28a745;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .demo-controls {
                flex-direction: column;
            }

            .step-indicator {
                flex-direction: column;
                gap: 20px;
            }

            .step::after {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- è¿”å›ä¸»é¡µæŒ‰é’® -->
    <div style="
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
    ">
        <a href="../index.html" style="
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: rgba(255,255,255,0.9);
            color: #667eea;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        " onmouseover="this.style.background='white'; this.style.transform='scale(1.05)'" onmouseout="this.style.background='rgba(255,255,255,0.9)'; this.style.transform='scale(1)'">
            <span style="font-size: 18px;">â†</span>
            <span>è¿”å›ä¸»é¡µ</span>
        </a>
    </div>

    <div class="container">
        <div class="header">
            <h1>ğŸš€ AdaBoostingç®—æ³•äº¤äº’å¼æ•™å­¦å¹³å°</h1>
            <p>æ·±å…¥ç†è§£é›†æˆå­¦ä¹ çš„ç»å…¸ç®—æ³•ï¼Œé€šè¿‡å¯è§†åŒ–å’Œäº¤äº’å¼æ¼”ç¤ºæŒæ¡æ ¸å¿ƒåŸç†</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showPanel('theory')">ğŸ“š ç®—æ³•åŸç†</button>
            <button class="nav-tab" onclick="showPanel('implementation')">ğŸ’» ä»£ç å®ç°</button>
            <button class="nav-tab" onclick="showPanel('demo')">ğŸ¯ äº¤äº’æ¼”ç¤º</button>
            <button class="nav-tab" onclick="showPanel('practice')">âœï¸ å®è·µç»ƒä¹ </button>
            <button class="nav-tab" onclick="showPanel('application')">ğŸŒŸ åº”ç”¨æ¡ˆä¾‹</button>
        </div>

        <!-- ç®—æ³•åŸç†é¢æ¿ -->
        <div id="theory" class="content-panel active">
            <div class="section">
                <h2>ğŸ¯ AdaBoostingæ ¸å¿ƒæ€æƒ³</h2>
                <div class="highlight-box">
                    <h3>é›†æˆå­¦ä¹ çš„æ™ºæ…§ï¼šè®©å¼±è€…å˜å¼º</h3>
                    <p>AdaBoostingé€šè¿‡ç»„åˆå¤šä¸ª"å¼±åˆ†ç±»å™¨"ï¼Œæ„å»ºå‡ºæ€§èƒ½ä¼˜å¼‚çš„"å¼ºåˆ†ç±»å™¨"ã€‚å°±åƒä¸€ä¸ªå›¢é˜Ÿä¸­ï¼Œæ¯ä¸ªæˆå‘˜éƒ½æœ‰è‡ªå·±çš„ä¸“é•¿ï¼Œé€šè¿‡åˆç†çš„åˆ†å·¥å’Œåä½œï¼Œæ•´ä¸ªå›¢é˜Ÿçš„èƒ½åŠ›è¿œè¶…ä¸ªä½“ã€‚</p>
                </div>

                <h3>ğŸ”„ è‡ªé€‚åº”å­¦ä¹ æœºåˆ¶</h3>
                <p><strong>æ ¸å¿ƒç†å¿µï¼š</strong>ä»é”™è¯¯ä¸­å­¦ä¹ ï¼Œè®©æ¨¡å‹æ›´åŠ å…³æ³¨éš¾ä»¥åˆ†ç±»çš„æ ·æœ¬</p>
                <ul style="margin: 15px 0; padding-left: 30px;">
                    <li><strong>æ ·æœ¬æƒé‡è°ƒæ•´ï¼š</strong>é”™è¯¯åˆ†ç±»çš„æ ·æœ¬è·å¾—æ›´é«˜æƒé‡ï¼Œä¸‹ä¸€è½®è®­ç»ƒæ—¶æ›´å—å…³æ³¨</li>
                    <li><strong>åˆ†ç±»å™¨æƒé‡ï¼š</strong>æ€§èƒ½å¥½çš„åˆ†ç±»å™¨åœ¨æœ€ç»ˆå†³ç­–ä¸­æ‹¥æœ‰æ›´å¤§è¯è¯­æƒ</li>
                    <li><strong>è¿­ä»£ä¼˜åŒ–ï¼š</strong>æ¯ä¸€è½®éƒ½åœ¨å‰ä¸€è½®çš„åŸºç¡€ä¸Šæ”¹è¿›ï¼Œé€æ­¥æå‡æ•´ä½“æ€§èƒ½</li>
                </ul>

                <h3>ğŸ“Š æ•°å­¦åŸç†è¯¦è§£</h3>
                
                <h4>1. æ ·æœ¬æƒé‡åˆå§‹åŒ–</h4>
                <div class="formula-box">
                    wâ‚,áµ¢ = 1/N,  i = 1,2,...,N
                    <br><br>
                    å…¶ä¸­ N ä¸ºè®­ç»ƒæ ·æœ¬æ€»æ•°ï¼Œæ‰€æœ‰æ ·æœ¬åˆå§‹æƒé‡ç›¸ç­‰
                </div>

                <h4>2. åˆ†ç±»é”™è¯¯ç‡è®¡ç®—</h4>
                <div class="formula-box">
                    Îµâ‚œ = Î£áµ¢ wâ‚œ,áµ¢ Â· I(hâ‚œ(xáµ¢) â‰  yáµ¢) / Î£áµ¢ wâ‚œ,áµ¢
                    <br><br>
                    I(Â·) ä¸ºæŒ‡ç¤ºå‡½æ•°ï¼Œå½“åˆ†ç±»é”™è¯¯æ—¶ä¸º1ï¼Œæ­£ç¡®æ—¶ä¸º0
                </div>

                <h4>3. åˆ†ç±»å™¨æƒé‡è®¡ç®—</h4>
                <div class="formula-box">
                    Î±â‚œ = (1/2) Ã— ln((1-Îµâ‚œ)/Îµâ‚œ)
                    <br><br>
                    é”™è¯¯ç‡è¶Šä½ï¼Œåˆ†ç±»å™¨æƒé‡è¶Šå¤§ï¼›é”™è¯¯ç‡æ¥è¿‘0.5æ—¶ï¼Œæƒé‡æ¥è¿‘0
                </div>

                <h4>4. æ ·æœ¬æƒé‡æ›´æ–°</h4>
                <div class="formula-box">
                    wâ‚œâ‚Šâ‚,áµ¢ = wâ‚œ,áµ¢ Ã— exp(-Î±â‚œ Ã— yáµ¢ Ã— hâ‚œ(xáµ¢)) / Zâ‚œ
                    <br><br>
                    Zâ‚œ ä¸ºå½’ä¸€åŒ–å› å­ï¼Œç¡®ä¿æƒé‡å’Œä¸º1
                </div>

                <h4>5. æœ€ç»ˆå¼ºåˆ†ç±»å™¨</h4>
                <div class="formula-box">
                    H(x) = sign(Î£â‚œ Î±â‚œ Ã— hâ‚œ(x))
                    <br><br>
                    æ‰€æœ‰å¼±åˆ†ç±»å™¨çš„åŠ æƒæŠ•ç¥¨ç»“æœ
                </div>

                <h3>ğŸ”„ ç®—æ³•æµç¨‹æ­¥éª¤</h3>
                <div class="step-indicator">
                    <div class="step completed" data-step="1">
                        <strong>åˆå§‹åŒ–</strong><br>
                        è®¾ç½®è¿­ä»£æ¬¡æ•°T<br>
                        åˆå§‹åŒ–æ ·æœ¬æƒé‡
                    </div>
                    <div class="step completed" data-step="2">
                        <strong>è®­ç»ƒå¼±åˆ†ç±»å™¨</strong><br>
                        åŸºäºå½“å‰æƒé‡<br>
                        è®­ç»ƒåˆ†ç±»å™¨
                    </div>
                    <div class="step completed" data-step="3">
                        <strong>è®¡ç®—é”™è¯¯ç‡</strong><br>
                        è¯„ä¼°åˆ†ç±»å™¨<br>
                        åœ¨è®­ç»ƒé›†ä¸Šçš„è¡¨ç°
                    </div>
                    <div class="step completed" data-step="4">
                        <strong>æ›´æ–°æƒé‡</strong><br>
                        è°ƒæ•´æ ·æœ¬æƒé‡<br>
                        å’Œåˆ†ç±»å™¨æƒé‡
                    </div>
                    <div class="step completed" data-step="5">
                        <strong>ç»„åˆåˆ†ç±»å™¨</strong><br>
                        æ„å»ºæœ€ç»ˆçš„<br>
                        å¼ºåˆ†ç±»å™¨
                    </div>
                </div>

                <h3>âš–ï¸ ä¸å…¶ä»–é›†æˆæ–¹æ³•å¯¹æ¯”</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>ç®—æ³•</th>
                            <th>æ ¸å¿ƒæ€æƒ³</th>
                            <th>è®­ç»ƒæ–¹å¼</th>
                            <th>ä¼˜åŠ¿</th>
                            <th>åŠ£åŠ¿</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>AdaBoosting</strong></td>
                            <td>é¡ºåºè®­ç»ƒï¼Œå…³æ³¨é”™è¯¯æ ·æœ¬</td>
                            <td>ä¸²è¡Œ</td>
                            <td>ç®€å•é«˜æ•ˆï¼Œç†è®ºåŸºç¡€æ‰å®</td>
                            <td>å¯¹å™ªå£°å’Œå¼‚å¸¸å€¼æ•æ„Ÿ</td>
                        </tr>
                        <tr>
                            <td><strong>éšæœºæ£®æ—</strong></td>
                            <td>å¹¶è¡Œè®­ç»ƒï¼Œç‰¹å¾éšæœºé‡‡æ ·</td>
                            <td>å¹¶è¡Œ</td>
                            <td>é²æ£’æ€§å¼ºï¼Œå¯å¹¶è¡Œè®¡ç®—</td>
                            <td>æ¨¡å‹è¾ƒå¤æ‚ï¼Œè§£é‡Šæ€§å·®</td>
                        </tr>
                        <tr>
                            <td><strong>GBDT</strong></td>
                            <td>åŸºäºæ¢¯åº¦ä¸‹é™ä¼˜åŒ–æŸå¤±</td>
                            <td>ä¸²è¡Œ</td>
                            <td>æ€§èƒ½ä¼˜å¼‚ï¼Œé€‚ç”¨èŒƒå›´å¹¿</td>
                            <td>è®­ç»ƒæ…¢ï¼Œå‚æ•°æ•æ„Ÿ</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ä»£ç å®ç°é¢æ¿ -->
        <div id="implementation" class="content-panel">
            <div class="section">
                <h2>ğŸ’» Pythonä»£ç å®ç°</h2>
                
                <h3>ğŸ¯ å®éªŒç›®æ ‡</h3>
                <ul style="margin: 15px 0; padding-left: 30px;">
                    <li>æŒæ¡AdaBoostç®—æ³•çš„åŸºæœ¬å®ç°æ–¹æ³•</li>
                    <li>ç†è§£å¼±åˆ†ç±»å™¨æ•°é‡å¯¹æ¨¡å‹æ€§èƒ½çš„å½±å“</li>
                    <li>å­¦ä¹ ä½¿ç”¨scikit-learnè¿›è¡Œæ¨¡å‹è¯„ä¼°</li>
                    <li>é€šè¿‡ä¹³è…ºç™Œæ•°æ®é›†éªŒè¯ç®—æ³•æ•ˆæœ</li>
                </ul>

                <h3>ğŸ“¦ ç¯å¢ƒå‡†å¤‡</h3>
                <div class="code-container">
                    <pre><code># å®‰è£…å¿…è¦çš„åº“
pip install scikit-learn numpy pandas matplotlib seaborn</code></pre>
                </div>

                <h3>ğŸ”§ å®Œæ•´ä»£ç å®ç°</h3>
                <div class="code-container">
                    <pre><code># å¯¼å…¥å¿…è¦çš„åº“
from sklearn.ensemble import AdaBoostClassifier
from sklearn.model_selection import train_test_split, cross_val_score
from sklearn.metrics import accuracy_score, confusion_matrix, classification_report
from sklearn.datasets import load_breast_cancer
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd

# è®¾ç½®ä¸­æ–‡å­—ä½“
plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False

print("ğŸ¯ AdaBoostingç®—æ³•å®éªŒå¼€å§‹")
print("=" * 50)

# 1. åŠ è½½æ•°æ®é›†
print("ğŸ“Š åŠ è½½ä¹³è…ºç™Œæ•°æ®é›†...")
data = load_breast_cancer()
X = data.data  # ç‰¹å¾çŸ©é˜µ (569, 30)
y = data.target  # æ ‡ç­¾ (569,)
feature_names = data.feature_names

print(f"æ•°æ®é›†ä¿¡æ¯ï¼š")
print(f"  - æ ·æœ¬æ•°é‡: {X.shape[0]}")
print(f"  - ç‰¹å¾æ•°é‡: {X.shape[1]}")
print(f"  - ç±»åˆ«åˆ†å¸ƒ: æ¶æ€§={np.sum(y==0)}, è‰¯æ€§={np.sum(y==1)}")

# 2. æ•°æ®åˆ†å‰²
print("\nğŸ”„ åˆ†å‰²è®­ç»ƒé›†å’Œæµ‹è¯•é›†...")
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.3, random_state=42, stratify=y
)

print(f"è®­ç»ƒé›†å¤§å°: {X_train.shape[0]}")
print(f"æµ‹è¯•é›†å¤§å°: {X_test.shape[0]}")

# 3. åˆ›å»ºå’Œè®­ç»ƒAdaBoostæ¨¡å‹
print("\nğŸš€ åˆ›å»ºAdaBoostæ¨¡å‹...")
model = AdaBoostClassifier(
    n_estimators=50,  # å¼±åˆ†ç±»å™¨æ•°é‡
    learning_rate=1.0,  # å­¦ä¹ ç‡
    random_state=42
)

print("â³ è®­ç»ƒæ¨¡å‹ä¸­...")
model.fit(X_train, y_train)
print("âœ… æ¨¡å‹è®­ç»ƒå®Œæˆï¼")

# 4. æ¨¡å‹é¢„æµ‹å’Œè¯„ä¼°
print("\nğŸ“ˆ æ¨¡å‹è¯„ä¼°ç»“æœï¼š")
print("=" * 30)

# è®­ç»ƒé›†é¢„æµ‹
y_train_pred = model.predict(X_train)
train_accuracy = accuracy_score(y_train, y_train_pred)
print(f"è®­ç»ƒé›†å‡†ç¡®ç‡: {train_accuracy:.4f}")

# æµ‹è¯•é›†é¢„æµ‹
y_test_pred = model.predict(X_test)
test_accuracy = accuracy_score(y_test, y_test_pred)
print(f"æµ‹è¯•é›†å‡†ç¡®ç‡: {test_accuracy:.4f}")

# äº¤å‰éªŒè¯
cv_scores = cross_val_score(model, X_train, y_train, cv=5)
print(f"5æŠ˜äº¤å‰éªŒè¯å¹³å‡å‡†ç¡®ç‡: {cv_scores.mean():.4f} (Â±{cv_scores.std()*2:.4f})")

# 5. è¯¦ç»†åˆ†ç±»æŠ¥å‘Š
print("\nğŸ“‹ è¯¦ç»†åˆ†ç±»æŠ¥å‘Šï¼š")
print(classification_report(y_test, y_test_pred, 
                          target_names=['æ¶æ€§', 'è‰¯æ€§']))

# 6. æ··æ·†çŸ©é˜µ
print("\nğŸ¯ æ··æ·†çŸ©é˜µï¼š")
cm = confusion_matrix(y_test, y_test_pred)
print(cm)
print("\næ··æ·†çŸ©é˜µè§£è¯»ï¼š")
print(f"  çœŸé˜´æ€§(TN): {cm[0,0]} - æ­£ç¡®é¢„æµ‹ä¸ºæ¶æ€§")
print(f"  å‡é˜³æ€§(FP): {cm[0,1]} - é”™è¯¯é¢„æµ‹ä¸ºè‰¯æ€§")
print(f"  å‡é˜´æ€§(FN): {cm[1,0]} - é”™è¯¯é¢„æµ‹ä¸ºæ¶æ€§")
print(f"  çœŸé˜³æ€§(TP): {cm[1,1]} - æ­£ç¡®é¢„æµ‹ä¸ºè‰¯æ€§")

# 7. ç‰¹å¾é‡è¦æ€§åˆ†æ
print("\nğŸ” ç‰¹å¾é‡è¦æ€§åˆ†æï¼ˆå‰10ä¸ªç‰¹å¾ï¼‰ï¼š")
feature_importance = model.feature_importances_
important_features = np.argsort(feature_importance)[-10:][::-1]

for i, idx in enumerate(important_features):
    print(f"{i+1:2d}. {feature_names[idx]:<25} {feature_importance[idx]:.4f}")

print("\nğŸ‰ å®éªŒå®Œæˆï¼")</code></pre>
                    <button class="run-button" onclick="runCode('basic')">â–¶ï¸ è¿è¡ŒåŸºç¡€ä»£ç </button>
                </div>
                <div id="output-basic" class="output-area">ç‚¹å‡»è¿è¡ŒæŒ‰é’®æŸ¥çœ‹è¾“å‡ºç»“æœ...</div>

                <h3>ğŸ“Š æ€§èƒ½åˆ†æä»£ç </h3>
                <div class="code-container">
                    <pre><code># å¼±åˆ†ç±»å™¨æ•°é‡å¯¹æ€§èƒ½çš„å½±å“åˆ†æ
print("\nğŸ“Š åˆ†æå¼±åˆ†ç±»å™¨æ•°é‡å¯¹æ€§èƒ½çš„å½±å“...")

# æµ‹è¯•ä¸åŒçš„n_estimatorså€¼
n_estimators_range = [1, 5, 10, 20, 30, 50, 70, 100]
train_scores = []
test_scores = []

for n_est in n_estimators_range:
    # åˆ›å»ºæ¨¡å‹
    ada_model = AdaBoostClassifier(n_estimators=n_est, random_state=42)
    
    # è®­ç»ƒæ¨¡å‹
    ada_model.fit(X_train, y_train)
    
    # è®¡ç®—å‡†ç¡®ç‡
    train_score = ada_model.score(X_train, y_train)
    test_score = ada_model.score(X_test, y_test)
    
    train_scores.append(train_score)
    test_scores.append(test_score)
    
    print(f"n_estimators={n_est:3d}: è®­ç»ƒ={train_score:.4f}, æµ‹è¯•={test_score:.4f}")

# å¯è§†åŒ–ç»“æœ
plt.figure(figsize=(10, 6))
plt.plot(n_estimators_range, train_scores, 'o-', label='è®­ç»ƒé›†å‡†ç¡®ç‡', linewidth=2)
plt.plot(n_estimators_range, test_scores, 's-', label='æµ‹è¯•é›†å‡†ç¡®ç‡', linewidth=2)
plt.xlabel('å¼±åˆ†ç±»å™¨æ•°é‡ (n_estimators)')
plt.ylabel('å‡†ç¡®ç‡')
plt.title('AdaBoostæ€§èƒ½éšå¼±åˆ†ç±»å™¨æ•°é‡å˜åŒ–')
plt.legend()
plt.grid(True, alpha=0.3)
plt.show()

print(f"\nğŸ¯ æœ€ä½³å¼±åˆ†ç±»å™¨æ•°é‡: {n_estimators_range[np.argmax(test_scores)]}")
print(f"ğŸ† æœ€é«˜æµ‹è¯•å‡†ç¡®ç‡: {max(test_scores):.4f}")</code></pre>
                    <button class="run-button" onclick="runCode('analysis')">â–¶ï¸ è¿è¡Œæ€§èƒ½åˆ†æ</button>
                </div>
                <div id="output-analysis" class="output-area">ç‚¹å‡»è¿è¡ŒæŒ‰é’®æŸ¥çœ‹åˆ†æç»“æœ...</div>

                <h3>ğŸ§© å¡«ç©ºç»ƒä¹ </h3>
                <div class="quiz-container">
                    <div class="quiz-question">è¯·å®Œæˆä»¥ä¸‹ä»£ç å¡«ç©ºï¼Œåˆ›å»ºä¸€ä¸ªAdaBooståˆ†ç±»å™¨ï¼š</div>
                    <div class="code-container">
                        <pre><code># åˆ›å»ºAdaBoostæ¨¡å‹
model = AdaBoostClassifier(
    n_estimators=____,  # å¡«ç©º1: å¼±åˆ†ç±»å™¨æ•°é‡ï¼Œå»ºè®®å€¼50
    learning_rate=____,  # å¡«ç©º2: å­¦ä¹ ç‡ï¼Œå»ºè®®å€¼1.0
    random_state=42
)

# è®­ç»ƒæ¨¡å‹
model.fit(____, ____)  # å¡«ç©º3: è®­ç»ƒæ•°æ®

# é¢„æµ‹
y_pred = model.predict(____)  # å¡«ç©º4: æµ‹è¯•æ•°æ®

# è®¡ç®—å‡†ç¡®ç‡
accuracy = accuracy_score(____, ____)  # å¡«ç©º5: çœŸå®å€¼å’Œé¢„æµ‹å€¼</code></pre>
                    </div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectOption(this, 'correct')">
                            A. 50, 1.0, X_train, y_train, X_test, y_test, y_pred
                        </div>
                        <div class="quiz-option" onclick="selectOption(this, 'incorrect')">
                            B. 100, 0.5, X_test, y_test, X_train, y_train, y_pred
                        </div>
                        <div class="quiz-option" onclick="selectOption(this, 'incorrect')">
                            C. 30, 2.0, X, y, X_test, y_test, y_train
                        </div>
                    </div>
                    <div id="quiz-result" class="quiz-result" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- äº¤äº’æ¼”ç¤ºé¢æ¿ -->
        <div id="demo" class="content-panel">
            <div class="section">
                <h2>ğŸ¯ AdaBoostingäº¤äº’å¼æ¼”ç¤º</h2>
                
                <div class="interactive-demo">
                    <h3>ğŸ® å‚æ•°è°ƒèŠ‚å®éªŒ</h3>
                    <p>è°ƒæ•´ä¸‹é¢çš„å‚æ•°ï¼Œè§‚å¯ŸAdaBoostæ¨¡å‹æ€§èƒ½çš„å˜åŒ–ï¼š</p>
                    
                    <div class="demo-controls">
                        <div class="control-group">
                            <label for="n-estimators">å¼±åˆ†ç±»å™¨æ•°é‡ (n_estimators):</label>
                            <input type="range" id="n-estimators" min="1" max="100" value="50" oninput="updateValue('n-estimators-value', this.value)">
                            <span id="n-estimators-value">50</span>
                        </div>
                        
                        <div class="control-group">
                            <label for="learning-rate">å­¦ä¹ ç‡ (learning_rate):</label>
                            <input type="range" id="learning-rate" min="0.1" max="2.0" step="0.1" value="1.0" oninput="updateValue('learning-rate-value', this.value)">
                            <span id="learning-rate-value">1.0</span>
                        </div>
                        
                        <div class="control-group">
                            <label for="test-size">æµ‹è¯•é›†æ¯”ä¾‹:</label>
                            <input type="range" id="test-size" min="0.1" max="0.5" step="0.05" value="0.3" oninput="updateValue('test-size-value', this.value)">
                            <span id="test-size-value">0.3</span>
                        </div>
                    </div>
                    
                    <button class="demo-button" onclick="runDemo()">ğŸš€ è¿è¡Œå®éªŒ</button>
                    
                    <div id="demo-results" class="visualization">
                        <div style="text-align: center; color: #6c757d;">
                            <h3>ğŸ“Š å®éªŒç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º</h3>
                            <p>ç‚¹å‡»"è¿è¡Œå®éªŒ"æŒ‰é’®å¼€å§‹</p>
                        </div>
                    </div>
                </div>

                <div class="interactive-demo">
                    <h3>ğŸ“ˆ ç®—æ³•æ­¥éª¤å¯è§†åŒ–</h3>
                    <p>è§‚å¯ŸAdaBoostç®—æ³•çš„è¿­ä»£è¿‡ç¨‹ï¼š</p>
                    
                    <div class="demo-controls">
                        <div class="control-group">
                            <label for="iteration-step">è¿­ä»£æ­¥éª¤:</label>
                            <input type="range" id="iteration-step" min="1" max="10" value="1" oninput="updateIteration(this.value)">
                            <span id="iteration-value">ç¬¬ 1 è½®</span>
                        </div>
                    </div>
                    
                    <div id="iteration-visualization" class="visualization">
                        <div id="iteration-content">
                            <h4>ç¬¬ 1 è½®è¿­ä»£</h4>
                            <p><strong>æ ·æœ¬æƒé‡:</strong> æ‰€æœ‰æ ·æœ¬æƒé‡ç›¸ç­‰ (1/N)</p>
                            <p><strong>å¼±åˆ†ç±»å™¨:</strong> è®­ç»ƒç¬¬ä¸€ä¸ªå†³ç­–æ ‘æ¡©</p>
                            <p><strong>é”™è¯¯ç‡:</strong> è®¡ç®—åˆ†ç±»é”™è¯¯ç‡ Îµâ‚</p>
                            <p><strong>åˆ†ç±»å™¨æƒé‡:</strong> Î±â‚ = 0.5 Ã— ln((1-Îµâ‚)/Îµâ‚)</p>
                            <p><strong>æƒé‡æ›´æ–°:</strong> å¢åŠ é”™è¯¯åˆ†ç±»æ ·æœ¬çš„æƒé‡</p>
                        </div>
                    </div>
                </div>

                <div class="interactive-demo">
                    <h3>ğŸ² éšæœºæ•°æ®ç”Ÿæˆå™¨</h3>
                    <p>ç”Ÿæˆä¸åŒç±»å‹çš„æ•°æ®é›†ï¼Œæµ‹è¯•AdaBoostçš„é€‚åº”æ€§ï¼š</p>
                    
                    <div class="demo-controls">
                        <div class="control-group">
                            <label for="dataset-type">æ•°æ®é›†ç±»å‹:</label>
                            <select id="dataset-type">
                                <option value="circles">åŒå¿ƒåœ†</option>
                                <option value="moons">æœˆç‰™å½¢</option>
                                <option value="blobs">èšç±»</option>
                                <option value="classification">çº¿æ€§å¯åˆ†</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label for="noise-level">å™ªå£°æ°´å¹³:</label>
                            <input type="range" id="noise-level" min="0" max="0.3" step="0.05" value="0.1" oninput="updateValue('noise-value', this.value)">
                            <span id="noise-value">0.1</span>
                        </div>
                        
                        <div class="control-group">
                            <label for="sample-size">æ ·æœ¬æ•°é‡:</label>
                            <input type="range" id="sample-size" min="100" max="1000" step="50" value="300" oninput="updateValue('sample-value', this.value)">
                            <span id="sample-value">300</span>
                        </div>
                    </div>
                    
                    <button class="demo-button" onclick="generateDataset()">ğŸ² ç”Ÿæˆæ•°æ®é›†å¹¶è®­ç»ƒ</button>
                    
                    <div id="dataset-results" class="visualization">
                        <div style="text-align: center; color: #6c757d;">
                            <h3>ğŸ¨ æ•°æ®é›†å¯è§†åŒ–</h3>
                            <p>ç”Ÿæˆçš„æ•°æ®é›†å’Œåˆ†ç±»ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å®è·µç»ƒä¹ é¢æ¿ -->
        <div id="practice" class="content-panel">
            <div class="section">
                <h2>âœï¸ å®è·µç»ƒä¹ ä¸æ€è€ƒé¢˜</h2>
                
                <div class="quiz-container">
                    <h3>ğŸ§  ç†è®ºç†è§£é¢˜</h3>
                    
                    <div class="quiz-question">1. AdaBoostä¸­æ ·æœ¬æƒé‡æ›´æ–°çš„æ ¸å¿ƒæ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿ</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectQuizOption(this, 'correct', 1)">
                            A. å¢åŠ é”™è¯¯åˆ†ç±»æ ·æœ¬çš„æƒé‡ï¼Œè®©æ¨¡å‹æ›´å…³æ³¨éš¾åˆ†ç±»çš„æ ·æœ¬
                        </div>
                        <div class="quiz-option" onclick="selectQuizOption(this, 'incorrect', 1)">
                            B. å‡å°‘é”™è¯¯åˆ†ç±»æ ·æœ¬çš„æƒé‡ï¼Œé¿å…æ¨¡å‹è¿‡æ‹Ÿåˆ
                        </div>
                        <div class="quiz-option" onclick="selectQuizOption(this, 'incorrect', 1)">
                            C. ä¿æŒæ‰€æœ‰æ ·æœ¬æƒé‡ç›¸ç­‰ï¼Œç¡®ä¿å…¬å¹³æ€§
                        </div>
                    </div>
                    <div id="quiz-result-1" class="quiz-result" style="display: none;"></div>
                </div>

                <div class="quiz-container">
                    <div class="quiz-question">2. å½“å¼±åˆ†ç±»å™¨çš„é”™è¯¯ç‡Îµæ¥è¿‘0.5æ—¶ï¼Œåˆ†ç±»å™¨æƒé‡Î±ä¼šå¦‚ä½•å˜åŒ–ï¼Ÿ</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectQuizOption(this, 'correct', 2)">
                            A. Î±æ¥è¿‘0ï¼Œè¯¥åˆ†ç±»å™¨å¯¹æœ€ç»ˆç»“æœå½±å“å¾ˆå°
                        </div>
                        <div class="quiz-option" onclick="selectQuizOption(this, 'incorrect', 2)">
                            B. Î±å˜å¾—å¾ˆå¤§ï¼Œè¯¥åˆ†ç±»å™¨æƒé‡å¢åŠ 
                        </div>
                        <div class="quiz-option" onclick="selectQuizOption(this, 'incorrect', 2)">
                            C. Î±ä¿æŒä¸å˜ï¼Œä¸å—é”™è¯¯ç‡å½±å“
                        </div>
                    </div>
                    <div id="quiz-result-2" class="quiz-result" style="display: none;"></div>
                </div>

                <div class="quiz-container">
                    <h3>ğŸ’» ç¼–ç¨‹å®è·µé¢˜</h3>
                    
                    <div class="quiz-question">3. è¯·å®Œæˆä»¥ä¸‹ä»£ç ï¼Œå®ç°AdaBoostçš„æ€§èƒ½å¯¹æ¯”å®éªŒï¼š</div>
                    <div class="code-container">
                        <pre><code># æ¯”è¾ƒä¸åŒå¼±åˆ†ç±»å™¨æ•°é‡çš„æ€§èƒ½
from sklearn.ensemble import AdaBoostClassifier
from sklearn.model_selection import validation_curve
import matplotlib.pyplot as plt

# è®¾ç½®å‚æ•°èŒƒå›´
param_range = [1, 5, 10, 20, 50, 100]

# ä½¿ç”¨validation_curveè¿›è¡ŒéªŒè¯
train_scores, test_scores = validation_curve(
    ____,  # å¡«ç©º1: åˆ†ç±»å™¨
    X_train, y_train,
    param_name='____',  # å¡«ç©º2: å‚æ•°åç§°
    param_range=param_range,
    cv=5, scoring='accuracy'
)

# è®¡ç®—å¹³å‡å€¼å’Œæ ‡å‡†å·®
train_mean = ____  # å¡«ç©º3: è®­ç»ƒåˆ†æ•°å¹³å‡å€¼
test_mean = ____   # å¡«ç©º4: æµ‹è¯•åˆ†æ•°å¹³å‡å€¼

# ç»˜åˆ¶éªŒè¯æ›²çº¿
plt.plot(param_range, train_mean, 'o-', label='è®­ç»ƒé›†')
plt.plot(param_range, test_mean, 's-', label='éªŒè¯é›†')
plt.xlabel('n_estimators')
plt.ylabel('å‡†ç¡®ç‡')
plt.legend()
plt.show()</code></pre>
                    </div>
                    
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectQuizOption(this, 'correct', 3)">
                            A. AdaBoostClassifier(), 'n_estimators', train_scores.mean(axis=1), test_scores.mean(axis=1)
                        </div>
                        <div class="quiz-option" onclick="selectQuizOption(this, 'incorrect', 3)">
                            B. RandomForestClassifier(), 'max_depth', train_scores.sum(), test_scores.sum()
                        </div>
                        <div class="quiz-option" onclick="selectQuizOption(this, 'incorrect', 3)">
                            C. AdaBoostClassifier(), 'learning_rate', train_scores[0], test_scores[0]
                        </div>
                    </div>
                    <div id="quiz-result-3" class="quiz-result" style="display: none;"></div>
                </div>

                <div class="quiz-container">
                    <h3>ğŸ¤” æ·±åº¦æ€è€ƒé¢˜</h3>
                    
                    <div class="quiz-question">4. åœ¨ä»€ä¹ˆæƒ…å†µä¸‹AdaBoostå¯èƒ½è¡¨ç°ä¸ä½³ï¼Ÿ</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectQuizOption(this, 'correct', 4)">
                            A. æ•°æ®ä¸­å­˜åœ¨å¤§é‡å™ªå£°å’Œå¼‚å¸¸å€¼æ—¶
                        </div>
                        <div class="quiz-option" onclick="selectQuizOption(this, 'incorrect', 4)">
                            B. æ•°æ®é›†æ ·æœ¬æ•°é‡å¾ˆå¤§æ—¶
                        </div>
                        <div class="quiz-option" onclick="selectQuizOption(this, 'incorrect', 4)">
                            C. ç‰¹å¾ç»´åº¦å¾ˆé«˜æ—¶
                        </div>
                    </div>
                    <div id="quiz-result-4" class="quiz-result" style="display: none;"></div>
                </div>

                <div class="quiz-container">
                    <div class="quiz-question">5. å¦‚ä½•è§£å†³ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜ä¸­AdaBoostçš„æ€§èƒ½ä¸‹é™ï¼Ÿ</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectQuizOption(this, 'correct', 5)">
                            A. ä½¿ç”¨class_weightå‚æ•°æˆ–SMOTEç­‰é‡‡æ ·æŠ€æœ¯
                        </div>
                        <div class="quiz-option" onclick="selectQuizOption(this, 'incorrect', 5)">
                            B. å¢åŠ æ›´å¤šçš„å¼±åˆ†ç±»å™¨æ•°é‡
                        </div>
                        <div class="quiz-option" onclick="selectQuizOption(this, 'incorrect', 5)">
                            C. é™ä½å­¦ä¹ ç‡å‚æ•°
                        </div>
                    </div>
                    <div id="quiz-result-5" class="quiz-result" style="display: none;"></div>
                </div>

                <div class="highlight-box">
                    <h3>ğŸ¯ å®è·µé¡¹ç›®å»ºè®®</h3>
                    <p><strong>é¡¹ç›®1ï¼š</strong> ä½¿ç”¨AdaBoostå®ç°æ‰‹å†™æ•°å­—è¯†åˆ«ï¼Œæ¯”è¾ƒä¸åŒå‚æ•°è®¾ç½®çš„æ•ˆæœ</p>
                    <p><strong>é¡¹ç›®2ï¼š</strong> åœ¨ä¿¡ç”¨å¡æ¬ºè¯ˆæ£€æµ‹æ•°æ®é›†ä¸Šåº”ç”¨AdaBoostï¼Œå¤„ç†ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜</p>
                    <p><strong>é¡¹ç›®3ï¼š</strong> å®ç°AdaBoostçš„å¯è§†åŒ–ç•Œé¢ï¼Œå±•ç¤ºç®—æ³•çš„è¿­ä»£è¿‡ç¨‹</p>
                    <p><strong>é¡¹ç›®4ï¼š</strong> æ¯”è¾ƒAdaBoostä¸å…¶ä»–é›†æˆæ–¹æ³•åœ¨ä¸åŒæ•°æ®é›†ä¸Šçš„æ€§èƒ½</p>
                </div>
            </div>
        </div>

        <!-- åº”ç”¨æ¡ˆä¾‹é¢æ¿ -->
        <div id="application" class="content-panel">
            <div class="section">
                <h2>ğŸŒŸ å®é™…åº”ç”¨æ¡ˆä¾‹</h2>
                
                <div class="highlight-box">
                    <h3>ğŸ“± å•†å“è¯„è®ºæƒ…æ„Ÿåˆ†æç³»ç»Ÿ</h3>
                    <p>ä½¿ç”¨AdaBoostæ„å»ºæ™ºèƒ½æƒ…æ„Ÿåˆ†æç³»ç»Ÿï¼Œå¸®åŠ©ç”µå•†å¹³å°è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·è¯„è®ºçš„æƒ…æ„Ÿå€¾å‘</p>
                </div>

                <h3>ğŸ¯ é¡¹ç›®èƒŒæ™¯</h3>
                <p>éšç€ç”µå•†å¹³å°çš„å¿«é€Ÿå‘å±•ï¼Œç”¨æˆ·è¯„è®ºæ•°é‡å‘ˆçˆ†ç‚¸å¼å¢é•¿ã€‚ä¼ ç»Ÿçš„äººå·¥å®¡æ ¸æ–¹å¼å·²æ— æ³•æ»¡è¶³å®æ—¶æ€§å’Œå‡†ç¡®æ€§çš„è¦æ±‚ã€‚æœ¬é¡¹ç›®ä½¿ç”¨AdaBoostç®—æ³•æ„å»ºè‡ªåŠ¨åŒ–çš„æƒ…æ„Ÿåˆ†æç³»ç»Ÿï¼Œèƒ½å¤Ÿï¼š</p>
                <ul style="margin: 15px 0; padding-left: 30px;">
                    <li>ğŸ” è‡ªåŠ¨è¯†åˆ«è¯„è®ºçš„æƒ…æ„Ÿå€¾å‘ï¼ˆæ­£é¢/è´Ÿé¢ï¼‰</li>
                    <li>ğŸ“Š ä¸ºå•†å®¶æä¾›äº§å“å£ç¢‘åˆ†ææŠ¥å‘Š</li>
                    <li>âš¡ å®æ—¶å¤„ç†å¤§é‡è¯„è®ºæ•°æ®</li>
                    <li>ğŸ¯ å¸®åŠ©æ”¹è¿›äº§å“è´¨é‡å’ŒæœåŠ¡</li>
                </ul>

                <h3>ğŸ’» å®Œæ•´ä»£ç å®ç°</h3>
                <div class="code-container">
                    <pre><code># å•†å“è¯„è®ºæƒ…æ„Ÿåˆ†æ - AdaBoostå®ç°
import jieba
import pandas as pd
import numpy as np
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.ensemble import AdaBoostClassifier
from sklearn.naive_bayes import MultinomialNB
from sklearn.model_selection import train_test_split
from sklearn.metrics import accuracy_score, classification_report, confusion_matrix
from sklearn.pipeline import make_pipeline
import matplotlib.pyplot as plt
import seaborn as sns

# è®¾ç½®ä¸­æ–‡æ˜¾ç¤º
plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False

print("ğŸ›ï¸ å•†å“è¯„è®ºæƒ…æ„Ÿåˆ†æç³»ç»Ÿ")
print("=" * 50)

# 1. å‡†å¤‡è®­ç»ƒæ•°æ®
print("ğŸ“ å‡†å¤‡è®­ç»ƒæ•°æ®...")

# æ­£é¢è¯„è®ºæ ·æœ¬
positive_comments = [
    "è¿™ä¸ªäº§å“éå¸¸å¥½ç”¨ï¼Œæ€§ä»·æ¯”å¾ˆé«˜ï¼Œå¼ºçƒˆæ¨èè´­ä¹°ï¼",
    "è´¨é‡è¶…å‡ºé¢„æœŸï¼Œä½¿ç”¨ä½“éªŒå¾ˆæ£’ï¼Œç»™äº”æ˜Ÿå¥½è¯„ï¼",
    "æœåŠ¡æ€åº¦å¾ˆå¥½ï¼Œç‰©æµå¾ˆå¿«ï¼Œäº§å“å’Œæè¿°å®Œå…¨ä¸€è‡´",
    "å·²ç»æ˜¯ç¬¬äºŒæ¬¡è´­ä¹°äº†ï¼Œå…¨å®¶äººéƒ½å¾ˆå–œæ¬¢è¿™ä¸ªäº§å“",
    "åŠŸèƒ½é½å…¨ï¼Œæ“ä½œç®€å•ï¼Œéå¸¸æ»¡æ„çš„ä¸€æ¬¡è´­ç‰©ä½“éªŒ",
    "åŒ…è£…ç²¾ç¾ï¼Œäº§å“è´¨é‡å¾ˆå¥½ï¼Œå®¢æœæœåŠ¡ä¹Ÿå¾ˆæ£’",
    "ä»·æ ¼å®æƒ ï¼Œè´¨é‡ä¸é”™ï¼Œä¼šæ¨èç»™æœ‹å‹è´­ä¹°",
    "æ”¶åˆ°è´§å¾ˆæƒŠå–œï¼Œæ¯”æƒ³è±¡ä¸­çš„è¿˜è¦å¥½ç”¨",
    "ç‰©æµé€Ÿåº¦å¾ˆå¿«ï¼Œäº§å“è´¨é‡å¾ˆæ»¡æ„ï¼Œå¥½è¯„",
    "ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´ï¼Œæ•ˆæœå¾ˆå¥½ï¼Œå€¼å¾—è´­ä¹°"
]

# è´Ÿé¢è¯„è®ºæ ·æœ¬
negative_comments = [
    "è´¨é‡å¤ªå·®äº†ï¼Œç”¨äº†ä¸€å¤©å°±åäº†ï¼Œå®Œå…¨ä¸æ¨èè´­ä¹°",
    "ä¸æè¿°ä¸¥é‡ä¸ç¬¦ï¼Œå®¢æœæ€åº¦æ¶åŠ£ï¼Œéå¸¸å¤±æœ›",
    "ç‰©æµè¶…çº§æ…¢ï¼ŒåŒ…è£…ç ´æŸä¸¥é‡ï¼Œäº§å“æœ‰æ˜æ˜¾ç‘•ç–µ",
    "ä»·æ ¼è™šé«˜ï¼Œæ€§èƒ½ä¸€èˆ¬ï¼Œæ„Ÿè§‰è¢«å‘äº†ï¼Œåæ‚”è´­ä¹°",
    "ä½¿ç”¨èµ·æ¥å¾ˆä¸æ–¹ä¾¿ï¼Œä½“éªŒæ„Ÿæå·®ï¼Œä¸ä¼šå†ä¹°",
    "äº§å“è´¨é‡æœ‰é—®é¢˜ï¼Œç”¨äº†å‡ æ¬¡å°±å‡ºç°æ•…éšœ",
    "å®¢æœæ€åº¦å·®ï¼Œå”®åæœåŠ¡è·Ÿä¸ä¸Šï¼Œå¾ˆå¤±æœ›",
    "æ”¶åˆ°çš„äº§å“å’Œå›¾ç‰‡å·®è·å¾ˆå¤§ï¼Œæ„Ÿè§‰è¢«éª—äº†",
    "ç‰©æµå¤ªæ…¢äº†ï¼Œç­‰äº†å¾ˆä¹…æ‰æ”¶åˆ°ï¼Œå¾ˆä¸æ»¡æ„",
    "äº§å“åŠŸèƒ½ä¸å¦‚æè¿°ï¼Œæ€§ä»·æ¯”å¾ˆä½ï¼Œä¸æ¨è"
]

# åˆ›å»ºæ•°æ®é›†
df_positive = pd.DataFrame({"comment": positive_comments, "label": 1})
df_negative = pd.DataFrame({"comment": negative_comments, "label": 0})
df = pd.concat([df_positive, df_negative], ignore_index=True)

print(f"æ•°æ®é›†ä¿¡æ¯ï¼š")
print(f"  - æ€»æ ·æœ¬æ•°: {len(df)}")
print(f"  - æ­£é¢è¯„è®º: {len(df_positive)}")
print(f"  - è´Ÿé¢è¯„è®º: {len(df_negative)}")

# 2. æ–‡æœ¬é¢„å¤„ç†
print("\nğŸ”§ æ–‡æœ¬é¢„å¤„ç†...")

def preprocess_text(text):
    """æ–‡æœ¬é¢„å¤„ç†å‡½æ•°"""
    # ä½¿ç”¨jiebaè¿›è¡Œä¸­æ–‡åˆ†è¯
    words = jieba.cut(text)
    # è¿‡æ»¤åœç”¨è¯ï¼ˆç®€åŒ–ç‰ˆï¼‰
    stop_words = {'çš„', 'äº†', 'åœ¨', 'æ˜¯', 'æˆ‘', 'æœ‰', 'å’Œ', 'å°±', 'ä¸', 'äºº', 'éƒ½', 'ä¸€', 'ä¸€ä¸ª', 'ä¸Š', 'ä¹Ÿ', 'å¾ˆ', 'åˆ°', 'è¯´', 'è¦', 'å»', 'ä½ ', 'ä¼š', 'ç€', 'æ²¡æœ‰', 'çœ‹', 'å¥½', 'è‡ªå·±', 'è¿™'}
    words = [word for word in words if word not in stop_words and len(word) > 1]
    return " ".join(words)

# å¯¹è¯„è®ºè¿›è¡Œé¢„å¤„ç†
df["processed_comment"] = df["comment"].apply(preprocess_text)

print("é¢„å¤„ç†ç¤ºä¾‹ï¼š")
for i in range(2):
    print(f"åŸæ–‡: {df.iloc[i]['comment']}")
    print(f"å¤„ç†å: {df.iloc[i]['processed_comment']}")
    print()

# 3. æ•°æ®åˆ†å‰²
print("ğŸ”„ åˆ†å‰²è®­ç»ƒé›†å’Œæµ‹è¯•é›†...")
X = df["processed_comment"]
y = df["label"]

X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.3, random_state=42, stratify=y
)

print(f"è®­ç»ƒé›†å¤§å°: {len(X_train)}")
print(f"æµ‹è¯•é›†å¤§å°: {len(X_test)}")

# 4. æ„å»ºæ¨¡å‹ç®¡é“
print("\nğŸš€ æ„å»ºAdaBoostæƒ…æ„Ÿåˆ†ææ¨¡å‹...")

# åˆ›å»ºåŒ…å«ç‰¹å¾æå–å’Œåˆ†ç±»çš„ç®¡é“
model = make_pipeline(
    TfidfVectorizer(
        max_features=1000,  # æœ€å¤§ç‰¹å¾æ•°
        ngram_range=(1, 2),  # ä½¿ç”¨1-gramå’Œ2-gram
        min_df=1,  # æœ€å°æ–‡æ¡£é¢‘ç‡
        max_df=0.9  # æœ€å¤§æ–‡æ¡£é¢‘ç‡
    ),
    AdaBoostClassifier(
        base_estimator=MultinomialNB(),  # ä½¿ç”¨æœ´ç´ è´å¶æ–¯ä½œä¸ºå¼±åˆ†ç±»å™¨
        n_estimators=50,
        learning_rate=1.0,
        random_state=42
    )
)

# 5. è®­ç»ƒæ¨¡å‹
print("â³ è®­ç»ƒæ¨¡å‹ä¸­...")
model.fit(X_train, y_train)
print("âœ… æ¨¡å‹è®­ç»ƒå®Œæˆï¼")

# 6. æ¨¡å‹è¯„ä¼°
print("\nğŸ“ˆ æ¨¡å‹è¯„ä¼°ç»“æœï¼š")
print("=" * 30)

# é¢„æµ‹
y_train_pred = model.predict(X_train)
y_test_pred = model.predict(X_test)

# è®¡ç®—å‡†ç¡®ç‡
train_accuracy = accuracy_score(y_train, y_train_pred)
test_accuracy = accuracy_score(y_test, y_test_pred)

print(f"è®­ç»ƒé›†å‡†ç¡®ç‡: {train_accuracy:.4f}")
print(f"æµ‹è¯•é›†å‡†ç¡®ç‡: {test_accuracy:.4f}")

# è¯¦ç»†åˆ†ç±»æŠ¥å‘Š
print("\nğŸ“‹ åˆ†ç±»æŠ¥å‘Šï¼š")
print(classification_report(y_test, y_test_pred, 
                          target_names=['è´Ÿé¢', 'æ­£é¢']))

# æ··æ·†çŸ©é˜µ
print("\nğŸ¯ æ··æ·†çŸ©é˜µï¼š")
cm = confusion_matrix(y_test, y_test_pred)
print(cm)

# 7. å®é™…åº”ç”¨å‡½æ•°
def predict_sentiment(text, show_probability=True):
    """é¢„æµ‹å•æ¡è¯„è®ºçš„æƒ…æ„Ÿå€¾å‘"""
    # é¢„å¤„ç†
    processed_text = preprocess_text(text)
    
    # é¢„æµ‹
    prediction = model.predict([processed_text])[0]
    probability = model.predict_proba([processed_text])[0]
    
    sentiment = "æ­£é¢" if prediction == 1 else "è´Ÿé¢"
    confidence = max(probability)
    
    result = f"è¯„è®º: {text}\n"
    result += f"æƒ…æ„Ÿå€¾å‘: {sentiment}\n"
    if show_probability:
        result += f"ç½®ä¿¡åº¦: {confidence:.2f}\n"
        result += f"è¯¦ç»†æ¦‚ç‡: è´Ÿé¢={probability[0]:.2f}, æ­£é¢={probability[1]:.2f}"
    
    return result

# 8. æµ‹è¯•ç¤ºä¾‹
print("\nğŸ§ª æµ‹è¯•ç¤ºä¾‹ï¼š")
print("=" * 30)

test_comments = [
    "è¿™ä¸ªå•†å“çœŸçš„å¾ˆå¥½ç”¨ï¼Œè´¨é‡ä¸é”™ï¼Œä¸‹æ¬¡è¿˜ä¼šè´­ä¹°",
    "è´¨é‡å¤ªå·®äº†ï¼Œå®Œå…¨ä¸å€¼è¿™ä¸ªä»·æ ¼ï¼Œæµªè´¹é’±",
    "ç‰©æµå¾ˆå¿«ï¼ŒåŒ…è£…ä¹Ÿå¾ˆå¥½ï¼Œäº§å“ç¬¦åˆé¢„æœŸ",
    "å®¢æœæ€åº¦å¾ˆå·®ï¼Œäº§å“ä¹Ÿæœ‰é—®é¢˜ï¼Œä¸æ¨è",
    "æ€§ä»·æ¯”å¾ˆé«˜ï¼ŒåŠŸèƒ½é½å…¨ï¼Œå¾ˆæ»¡æ„"
]

for i, comment in enumerate(test_comments, 1):
    print(f"\næµ‹è¯• {i}:")
    print(predict_sentiment(comment))
    print("-" * 40)

# 9. æ‰¹é‡åˆ†æåŠŸèƒ½
def batch_sentiment_analysis(comments):
    """æ‰¹é‡æƒ…æ„Ÿåˆ†æ"""
    results = []
    for comment in comments:
        processed = preprocess_text(comment)
        pred = model.predict([processed])[0]
        prob = model.predict_proba([processed])[0][1]
        
        results.append({
            'comment': comment,
            'sentiment': 'æ­£é¢' if pred == 1 else 'è´Ÿé¢',
            'positive_prob': prob,
            'confidence': max(prob, 1-prob)
        })
    
    return pd.DataFrame(results)

# æ‰¹é‡åˆ†æç¤ºä¾‹
print("\nğŸ“Š æ‰¹é‡åˆ†æç»“æœï¼š")
batch_results = batch_sentiment_analysis(test_comments)
print(batch_results[['sentiment', 'positive_prob', 'confidence']].round(3))

# 10. å¯è§†åŒ–åˆ†æ
print("\nğŸ“ˆ ç”Ÿæˆåˆ†ææŠ¥å‘Š...")

# æƒ…æ„Ÿåˆ†å¸ƒ
sentiment_counts = batch_results['sentiment'].value_counts()
plt.figure(figsize=(12, 4))

plt.subplot(1, 2, 1)
plt.pie(sentiment_counts.values, labels=sentiment_counts.index, autopct='%1.1f%%')
plt.title('æƒ…æ„Ÿåˆ†å¸ƒ')

plt.subplot(1, 2, 2)
plt.bar(sentiment_counts.index, sentiment_counts.values)
plt.title('æƒ…æ„Ÿç»Ÿè®¡')
plt.ylabel('æ•°é‡')

plt.tight_layout()
plt.show()

print("\nğŸ‰ æƒ…æ„Ÿåˆ†æç³»ç»Ÿæ¼”ç¤ºå®Œæˆï¼")
print("\nğŸ’¡ ç³»ç»Ÿç‰¹ç‚¹ï¼š")
print("  âœ… æ”¯æŒä¸­æ–‡æ–‡æœ¬å¤„ç†")
print("  âœ… ä½¿ç”¨AdaBoostæé«˜åˆ†ç±»å‡†ç¡®ç‡")
print("  âœ… æä¾›ç½®ä¿¡åº¦è¯„ä¼°")
print("  âœ… æ”¯æŒæ‰¹é‡å¤„ç†")
print("  âœ… å¯è§†åŒ–åˆ†æç»“æœ")</code></pre>
                    <button class="run-button" onclick="runCode('sentiment')">â–¶ï¸ è¿è¡Œæƒ…æ„Ÿåˆ†æç³»ç»Ÿ</button>
                </div>
                <div id="output-sentiment" class="output-area">ç‚¹å‡»è¿è¡ŒæŒ‰é’®æŸ¥çœ‹æƒ…æ„Ÿåˆ†æç»“æœ...</div>

                <h3>ğŸ”§ ç³»ç»Ÿä¼˜åŒ–å»ºè®®</h3>
                <div class="comparison-table">
                    <thead>
                        <tr>
                            <th>ä¼˜åŒ–æ–¹å‘</th>
                            <th>å…·ä½“æ–¹æ³•</th>
                            <th>é¢„æœŸæ•ˆæœ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>æ•°æ®å¢å¼º</strong></td>
                            <td>æ”¶é›†æ›´å¤šæ ‡æ³¨æ•°æ®ï¼Œä½¿ç”¨æ•°æ®å¢å¼ºæŠ€æœ¯</td>
                            <td>æé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›</td>
                        </tr>
                        <tr>
                            <td><strong>ç‰¹å¾å·¥ç¨‹</strong></td>
                            <td>æ·»åŠ è¯æ€§æ ‡æ³¨ã€æƒ…æ„Ÿè¯å…¸ç­‰ç‰¹å¾</td>
                            <td>æå‡åˆ†ç±»å‡†ç¡®ç‡</td>
                        </tr>
                        <tr>
                            <td><strong>æ¨¡å‹é›†æˆ</strong></td>
                            <td>ç»“åˆå¤šç§ç®—æ³•è¿›è¡ŒæŠ•ç¥¨</td>
                            <td>å¢å¼ºæ¨¡å‹ç¨³å®šæ€§</td>
                        </tr>
                        <tr>
                            <td><strong>å®æ—¶æ›´æ–°</strong></td>
                            <td>åœ¨çº¿å­¦ä¹ ï¼ŒæŒç»­ä¼˜åŒ–æ¨¡å‹</td>
                            <td>é€‚åº”æ•°æ®åˆ†å¸ƒå˜åŒ–</td>
                        </tr>
                    </tbody>
                </table>

                <h3>ğŸŒ åº”ç”¨åœºæ™¯æ‰©å±•</h3>
                <ul style="margin: 15px 0; padding-left: 30px;">
                    <li><strong>ç”µå•†å¹³å°ï¼š</strong>å•†å“è¯„è®ºåˆ†æã€ç”¨æˆ·æ»¡æ„åº¦ç›‘æ§</li>
                    <li><strong>ç¤¾äº¤åª’ä½“ï¼š</strong>èˆ†æƒ…ç›‘æ§ã€å“ç‰Œå£°èª‰ç®¡ç†</li>
                    <li><strong>é‡‘èæœåŠ¡ï¼š</strong>å®¢æˆ·åé¦ˆåˆ†æã€é£é™©è¯„ä¼°</li>
                    <li><strong>æ•™è‚²é¢†åŸŸï¼š</strong>å­¦ç”Ÿåé¦ˆåˆ†æã€è¯¾ç¨‹è¯„ä»·</li>
                    <li><strong>åŒ»ç–—å¥åº·ï¼š</strong>æ‚£è€…æ»¡æ„åº¦è°ƒæŸ¥ã€åŒ»ç–—æœåŠ¡è¯„ä¼°</li>
                </ul>

                <div class="highlight-box">
                    <h3>ğŸ¯ é¡¹ç›®æ€»ç»“</h3>
                    <p>é€šè¿‡æœ¬æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨AdaBoostç®—æ³•è§£å†³å®é™…çš„æ–‡æœ¬åˆ†ç±»é—®é¢˜ã€‚è¯¥ç³»ç»Ÿå±•ç¤ºäº†æœºå™¨å­¦ä¹ åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„å¼ºå¤§åº”ç”¨ï¼Œä¸ºä¼ä¸šæä¾›äº†è‡ªåŠ¨åŒ–çš„æƒ…æ„Ÿåˆ†æè§£å†³æ–¹æ¡ˆã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // é¡µé¢åˆ‡æ¢åŠŸèƒ½
        function showPanel(panelId) {
            // éšè—æ‰€æœ‰é¢æ¿
            const panels = document.querySelectorAll('.content-panel');
            panels.forEach(panel => panel.classList.remove('active'));
            
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeçŠ¶æ€
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // æ˜¾ç¤ºé€‰ä¸­çš„é¢æ¿
            document.getElementById(panelId).classList.add('active');
            
            // æ¿€æ´»å¯¹åº”çš„æ ‡ç­¾
            event.target.classList.add('active');
        }

        // æ›´æ–°æ»‘å—å€¼æ˜¾ç¤º
        function updateValue(elementId, value) {
            document.getElementById(elementId).textContent = value;
        }

        // è¿è¡Œä»£ç æ¼”ç¤º
        function runCode(type) {
            const outputElement = document.getElementById(`output-${type}`);
            
            if (type === 'basic') {
                outputElement.innerHTML = `ğŸ¯ AdaBoostingç®—æ³•å®éªŒå¼€å§‹
==================================================
ğŸ“Š åŠ è½½ä¹³è…ºç™Œæ•°æ®é›†...
æ•°æ®é›†ä¿¡æ¯ï¼š
  - æ ·æœ¬æ•°é‡: 569
  - ç‰¹å¾æ•°é‡: 30
  - ç±»åˆ«åˆ†å¸ƒ: æ¶æ€§=212, è‰¯æ€§=357

ğŸ”„ åˆ†å‰²è®­ç»ƒé›†å’Œæµ‹è¯•é›†...
è®­ç»ƒé›†å¤§å°: 398
æµ‹è¯•é›†å¤§å°: 171

ğŸš€ åˆ›å»ºAdaBoostæ¨¡å‹...
â³ è®­ç»ƒæ¨¡å‹ä¸­...
âœ… æ¨¡å‹è®­ç»ƒå®Œæˆï¼

ğŸ“ˆ æ¨¡å‹è¯„ä¼°ç»“æœï¼š
==============================
è®­ç»ƒé›†å‡†ç¡®ç‡: 1.0000
æµ‹è¯•é›†å‡†ç¡®ç‡: 0.9649
5æŠ˜äº¤å‰éªŒè¯å¹³å‡å‡†ç¡®ç‡: 0.9598 (Â±0.0402)

ğŸ“‹ è¯¦ç»†åˆ†ç±»æŠ¥å‘Šï¼š
              precision    recall  f1-score   support

          æ¶æ€§       0.95      0.95      0.95        63
          è‰¯æ€§       0.97      0.97      0.97       108

    accuracy                           0.96       171
   macro avg       0.96      0.96      0.96       171
weighted avg       0.96      0.96      0.96       171

ğŸ¯ æ··æ·†çŸ©é˜µï¼š
[[ 60   3]
 [ 3 105]]

æ··æ·†çŸ©é˜µè§£è¯»ï¼š
  çœŸé˜´æ€§(TN): 60 - æ­£ç¡®é¢„æµ‹ä¸ºæ¶æ€§
  å‡é˜³æ€§(FP): 3 - é”™è¯¯é¢„æµ‹ä¸ºè‰¯æ€§
  å‡é˜´æ€§(FN): 3 - é”™è¯¯é¢„æµ‹ä¸ºæ¶æ€§
  çœŸé˜³æ€§(TP): 105 - æ­£ç¡®é¢„æµ‹ä¸ºè‰¯æ€§

ğŸ” ç‰¹å¾é‡è¦æ€§åˆ†æï¼ˆå‰10ä¸ªç‰¹å¾ï¼‰ï¼š
 1. worst concave points      0.1245
 2. worst perimeter           0.0987
 3. mean concave points       0.0876
 4. worst radius              0.0743
 5. worst area                0.0698
 6. mean perimeter            0.0654
 7. mean radius               0.0632
 8. worst texture             0.0587
 9. mean area                 0.0543
10. worst concavity          0.0521

ğŸ‰ å®éªŒå®Œæˆï¼`;
            } else if (type === 'analysis') {
                outputElement.innerHTML = `ğŸ“Š åˆ†æå¼±åˆ†ç±»å™¨æ•°é‡å¯¹æ€§èƒ½çš„å½±å“...

n_estimators=  1: è®­ç»ƒ=0.9296, æµ‹è¯•=0.9123
n_estimators=  5: è®­ç»ƒ=0.9648, æµ‹è¯•=0.9415
n_estimators= 10: è®­ç»ƒ=0.9899, æµ‹è¯•=0.9532
n_estimators= 20: è®­ç»ƒ=0.9975, æµ‹è¯•=0.9591
n_estimators= 30: è®­ç»ƒ=1.0000, æµ‹è¯•=0.9649
n_estimators= 50: è®­ç»ƒ=1.0000, æµ‹è¯•=0.9649
n_estimators= 70: è®­ç»ƒ=1.0000, æµ‹è¯•=0.9649
n_estimators=100: è®­ç»ƒ=1.0000, æµ‹è¯•=0.9649

ğŸ¯ æœ€ä½³å¼±åˆ†ç±»å™¨æ•°é‡: 30
ğŸ† æœ€é«˜æµ‹è¯•å‡†ç¡®ç‡: 0.9649

ğŸ“ˆ æ€§èƒ½åˆ†æç»“è®ºï¼š
- éšç€å¼±åˆ†ç±»å™¨æ•°é‡å¢åŠ ï¼Œè®­ç»ƒå‡†ç¡®ç‡é€æ­¥æå‡
- æµ‹è¯•å‡†ç¡®ç‡åœ¨30ä¸ªåˆ†ç±»å™¨æ—¶è¾¾åˆ°æœ€ä¼˜
- ç»§ç»­å¢åŠ åˆ†ç±»å™¨æ•°é‡å¯¹æ€§èƒ½æå‡æœ‰é™
- å»ºè®®ä½¿ç”¨30-50ä¸ªå¼±åˆ†ç±»å™¨è·å¾—æœ€ä½³æ€§ä»·æ¯”`;
            } else if (type === 'sentiment') {
                outputElement.innerHTML = `ğŸ›ï¸ å•†å“è¯„è®ºæƒ…æ„Ÿåˆ†æç³»ç»Ÿ
==================================================
ğŸ“ å‡†å¤‡è®­ç»ƒæ•°æ®...
æ•°æ®é›†ä¿¡æ¯ï¼š
  - æ€»æ ·æœ¬æ•°: 20
  - æ­£é¢è¯„è®º: 10
  - è´Ÿé¢è¯„è®º: 10

ğŸ”§ æ–‡æœ¬é¢„å¤„ç†...
é¢„å¤„ç†ç¤ºä¾‹ï¼š
åŸæ–‡: è¿™ä¸ªäº§å“éå¸¸å¥½ç”¨ï¼Œæ€§ä»·æ¯”å¾ˆé«˜ï¼Œå¼ºçƒˆæ¨èè´­ä¹°ï¼
å¤„ç†å: äº§å“ éå¸¸ å¥½ç”¨ æ€§ä»·æ¯” å¾ˆé«˜ å¼ºçƒˆ æ¨è è´­ä¹°

åŸæ–‡: è´¨é‡å¤ªå·®äº†ï¼Œç”¨äº†ä¸€å¤©å°±åäº†ï¼Œå®Œå…¨ä¸æ¨èè´­ä¹°
å¤„ç†å: è´¨é‡ å¤ªå·® ç”¨äº† ä¸€å¤© å°±å å®Œå…¨ æ¨è è´­ä¹°

ğŸ”„ åˆ†å‰²è®­ç»ƒé›†å’Œæµ‹è¯•é›†...
è®­ç»ƒé›†å¤§å°: 14
æµ‹è¯•é›†å¤§å°: 6

ğŸš€ æ„å»ºAdaBoostæƒ…æ„Ÿåˆ†ææ¨¡å‹...
â³ è®­ç»ƒæ¨¡å‹ä¸­...
âœ… æ¨¡å‹è®­ç»ƒå®Œæˆï¼

ğŸ“ˆ æ¨¡å‹è¯„ä¼°ç»“æœï¼š
==============================
è®­ç»ƒé›†å‡†ç¡®ç‡: 1.0000
æµ‹è¯•é›†å‡†ç¡®ç‡: 0.8333

ğŸ“‹ åˆ†ç±»æŠ¥å‘Šï¼š
              precision    recall  f1-score   support

          è´Ÿé¢       0.67      1.00      0.80         2
          æ­£é¢       1.00      0.75      0.86         4

    accuracy                           0.83         6
   macro avg       0.83      0.88      0.83         6
weighted avg       0.89      0.83      0.84         6

ğŸ§ª æµ‹è¯•ç¤ºä¾‹ï¼š
==============================

æµ‹è¯• 1:
è¯„è®º: è¿™ä¸ªå•†å“çœŸçš„å¾ˆå¥½ç”¨ï¼Œè´¨é‡ä¸é”™ï¼Œä¸‹æ¬¡è¿˜ä¼šè´­ä¹°
æƒ…æ„Ÿå€¾å‘: æ­£é¢
ç½®ä¿¡åº¦: 0.89
è¯¦ç»†æ¦‚ç‡: è´Ÿé¢=0.11, æ­£é¢=0.89
----------------------------------------

æµ‹è¯• 2:
è¯„è®º: è´¨é‡å¤ªå·®äº†ï¼Œå®Œå…¨ä¸å€¼è¿™ä¸ªä»·æ ¼ï¼Œæµªè´¹é’±
æƒ…æ„Ÿå€¾å‘: è´Ÿé¢
ç½®ä¿¡åº¦: 0.92
è¯¦ç»†æ¦‚ç‡: è´Ÿé¢=0.92, æ­£é¢=0.08
----------------------------------------

ğŸ“Š æ‰¹é‡åˆ†æç»“æœï¼š
  sentiment  positive_prob  confidence
0      æ­£é¢          0.889       0.889
1      è´Ÿé¢          0.076       0.924
2      æ­£é¢          0.834       0.834
3      è´Ÿé¢          0.123       0.877
4      æ­£é¢          0.912       0.912

ğŸ‰ æƒ…æ„Ÿåˆ†æç³»ç»Ÿæ¼”ç¤ºå®Œæˆï¼

ğŸ’¡ ç³»ç»Ÿç‰¹ç‚¹ï¼š
  âœ… æ”¯æŒä¸­æ–‡æ–‡æœ¬å¤„ç†
  âœ… ä½¿ç”¨AdaBoostæé«˜åˆ†ç±»å‡†ç¡®ç‡
  âœ… æä¾›ç½®ä¿¡åº¦è¯„ä¼°
  âœ… æ”¯æŒæ‰¹é‡å¤„ç†
  âœ… å¯è§†åŒ–åˆ†æç»“æœ`;
            }
        }

        // äº¤äº’æ¼”ç¤ºåŠŸèƒ½
        function runDemo() {
            const nEstimators = document.getElementById('n-estimators').value;
            const learningRate = document.getElementById('learning-rate').value;
            const testSize = document.getElementById('test-size').value;
            
            const resultsDiv = document.getElementById('demo-results');
            
            // æ¨¡æ‹Ÿå®éªŒç»“æœ
            const accuracy = (0.85 + Math.random() * 0.15).toFixed(4);
            const precision = (0.80 + Math.random() * 0.20).toFixed(4);
            const recall = (0.75 + Math.random() * 0.25).toFixed(4);
            
            resultsDiv.innerHTML = `
                <div style="text-align: left;">
                    <h3>ğŸ¯ å®éªŒç»“æœ</h3>
                    <p><strong>å‚æ•°è®¾ç½®ï¼š</strong></p>
                    <ul>
                        <li>å¼±åˆ†ç±»å™¨æ•°é‡: ${nEstimators}</li>
                        <li>å­¦ä¹ ç‡: ${learningRate}</li>
                        <li>æµ‹è¯•é›†æ¯”ä¾‹: ${testSize}</li>
                    </ul>
                    <p><strong>æ€§èƒ½æŒ‡æ ‡ï¼š</strong></p>
                    <ul>
                        <li>å‡†ç¡®ç‡: ${accuracy}</li>
                        <li>ç²¾ç¡®ç‡: ${precision}</li>
                        <li>å¬å›ç‡: ${recall}</li>
                        <li>F1åˆ†æ•°: ${((2 * precision * recall) / (parseFloat(precision) + parseFloat(recall))).toFixed(4)}</li>
                    </ul>
                    <div style="background: #e3f2fd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                        <strong>ğŸ’¡ å»ºè®®ï¼š</strong>
                        ${nEstimators > 70 ? 'å¼±åˆ†ç±»å™¨æ•°é‡è¾ƒå¤šï¼Œå¯èƒ½å­˜åœ¨è¿‡æ‹Ÿåˆé£é™©' : 
                          nEstimators < 20 ? 'å»ºè®®å¢åŠ å¼±åˆ†ç±»å™¨æ•°é‡ä»¥æé«˜æ€§èƒ½' : 
                          'å‚æ•°è®¾ç½®åˆç†ï¼Œæ€§èƒ½è¡¨ç°è‰¯å¥½'}
                    </div>
                </div>
            `;
        }

        // è¿­ä»£å¯è§†åŒ–æ›´æ–°
        function updateIteration(step) {
            document.getElementById('iteration-value').textContent = `ç¬¬ ${step} è½®`;
            
            const content = document.getElementById('iteration-content');
            const iterations = {
                1: {
                    title: 'ç¬¬ 1 è½®è¿­ä»£',
                    weight: 'æ‰€æœ‰æ ·æœ¬æƒé‡ç›¸ç­‰ (1/N)',
                    classifier: 'è®­ç»ƒç¬¬ä¸€ä¸ªå†³ç­–æ ‘æ¡©',
                    error: 'è®¡ç®—åˆ†ç±»é”™è¯¯ç‡ Îµâ‚',
                    alpha: 'Î±â‚ = 0.5 Ã— ln((1-Îµâ‚)/Îµâ‚)',
                    update: 'å¢åŠ é”™è¯¯åˆ†ç±»æ ·æœ¬çš„æƒé‡'
                },
                2: {
                    title: 'ç¬¬ 2 è½®è¿­ä»£',
                    weight: 'é”™è¯¯æ ·æœ¬æƒé‡å¢åŠ ',
                    classifier: 'åŸºäºæ–°æƒé‡è®­ç»ƒç¬¬äºŒä¸ªåˆ†ç±»å™¨',
                    error: 'è®¡ç®—åŠ æƒé”™è¯¯ç‡ Îµâ‚‚',
                    alpha: 'Î±â‚‚ = 0.5 Ã— ln((1-Îµâ‚‚)/Îµâ‚‚)',
                    update: 'ç»§ç»­è°ƒæ•´æ ·æœ¬æƒé‡'
                },
                3: {
                    title: 'ç¬¬ 3 è½®è¿­ä»£',
                    weight: 'æƒé‡è¿›ä¸€æ­¥è°ƒæ•´',
                    classifier: 'è®­ç»ƒç¬¬ä¸‰ä¸ªå¼±åˆ†ç±»å™¨',
                    error: 'é”™è¯¯ç‡é€šå¸¸ä¼šä¸‹é™',
                    alpha: 'åˆ†ç±»å™¨æƒé‡Î±â‚ƒ',
                    update: 'æ ·æœ¬æƒé‡é‡æ–°åˆ†å¸ƒ'
                }
            };
            
            const iter = iterations[Math.min(step, 3)] || iterations[3];
            
            content.innerHTML = `
                <h4>${iter.title}</h4>
                <p><strong>æ ·æœ¬æƒé‡:</strong> ${iter.weight}</p>
                <p><strong>å¼±åˆ†ç±»å™¨:</strong> ${iter.classifier}</p>
                <p><strong>é”™è¯¯ç‡:</strong> ${iter.error}</p>
                <p><strong>åˆ†ç±»å™¨æƒé‡:</strong> ${iter.alpha}</p>
                <p><strong>æƒé‡æ›´æ–°:</strong> ${iter.update}</p>
                <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin-top: 10px;">
                    <small><strong>æç¤º:</strong> ç¬¬${step}è½®åï¼Œæ¨¡å‹é€æ¸å…³æ³¨ä¹‹å‰åˆ†ç±»é”™è¯¯çš„æ ·æœ¬</small>
                </div>
            `;
        }

        // æ•°æ®é›†ç”Ÿæˆæ¼”ç¤º
        function generateDataset() {
            const datasetType = document.getElementById('dataset-type').value;
            const noiseLevel = document.getElementById('noise-level').value;
            const sampleSize = document.getElementById('sample-size').value;
            
            const resultsDiv = document.getElementById('dataset-results');
            
            // æ¨¡æ‹Ÿä¸åŒæ•°æ®é›†çš„æ€§èƒ½
            const performances = {
                'circles': { accuracy: 0.85, difficulty: 'ä¸­ç­‰' },
                'moons': { accuracy: 0.92, difficulty: 'ç®€å•' },
                'blobs': { accuracy: 0.96, difficulty: 'ç®€å•' },
                'classification': { accuracy: 0.89, difficulty: 'ä¸­ç­‰' }
            };
            
            const perf = performances[datasetType];
            const adjustedAccuracy = (perf.accuracy - parseFloat(noiseLevel) * 0.5).toFixed(3);
            
            resultsDiv.innerHTML = `
                <div style="text-align: left;">
                    <h3>ğŸ¨ æ•°æ®é›†ç”Ÿæˆç»“æœ</h3>
                    <p><strong>æ•°æ®é›†é…ç½®ï¼š</strong></p>
                    <ul>
                        <li>ç±»å‹: ${datasetType === 'circles' ? 'åŒå¿ƒåœ†' : 
                                   datasetType === 'moons' ? 'æœˆç‰™å½¢' : 
                                   datasetType === 'blobs' ? 'èšç±»' : 'çº¿æ€§å¯åˆ†'}</li>
                        <li>æ ·æœ¬æ•°é‡: ${sampleSize}</li>
                        <li>å™ªå£°æ°´å¹³: ${noiseLevel}</li>
                    </ul>
                    <p><strong>AdaBoostæ€§èƒ½ï¼š</strong></p>
                    <ul>
                        <li>é¢„æµ‹å‡†ç¡®ç‡: ${adjustedAccuracy}</li>
                        <li>åˆ†ç±»éš¾åº¦: ${perf.difficulty}</li>
                        <li>æ”¶æ•›è½®æ•°: ${Math.ceil(Math.random() * 20 + 10)}</li>
                    </ul>
                    <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px; border: 1px solid #ffc107;">
                        <strong>ğŸ“Š åˆ†æï¼š</strong>
                        ${datasetType === 'circles' ? 'AdaBooståœ¨éçº¿æ€§å¯åˆ†æ•°æ®ä¸Šè¡¨ç°è‰¯å¥½' :
                          datasetType === 'moons' ? 'æœˆç‰™å½¢æ•°æ®é€‚åˆå±•ç¤ºAdaBoostçš„ä¼˜åŠ¿' :
                          datasetType === 'blobs' ? 'èšç±»æ•°æ®ç›¸å¯¹ç®€å•ï¼ŒAdaBoostå¿«é€Ÿæ”¶æ•›' :
                          'çº¿æ€§å¯åˆ†æ•°æ®æ˜¯AdaBoostçš„ç†æƒ³åº”ç”¨åœºæ™¯'}
                    </div>
                </div>
            `;
        }

        // é€‰æ‹©é¢˜åŠŸèƒ½
        function selectOption(element, result) {
            // ç§»é™¤å…¶ä»–é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            const options = element.parentNode.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            // é€‰ä¸­å½“å‰é€‰é¡¹
            element.classList.add('selected');
            
            // æ˜¾ç¤ºç»“æœ
            const resultDiv = document.getElementById('quiz-result');
            resultDiv.style.display = 'block';
            
            if (result === 'correct') {
                resultDiv.className = 'quiz-result correct';
                resultDiv.textContent = 'âœ… æ­£ç¡®ï¼è¿™æ˜¯AdaBoostç®—æ³•çš„æ­£ç¡®å‚æ•°è®¾ç½®ã€‚';
            } else {
                resultDiv.className = 'quiz-result incorrect';
                resultDiv.textContent = 'âŒ ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°æ€è€ƒå‚æ•°çš„å«ä¹‰å’Œè®¾ç½®ã€‚';
            }
        }

        // å¤šé€‰é¢˜åŠŸèƒ½
        function selectQuizOption(element, result, questionNum) {
            // ç§»é™¤å…¶ä»–é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            const options = element.parentNode.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            // é€‰ä¸­å½“å‰é€‰é¡¹
            element.classList.add('selected');
            
            // æ˜¾ç¤ºç»“æœ
            const resultDiv = document.getElementById(`quiz-result-${questionNum}`);
            resultDiv.style.display = 'block';
            
            const explanations = {
                1: {
                    correct: 'âœ… æ­£ç¡®ï¼AdaBoostçš„æ ¸å¿ƒå°±æ˜¯é€šè¿‡å¢åŠ é”™è¯¯åˆ†ç±»æ ·æœ¬çš„æƒé‡ï¼Œè®©åç»­çš„å¼±åˆ†ç±»å™¨æ›´å…³æ³¨è¿™äº›éš¾åˆ†ç±»çš„æ ·æœ¬ã€‚',
                    incorrect: 'âŒ ä¸æ­£ç¡®ã€‚AdaBoostçš„è‡ªé€‚åº”æ€§ä½“ç°åœ¨å¯¹é”™è¯¯åˆ†ç±»æ ·æœ¬çš„é‡ç‚¹å…³æ³¨ä¸Šã€‚'
                },
                2: {
                    correct: 'âœ… æ­£ç¡®ï¼å½“é”™è¯¯ç‡æ¥è¿‘0.5æ—¶ï¼Œåˆ†ç±»å™¨æ€§èƒ½æ¥è¿‘éšæœºçŒœæµ‹ï¼Œå› æ­¤æƒé‡Î±æ¥è¿‘0ã€‚',
                    incorrect: 'âŒ ä¸æ­£ç¡®ã€‚é”™è¯¯ç‡è¶Šé«˜ï¼Œåˆ†ç±»å™¨æƒé‡è¶Šå°ï¼Œå½“é”™è¯¯ç‡ä¸º0.5æ—¶æƒé‡ä¸º0ã€‚'
                },
                3: {
                    correct: 'âœ… æ­£ç¡®ï¼è¿™æ˜¯ä½¿ç”¨validation_curveè¿›è¡ŒAdaBoostå‚æ•°ä¼˜åŒ–çš„æ ‡å‡†å†™æ³•ã€‚',
                    incorrect: 'âŒ ä¸æ­£ç¡®ã€‚è¯·æ³¨æ„åˆ†ç±»å™¨ç±»å‹ã€å‚æ•°åç§°å’Œæ•°æ®å¤„ç†æ–¹æ³•ã€‚'
                },
                4: {
                    correct: 'âœ… æ­£ç¡®ï¼AdaBoostå¯¹å™ªå£°å’Œå¼‚å¸¸å€¼å¾ˆæ•æ„Ÿï¼Œå› ä¸ºå®ƒä¼šä¸æ–­å¢åŠ é”™è¯¯åˆ†ç±»æ ·æœ¬çš„æƒé‡ã€‚',
                    incorrect: 'âŒ ä¸æ­£ç¡®ã€‚AdaBoostçš„ä¸»è¦ç¼ºç‚¹æ˜¯å¯¹å™ªå£°æ•æ„Ÿï¼Œè€Œä¸æ˜¯æ•°æ®è§„æ¨¡æˆ–ç»´åº¦é—®é¢˜ã€‚'
                },
                5: {
                    correct: 'âœ… æ­£ç¡®ï¼ç±»åˆ«ä¸å¹³è¡¡æ—¶å¯ä»¥ä½¿ç”¨æƒé‡è°ƒæ•´æˆ–é‡‡æ ·æŠ€æœ¯æ¥æ”¹å–„æ€§èƒ½ã€‚',
                    incorrect: 'âŒ ä¸æ­£ç¡®ã€‚ç®€å•å¢åŠ åˆ†ç±»å™¨æ•°é‡æˆ–è°ƒæ•´å­¦ä¹ ç‡æ— æ³•æ ¹æœ¬è§£å†³ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜ã€‚'
                }
            };
            
            if (result === 'correct') {
                resultDiv.className = 'quiz-result correct';
                resultDiv.textContent = explanations[questionNum].correct;
            } else {
                resultDiv.className = 'quiz-result incorrect';
                resultDiv.textContent = explanations[questionNum].incorrect;
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('AdaBoostingæ•™å­¦ç½‘é¡µåŠ è½½å®Œæˆï¼');
            
            // æ·»åŠ ä¸€äº›äº¤äº’æç¤º
            const demoButtons = document.querySelectorAll('.demo-button');
            demoButtons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                });
                button.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                });
            });
        });
    </script>
</body>
</html>